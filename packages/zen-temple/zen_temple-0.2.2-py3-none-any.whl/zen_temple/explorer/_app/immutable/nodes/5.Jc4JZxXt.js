import{s as He,r as U,e as k,a as R,c as C,m as Y,g as Z,b as q,f as _,o as v,v as ne,i as H,h as D,w as X,y as ve,t as pe,d as ge,z as Se,A as be,B as ke,j as Te,C as Le,D as Me,E as Ce,F as Ae,n as N}from"../chunks/scheduler.Bw2O2KLD.js";import{S as Ne,i as ze,b as x,c as oe,d as se,m as ae,t as W,a as G,e as fe,f as ie,g as _e}from"../chunks/index.Cyrvb228.js";import{e as we}from"../chunks/each.D6YF6ztN.js";import{S as je,f as Be,B as Oe,b as qe}from"../chunks/utils.CTH_HMPs.js";import{A as Pe}from"../chunks/AllCheckbox.dzwR-lxb.js";import{D as Fe}from"../chunks/Dropdown.B1LicA_3.js";import{g as We}from"../chunks/variables.CqS7hfz2.js";import{T as Ye}from"../chunks/ToggleButton.CgFO1nKI.js";function ye(n,e,t){const l=n.slice();return l[39]=e[t],l}function Ee(n){let e,t,l='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Variable Selection</button>',o,c,i,g,s,w,f=n[2].length>0&&De(n),m=n[0]&&n[6]&&n[4].length>0&&n[3].length>0&&Ve(n);return{c(){e=k("div"),t=k("h2"),t.innerHTML=l,o=R(),c=k("div"),i=k("div"),f&&f.c(),g=R(),m&&m.c(),s=ve(),this.h()},l(r){e=C(r,"DIV",{class:!0});var d=q(e);t=C(d,"H2",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-18ejqb9"&&(t.innerHTML=l),o=Z(d),c=C(d,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var I=q(c);i=C(I,"DIV",{class:!0});var T=q(i);f&&f.l(T),T.forEach(_),I.forEach(_),d.forEach(_),g=Z(r),m&&m.l(r),s=ve(),this.h()},h(){v(t,"class","accordion-header"),v(i,"class","accordion-body"),v(c,"id","collapseTwo"),v(c,"class","accordion-collapse collapse"),v(c,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item variable-selction")},m(r,d){H(r,e,d),D(e,t),D(e,o),D(e,c),D(c,i),f&&f.m(i,null),H(r,g,d),m&&m.m(r,d),H(r,s,d),w=!0},p(r,d){r[2].length>0?f?(f.p(r,d),d[0]&4&&W(f,1)):(f=De(r),f.c(),W(f,1),f.m(i,null)):f&&(_e(),G(f,1,1,()=>{f=null}),fe()),r[0]&&r[6]&&r[4].length>0&&r[3].length>0?m?(m.p(r,d),d[0]&89&&W(m,1)):(m=Ve(r),m.c(),W(m,1),m.m(s.parentNode,s)):m&&(_e(),G(m,1,1,()=>{m=null}),fe())},i(r){w||(W(f),W(m),w=!0)},o(r){G(f),G(m),w=!1},d(r){r&&(_(e),_(g),_(s)),f&&f.d(),m&&m.d(r)}}}function De(n){let e,t="Carrier",l,o,c,i=(n[9]||n[8])+"",g,s,w,f,m="Year",r,d,I,T,O,F,V,S=we(n[2]),h=[];for(let a=0;a<S.length;a+=1)h[a]=Ie(ye(n,S,a));function P(a){n[23](a)}function j(a){n[24](a)}let L={enabled:!n[9]&&!n[8]};return n[12]!==void 0&&(L.options=n[12]),n[13]!==void 0&&(L.selected_option=n[13]),d=new Fe({props:L}),U.push(()=>x(d,"options",P)),U.push(()=>x(d,"selected_option",j)),d.$on("selection-changed",n[16]),{c(){e=k("h3"),e.textContent=t,l=R(),o=k("select");for(let a=0;a<h.length;a+=1)h[a].c();c=pe(`
                                        disabled=`),g=pe(i),w=R(),f=k("h3"),f.textContent=m,r=R(),oe(d.$$.fragment),this.h()},l(a){e=C(a,"H3",{"data-svelte-h":!0}),Y(e)!=="svelte-xc22hm"&&(e.textContent=t),l=Z(a),o=C(a,"SELECT",{});var E=q(o);for(let M=0;M<h.length;M+=1)h[M].l(E);c=ge(E,`
                                        disabled=`),g=ge(E,i),E.forEach(_),w=Z(a),f=C(a,"H3",{"data-svelte-h":!0}),Y(f)!=="svelte-r9e7qt"&&(f.textContent=m),r=Z(a),se(d.$$.fragment,a),this.h()},h(){o.disabled=s=n[9]||n[8],n[6]===void 0&&Se(()=>n[22].call(o))},m(a,E){H(a,e,E),H(a,l,E),H(a,o,E);for(let M=0;M<h.length;M+=1)h[M]&&h[M].m(o,null);D(o,c),D(o,g),be(o,n[6],!0),H(a,w,E),H(a,f,E),H(a,r,E),ae(d,a,E),O=!0,F||(V=[ke(o,"change",n[22]),ke(o,"change",n[16])],F=!0)},p(a,E){if(E[0]&4){S=we(a[2]);let p;for(p=0;p<S.length;p+=1){const A=ye(a,S,p);h[p]?h[p].p(A,E):(h[p]=Ie(A),h[p].c(),h[p].m(o,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=S.length}(!O||E[0]&768)&&i!==(i=(a[9]||a[8])+"")&&Te(g,i),(!O||E[0]&768&&s!==(s=a[9]||a[8]))&&(o.disabled=s),E[0]&68&&be(o,a[6]);const M={};E[0]&768&&(M.enabled=!a[9]&&!a[8]),!I&&E[0]&4096&&(I=!0,M.options=a[12],X(()=>I=!1)),!T&&E[0]&8192&&(T=!0,M.selected_option=a[13],X(()=>T=!1)),d.$set(M)},i(a){O||(W(d.$$.fragment,a),O=!0)},o(a){G(d.$$.fragment,a),O=!1},d(a){a&&(_(e),_(l),_(o),_(w),_(f),_(r)),Le(h,a),ie(d,a),F=!1,Me(V)}}}function Ie(n){let e,t=n[39]+"",l,o;return{c(){e=k("option"),l=pe(t),this.h()},l(c){e=C(c,"OPTION",{});var i=q(e);l=ge(i,t),i.forEach(_),this.h()},h(){e.__value=o=n[39],Ce(e,e.__value)},m(c,i){H(c,e,i),D(e,l)},p(c,i){i[0]&4&&t!==(t=c[39]+"")&&Te(l,t),i[0]&4&&o!==(o=c[39])&&(e.__value=o,Ce(e,e.__value))},d(c){c&&_(e)}}}function Ve(n){let e,t,l='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Data Selection</button>',o,c,i,g,s,w,f="Stacked",m,r,d,I,T,O="Node",F,V,S,h,P;function j(p){n[25](p)}let L={};n[11]!==void 0&&(L.value=n[11]),r=new Ye({props:L}),U.push(()=>x(r,"value",j)),r.$on("change",n[17]);function a(p){n[26](p)}function E(p){n[27](p)}let M={};return n[7]!==void 0&&(M.selected_elements=n[7]),n[3]!==void 0&&(M.elements=n[3]),V=new Pe({props:M}),U.push(()=>x(V,"selected_elements",a)),U.push(()=>x(V,"elements",E)),V.$on("selection-changed",n[17]),{c(){e=k("div"),t=k("h2"),t.innerHTML=l,o=R(),c=k("div"),i=k("div"),g=k("div"),s=R(),w=k("h3"),w.textContent=f,m=R(),oe(r.$$.fragment),I=R(),T=k("h3"),T.textContent=O,F=R(),oe(V.$$.fragment),this.h()},l(p){e=C(p,"DIV",{class:!0});var A=q(e);t=C(A,"H2",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1btd1mx"&&(t.innerHTML=l),o=Z(A),c=C(A,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var y=q(c);i=C(y,"DIV",{class:!0});var B=q(i);g=C(B,"DIV",{class:!0}),q(g).forEach(_),s=Z(B),w=C(B,"H3",{"data-svelte-h":!0}),Y(w)!=="svelte-1jbfgxp"&&(w.textContent=f),m=Z(B),se(r.$$.fragment,B),I=Z(B),T=C(B,"H3",{"data-svelte-h":!0}),Y(T)!=="svelte-ocjo5w"&&(T.textContent=O),F=Z(B),se(V.$$.fragment,B),B.forEach(_),y.forEach(_),A.forEach(_),this.h()},h(){v(t,"class","accordion-header"),v(g,"class","row"),v(i,"class","accordion-body"),v(c,"id","collapseThree"),v(c,"class","accordion-collapse collapse"),v(c,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item")},m(p,A){H(p,e,A),D(e,t),D(e,o),D(e,c),D(c,i),D(i,g),D(i,s),D(i,w),D(i,m),ae(r,i,null),D(i,I),D(i,T),D(i,F),ae(V,i,null),P=!0},p(p,A){const y={};!d&&A[0]&2048&&(d=!0,y.value=p[11],X(()=>d=!1)),r.$set(y);const B={};!S&&A[0]&128&&(S=!0,B.selected_elements=p[7],X(()=>S=!1)),!h&&A[0]&8&&(h=!0,B.elements=p[3],X(()=>h=!1)),V.$set(B)},i(p){P||(W(r.$$.fragment,p),W(V.$$.fragment,p),P=!0)},o(p){G(r.$$.fragment,p),G(V.$$.fragment,p),P=!1},d(p){p&&_(e),ie(r),ie(V)}}}function Ke(n){let e,t,l,o;function c(s){n[28](s)}function i(s){n[29](s)}let g={zoom:!0};return n[14]!==void 0&&(g.config=n[14]),n[10]!==void 0&&(g.plot_name=n[10]),e=new Oe({props:g}),U.push(()=>x(e,"config",c)),U.push(()=>x(e,"plot_name",i)),{c(){oe(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,w){ae(e,s,w),o=!0},p(s,w){const f={};!t&&w[0]&16384&&(t=!0,f.config=s[14],X(()=>t=!1)),!l&&w[0]&1024&&(l=!0,f.plot_name=s[10],X(()=>l=!1)),e.$set(f)},i(s){o||(W(e.$$.fragment,s),o=!0)},o(s){G(e.$$.fragment,s),o=!1},d(s){ie(e,s)}}}function Re(n){let e,t="No data with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Ze(n){let e,t="No locations with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-tr8mx7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Ge(n){let e,t="No data with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Je(n){let e,t="No solution selected.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-17x0k81"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Qe(n){let e,t="No carriers with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1wht3n0"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Ue(n){let e,t="No technologies with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1ontq7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Xe(n){let e,t='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-57s7b4"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function xe(n){let e,t='<div class="col"><h2>The Energy Balance Storage</h2></div>',l,o,c,i,g,s,w,f='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',m,r,d,I,T,O,F,V,S,h,P,j,L,a;function E(u){n[18](u)}function M(u){n[19](u)}function p(u){n[20](u)}let A={enabled:!n[9]&&!n[8]};n[5]!==void 0&&(A.selected_solution=n[5]),n[8]!==void 0&&(A.loading=n[8]),n[12]!==void 0&&(A.years=n[12]),I=new je({props:A}),U.push(()=>x(I,"selected_solution",E)),U.push(()=>x(I,"loading",M)),U.push(()=>x(I,"years",p)),I.$on("solution_selected",n[21]);let y=!n[8]&&n[5]&&Ee(n);const B=[Xe,Ue,Qe,Je,Ge,Ze,Re,Ke],J=[];function re(u,z){return u[8]||u[9]?0:u[4].length==0?1:u[2].length==0?2:u[5]==null?3:u[1]==null?4:u[3].length==0?5:u[1].length==0?6:7}return j=re(n),L=J[j]=B[j](n),{c(){e=k("div"),e.innerHTML=t,l=R(),o=k("div"),c=k("div"),i=k("div"),g=k("div"),s=k("div"),w=k("h2"),w.innerHTML=f,m=R(),r=k("div"),d=k("div"),oe(I.$$.fragment),V=R(),y&&y.c(),S=R(),h=k("div"),P=k("div"),L.c(),this.h()},l(u){e=C(u,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-wp6wh4"&&(e.innerHTML=t),l=Z(u),o=C(u,"DIV",{class:!0,style:!0});var z=q(o);c=C(z,"DIV",{class:!0});var Q=q(c);i=C(Q,"DIV",{class:!0,style:!0});var $=q(i);g=C($,"DIV",{class:!0,id:!0});var ee=q(g);s=C(ee,"DIV",{class:!0});var te=q(s);w=C(te,"H2",{class:!0,"data-svelte-h":!0}),Y(w)!=="svelte-1oln34a"&&(w.innerHTML=f),m=Z(te),r=C(te,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var ce=q(r);d=C(ce,"DIV",{class:!0});var ue=q(d);se(I.$$.fragment,ue),ue.forEach(_),ce.forEach(_),te.forEach(_),V=Z(ee),y&&y.l(ee),ee.forEach(_),$.forEach(_),Q.forEach(_),z.forEach(_),S=Z(u),h=C(u,"DIV",{class:!0,style:!0});var de=q(h);P=C(de,"DIV",{class:!0});var b=q(P);L.l(b),b.forEach(_),de.forEach(_),this.h()},h(){v(e,"class","row"),v(w,"class","accordion-header"),v(d,"class","accordion-body"),v(r,"id","collapseOne"),v(r,"class","accordion-collapse collapse show"),v(r,"data-bs-parent","#accordionExample"),v(s,"class","accordion-item solution-selection"),v(g,"class","accordion"),v(g,"id","accordionExample"),v(i,"class","filters"),ne(i,"position","absolute"),ne(i,"width","100%"),v(c,"class","col position-relative"),v(o,"class","row"),ne(o,"z-index","1"),ne(o,"position","relative"),v(P,"class","row"),v(h,"class","col"),ne(h,"margin-top","400px")},m(u,z){H(u,e,z),H(u,l,z),H(u,o,z),D(o,c),D(c,i),D(i,g),D(g,s),D(s,w),D(s,m),D(s,r),D(r,d),ae(I,d,null),D(g,V),y&&y.m(g,null),H(u,S,z),H(u,h,z),D(h,P),J[j].m(P,null),a=!0},p(u,z){const Q={};z[0]&768&&(Q.enabled=!u[9]&&!u[8]),!T&&z[0]&32&&(T=!0,Q.selected_solution=u[5],X(()=>T=!1)),!O&&z[0]&256&&(O=!0,Q.loading=u[8],X(()=>O=!1)),!F&&z[0]&4096&&(F=!0,Q.years=u[12],X(()=>F=!1)),I.$set(Q),!u[8]&&u[5]?y?(y.p(u,z),z[0]&288&&W(y,1)):(y=Ee(u),y.c(),W(y,1),y.m(g,null)):y&&(_e(),G(y,1,1,()=>{y=null}),fe());let $=j;j=re(u),j===$?J[j].p(u,z):(_e(),G(J[$],1,1,()=>{J[$]=null}),fe(),L=J[j],L?L.p(u,z):(L=J[j]=B[j](u),L.c()),W(L,1),L.m(P,null))},i(u){a||(W(I.$$.fragment,u),W(y),W(L),a=!0)},o(u){G(I.$$.fragment,u),G(y),G(L),a=!1},d(u){u&&(_(e),_(l),_(o),_(S),_(h)),ie(I),y&&y.d(),J[j].d()}}}let he="storage_level";function $e(n,e,t){let l=null,o=null,c=[],i=[],g=[],s=null,w=null,f=null,m="technology",r=[],d=[],I=!1,T=!1,O="",F=!1,V=[],S=0,h={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};function P(){t(7,d=i),r=g,m="node"}async function j(){if(t(0,l=null),s===null)return;console.log("SELECTED YEAR"),console.log(S),console.log("WAT");let b=Math.floor((S-s.detail.system.reference_year)/s.detail.system.interval_between_years),K=await qe(s.solution_name,We(he),s.scenario_name,b);t(0,l=K.data),w=K.unit}async function L(){s!==null&&(console.log(V),t(9,T=!0),t(13,S=V[0]),await j(),p(),A(),E(),P(),y(),t(9,T=!1))}async function a(){t(9,T=!0),await j(),A(),E(),P(),y(),t(9,T=!1)}function E(){t(3,i=Array.from(new Set(l.data.map(b=>b.node)))),t(7,d=i)}function M(){try{return w.data[0][0]}catch{return""}}function p(){if(t(2,c=[]),!l)return;let b=Array.from(l.data.map(K=>K.technology));l.data.forEach(K=>{let le=K.technology,me=s.detail.reference_carrier[le];!c.includes(me)&&b.includes(K.technology)&&c.push(me)}),c.length>0&&t(6,f=c[0])}function A(){let b=Array.from(new Set(l.data.map(K=>K.technology)));t(4,g=b.filter(K=>(s==null?void 0:s.detail.reference_carrier[K])==f)),r=g}function y(){if(m=="technology"?t(7,d=i):r=g,d.length==0||r.length==0||l===null){t(1,o=null);return}let b={},K={};b.technology=r,K.node=d,t(1,o=Be(l.data,b,K,[],!1,"line")),t(14,h.data={datasets:o},h),t(14,h.options.scales.y.title.text=he+" ["+M()+"]",h),t(14,h.options.scales.y.stacked=F,h);let le=s.solution_name.split(".");t(10,O=[le[(le==null?void 0:le.length)-1],s==null?void 0:s.scenario_name,he,f].join("_"))}function B(b){s=b,t(5,s)}function J(b){I=b,t(8,I)}function re(b){V=b,t(12,V)}const u=()=>{L()};function z(){f=Ae(this),t(6,f),t(2,c)}function Q(b){V=b,t(12,V)}function $(b){S=b,t(13,S)}function ee(b){F=b,t(11,F)}function te(b){d=b,t(7,d)}function ce(b){i=b,t(3,i)}function ue(b){h=b,t(14,h)}function de(b){O=b,t(10,O)}return[l,o,c,i,g,s,f,d,I,T,O,F,V,S,h,L,a,y,B,J,re,u,z,Q,$,ee,te,ce,ue,de]}class rt extends Ne{constructor(e){super(),ze(this,e,$e,xe,He,{},null,[-1,-1])}}export{rt as component};
