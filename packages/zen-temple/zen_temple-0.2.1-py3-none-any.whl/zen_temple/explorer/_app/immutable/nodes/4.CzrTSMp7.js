import{s as it,e as g,c as h,b as E,f as p,y as Et,o as b,i as U,h as u,z as Xe,A as $e,n as xe,B as kt,C as yt,G as Dt,t as Ct,a as z,d as It,g as P,D as et,j as Vt,E as Tt,r as L,m as ae,v as ze,w as M,F as tt}from"../chunks/scheduler.BVk0_e6s.js";import{S as rt,i as dt,b as O,c as Ee,d as ke,m as ye,t as oe,a as ie,e as Ht,f as De,g as Lt}from"../chunks/index.B3JOrRZV.js";import{S as Mt,B as Ot,b as St,c as jt,f as zt}from"../chunks/utils.vTcOBzXM.js";import{e as nt}from"../chunks/each.D6YF6ztN.js";import{g as ne}from"../chunks/variables.CqS7hfz2.js";function ot(e,o,t){const d=e.slice();return d[8]=o[t],d}function lt(e){let o,t=e[8]+"",d,l,v;return{c(){o=g("option"),d=Ct(t),l=z(),this.h()},l(_){o=h(_,"OPTION",{});var s=E(o);d=It(s,t),l=P(s),s.forEach(p),this.h()},h(){o.__value=v=e[8],et(o,o.__value)},m(_,s){U(_,o,s),u(o,d),u(o,l)},p(_,s){s&2&&t!==(t=_[8]+"")&&Vt(d,t),s&2&&v!==(v=_[8])&&(o.__value=v,et(o,o.__value))},d(_){_&&p(o)}}}function Pt(e){let o,t,d,l,v,_=nt(e[1]),s=[];for(let r=0;r<_.length;r+=1)s[r]=lt(ot(e,_,r));return{c(){o=g("div"),t=g("select");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){o=h(r,"DIV",{class:!0});var a=E(o);t=h(a,"SELECT",{});var i=E(t);for(let w=0;w<s.length;w+=1)s[w].l(i);i.forEach(p),a.forEach(p),this.h()},h(){t.disabled=d=!e[2],e[0]===void 0&&Et(()=>e[4].call(t)),b(o,"class","dropdown")},m(r,a){U(r,o,a),u(o,t);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(t,null);Xe(t,e[0],!0),l||(v=[$e(t,"change",e[4]),$e(t,"change",e[5])],l=!0)},p(r,[a]){if(a&2){_=nt(r[1]);let i;for(i=0;i<_.length;i+=1){const w=ot(r,_,i);s[i]?s[i].p(w,a):(s[i]=lt(w),s[i].c(),s[i].m(t,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=_.length}a&4&&d!==(d=!r[2])&&(t.disabled=d),a&3&&Xe(t,r[0])},i:xe,o:xe,d(r){r&&p(o),kt(s,r),l=!1,yt(v)}}}function Bt(e,o,t){let{options:d}=o,{selected_option:l=d[0]}=o,{enabled:v=!0}=o;d.join("_");const _=Dt();function s(){_("selection-changed",l)}function r(){l=Tt(this),t(0,l),t(1,d)}const a=()=>s();return e.$$set=i=>{"options"in i&&t(1,d=i.options),"selected_option"in i&&t(0,l=i.selected_option),"enabled"in i&&t(2,v=i.enabled)},[l,d,v,s,r,a]}class We extends rt{constructor(o){super(),dt(this,o,Bt,Pt,it,{options:1,selected_option:0,enabled:2})}}function st(e){let o,t='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){o=g("div"),o.innerHTML=t,this.h()},l(d){o=h(d,"DIV",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-57s7b4"&&(o.innerHTML=t),this.h()},h(){b(o,"class","text-center")},m(d,l){U(d,o,l)},d(d){d&&p(o)}}}function at(e){let o,t,d,l,v;function _(a){e[25](a)}function s(a){e[26](a)}let r={zoom:!0};return e[11]!==void 0&&(r.config=e[11]),e[10]!==void 0&&(r.plot_name=e[10]),t=new Ot({props:r}),L.push(()=>O(t,"config",_)),L.push(()=>O(t,"plot_name",s)),{c(){o=g("div"),Ee(t.$$.fragment),this.h()},l(a){o=h(a,"DIV",{style:!0});var i=E(o);ke(t.$$.fragment,i),i.forEach(p),this.h()},h(){ze(o,"position","relative")},m(a,i){U(a,o,i),ye(t,o,null),v=!0},p(a,i){const w={};!d&&i&2048&&(d=!0,w.config=a[11],M(()=>d=!1)),!l&&i&1024&&(l=!0,w.plot_name=a[10],M(()=>l=!1)),t.$set(w)},i(a){v||(oe(t.$$.fragment,a),v=!0)},o(a){ie(t.$$.fragment,a),v=!1},d(a){a&&p(o),De(t)}}}function qt(e){let o,t='<div class="col"><h2>The Energy Balance</h2></div>',d,l,v,_,s,r,a,i='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',w,D,I,y,X,re,V,be,de,ve,F,Z,Ce='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Data selection</button>',me,N,S,$,W,x,Ie="Year",we,T,f,G,ce,K,j,B,R="Node",ue,H,_e,c,ee,fe,te,pe,Ge="Carrier",Pe,q,Be,qe,Ve,le,A,Te,He;function ct(n){e[14](n)}function ut(n){e[15](n)}function _t(n){e[16](n)}function ft(n){e[17](n)}function pt(n){e[18](n)}let ge={enabled:!e[2]&&!e[3]};e[6]!==void 0&&(ge.carriers=e[6]),e[4]!==void 0&&(ge.nodes=e[4]),e[8]!==void 0&&(ge.years=e[8]),e[0]!==void 0&&(ge.selected_solution=e[0]),e[2]!==void 0&&(ge.loading=e[2]),y=new Mt({props:ge}),L.push(()=>O(y,"carriers",ct)),L.push(()=>O(y,"nodes",ut)),L.push(()=>O(y,"years",_t)),L.push(()=>O(y,"selected_solution",ft)),L.push(()=>O(y,"loading",pt)),y.$on("solution_selected",e[12]);function gt(n){e[19](n)}function ht(n){e[20](n)}let Ae={enabled:!e[3]&&!e[2]};e[8]!==void 0&&(Ae.options=e[8]),e[9]!==void 0&&(Ae.selected_option=e[9]),T=new We({props:Ae}),L.push(()=>O(T,"options",gt)),L.push(()=>O(T,"selected_option",ht)),T.$on("selection-changed",e[13]);function bt(n){e[21](n)}function vt(n){e[22](n)}let Fe={enabled:!e[3]&&!e[2]};e[4]!==void 0&&(Fe.options=e[4]),e[5]!==void 0&&(Fe.selected_option=e[5]),H=new We({props:Fe}),L.push(()=>O(H,"options",bt)),L.push(()=>O(H,"selected_option",vt)),H.$on("selection-changed",e[13]);function mt(n){e[23](n)}function wt(n){e[24](n)}let Ne={enabled:!e[3]&&!e[2]};e[6]!==void 0&&(Ne.options=e[6]),e[7]!==void 0&&(Ne.selected_option=e[7]),q=new We({props:Ne}),L.push(()=>O(q,"options",mt)),L.push(()=>O(q,"selected_option",wt)),q.$on("selection-changed",e[13]);let C=e[3]&&st(),k=!e[3]&&e[1]&&at(e);return{c(){o=g("div"),o.innerHTML=t,d=z(),l=g("div"),v=g("div"),_=g("div"),s=g("div"),r=g("div"),a=g("h2"),a.innerHTML=i,w=z(),D=g("div"),I=g("div"),Ee(y.$$.fragment),ve=z(),F=g("div"),Z=g("h2"),Z.innerHTML=Ce,me=z(),N=g("div"),S=g("div"),$=g("div"),W=g("div"),x=g("h3"),x.textContent=Ie,we=z(),Ee(T.$$.fragment),ce=z(),K=g("div"),j=g("div"),B=g("h3"),B.textContent=R,ue=z(),Ee(H.$$.fragment),ee=z(),fe=g("div"),te=g("div"),pe=g("h3"),pe.textContent=Ge,Pe=z(),Ee(q.$$.fragment),Ve=z(),le=g("div"),A=g("div"),C&&C.c(),Te=z(),k&&k.c(),this.h()},l(n){o=h(n,"DIV",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-1d6fcfp"&&(o.innerHTML=t),d=P(n),l=h(n,"DIV",{class:!0});var m=E(l);v=h(m,"DIV",{class:!0});var Y=E(v);_=h(Y,"DIV",{class:!0,style:!0});var se=E(_);s=h(se,"DIV",{class:!0,id:!0});var J=E(s);r=h(J,"DIV",{class:!0});var Q=E(r);a=h(Q,"H2",{class:!0,"data-svelte-h":!0}),ae(a)!=="svelte-1oln34a"&&(a.innerHTML=i),w=P(Q),D=h(Q,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var Ke=E(D);I=h(Ke,"DIV",{class:!0});var Re=E(I);ke(y.$$.fragment,Re),Re.forEach(p),Ke.forEach(p),Q.forEach(p),ve=P(J),F=h(J,"DIV",{class:!0});var Le=E(F);Z=h(Le,"H2",{class:!0,"data-svelte-h":!0}),ae(Z)!=="svelte-1huxmzt"&&(Z.innerHTML=Ce),me=P(Le),N=h(Le,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var Ye=E(N);S=h(Ye,"DIV",{class:!0});var he=E(S);$=h(he,"DIV",{class:!0});var Ze=E($);W=h(Ze,"DIV",{class:!0});var Me=E(W);x=h(Me,"H3",{"data-svelte-h":!0}),ae(x)!=="svelte-r9e7qt"&&(x.textContent=Ie),we=P(Me),ke(T.$$.fragment,Me),Me.forEach(p),Ze.forEach(p),ce=P(he),K=h(he,"DIV",{class:!0});var Je=E(K);j=h(Je,"DIV",{class:!0});var Oe=E(j);B=h(Oe,"H3",{"data-svelte-h":!0}),ae(B)!=="svelte-ocjo5w"&&(B.textContent=R),ue=P(Oe),ke(H.$$.fragment,Oe),Oe.forEach(p),Je.forEach(p),ee=P(he),fe=h(he,"DIV",{class:!0});var Qe=E(fe);te=h(Qe,"DIV",{class:!0});var Se=E(te);pe=h(Se,"H3",{"data-svelte-h":!0}),ae(pe)!=="svelte-xc22hm"&&(pe.textContent=Ge),Pe=P(Se),ke(q.$$.fragment,Se),Se.forEach(p),Qe.forEach(p),he.forEach(p),Ye.forEach(p),Le.forEach(p),J.forEach(p),se.forEach(p),Y.forEach(p),m.forEach(p),Ve=P(n),le=h(n,"DIV",{class:!0});var Ue=E(le);A=h(Ue,"DIV",{class:!0,style:!0});var je=E(A);C&&C.l(je),Te=P(je),k&&k.l(je),je.forEach(p),Ue.forEach(p),this.h()},h(){b(o,"class","row"),b(a,"class","accordion-header"),b(I,"class","accordion-body"),b(D,"id","collapseOne"),b(D,"class","accordion-collapse collapse show"),b(D,"data-bs-parent","#accordionExample"),b(r,"class","accordion-item solution-selection"),b(Z,"class","accordion-header"),b(W,"class","col-6"),b($,"class","row"),b(j,"class","col-6"),b(K,"class","row"),b(te,"class","col-6"),b(fe,"class","row"),b(S,"class","accordion-body"),b(N,"id","collapseTwo"),b(N,"class","accordion-collapse collapse"),b(N,"data-bs-parent","#accordionExample"),b(F,"class","accordion-item"),b(s,"class","accordion"),b(s,"id","accordionExample"),b(_,"class","filters"),ze(_,"position","absolute"),ze(_,"width","100%"),b(v,"class","col position-relative"),b(l,"class","row"),b(A,"class","col"),ze(A,"margin-top","400px"),b(le,"class","row")},m(n,m){U(n,o,m),U(n,d,m),U(n,l,m),u(l,v),u(v,_),u(_,s),u(s,r),u(r,a),u(r,w),u(r,D),u(D,I),ye(y,I,null),u(s,ve),u(s,F),u(F,Z),u(F,me),u(F,N),u(N,S),u(S,$),u($,W),u(W,x),u(W,we),ye(T,W,null),u(S,ce),u(S,K),u(K,j),u(j,B),u(j,ue),ye(H,j,null),u(S,ee),u(S,fe),u(fe,te),u(te,pe),u(te,Pe),ye(q,te,null),U(n,Ve,m),U(n,le,m),u(le,A),C&&C.m(A,null),u(A,Te),k&&k.m(A,null),He=!0},p(n,[m]){const Y={};m&12&&(Y.enabled=!n[2]&&!n[3]),!X&&m&64&&(X=!0,Y.carriers=n[6],M(()=>X=!1)),!re&&m&16&&(re=!0,Y.nodes=n[4],M(()=>re=!1)),!V&&m&256&&(V=!0,Y.years=n[8],M(()=>V=!1)),!be&&m&1&&(be=!0,Y.selected_solution=n[0],M(()=>be=!1)),!de&&m&4&&(de=!0,Y.loading=n[2],M(()=>de=!1)),y.$set(Y);const se={};m&12&&(se.enabled=!n[3]&&!n[2]),!f&&m&256&&(f=!0,se.options=n[8],M(()=>f=!1)),!G&&m&512&&(G=!0,se.selected_option=n[9],M(()=>G=!1)),T.$set(se);const J={};m&12&&(J.enabled=!n[3]&&!n[2]),!_e&&m&16&&(_e=!0,J.options=n[4],M(()=>_e=!1)),!c&&m&32&&(c=!0,J.selected_option=n[5],M(()=>c=!1)),H.$set(J);const Q={};m&12&&(Q.enabled=!n[3]&&!n[2]),!Be&&m&64&&(Be=!0,Q.options=n[6],M(()=>Be=!1)),!qe&&m&128&&(qe=!0,Q.selected_option=n[7],M(()=>qe=!1)),q.$set(Q),n[3]?C||(C=st(),C.c(),C.m(A,Te)):C&&(C.d(1),C=null),!n[3]&&n[1]?k?(k.p(n,m),m&10&&oe(k,1)):(k=at(n),k.c(),oe(k,1),k.m(A,null)):k&&(Lt(),ie(k,1,1,()=>{k=null}),Ht())},i(n){He||(oe(y.$$.fragment,n),oe(T.$$.fragment,n),oe(H.$$.fragment,n),oe(q.$$.fragment,n),oe(k),He=!0)},o(n){ie(y.$$.fragment,n),ie(T.$$.fragment,n),ie(H.$$.fragment,n),ie(q.$$.fragment,n),ie(k),He=!1},d(n){n&&(p(o),p(d),p(l),p(Ve),p(le)),De(y),De(T),De(H),De(q),C&&C.d(),k&&k.d()}}}function At(e,o,t){var d=["rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(255, 99, 132)","rgb(201, 203, 207)","rgb(220,20,60)","rgb(255,99,71)","rgb(255,69,0)","rgb(154,205,50)","rgb(0,100,0)","rgb(50,205,50)","rgb(0,139,139)","rgb(153,50,204)","rgb(255,105,180)"];let l=null,v=!1,_=!1,s=!1,r=[],a=null,i=[],w=null,D=[],I=null,y="",X="";const re={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};let V=structuredClone(re);async function be(){l&&(t(11,V=structuredClone(re)),t(5,a=r[0]),t(7,w=i[0]),t(9,I=D[0]),t(1,v=!1),await de())}async function de(){if(t(3,s=!0),tt(),a==null||w==null||I==null||l==null){t(3,s=!1);return}let f=Math.floor((I-l.detail.system.reference_year)/l.detail.system.interval_between_years),G=await St(l.solution_name,a,w,l.scenario_name,f),ce=await jt(l.solution_name,ne("flow_export",l.version),l.scenario_name);ce===null?y="":y=ce.data[0][0];let K=[],j=0;for(const R in G){let ue={node:[a]};if(G[R]==null||G[R].data.length==0)continue;if("technology"in G[R].data[0]){let c=[];for(const ee of G[R].data)c.push(ee.technology);ue={technology:c}}let H={},_e=zt(G[R].data,ue,H);if(_e.length!=0)for(let c of _e){if(Object.keys(c.data).length==0)continue;switch(R){case ne("flow_storage_discharge",l.version):c.label=c.label+" (discharge)";break;case ne("flow_transport_in",l.version):c.label=c.label+" (transport in)";break;case ne("flow_import",l.version):c.label="Import",l.version;break;case ne("shed_demand",l.version):c.label="Shed Demand";break;case ne("flow_storage_charge",l.version):c.label=c.label+" (charge)";break;case ne("flow_transport_out",l.version):c.label=c.label+" (transport out)";break;case ne("flow_export",l.version):c.label="Export";break}let ee="line";Object.keys(c.data).length==1&&(ee="bar"),R=="demand"?(c.label="Demand",c.type="line",c.stack="ownCustomStack",c.fill=!1,c.borderColor="black",c.backgroundColor="white",c.borderWidth=2,c.stepped=!0,Object.keys(c.data).length==1&&(c.pointRadius=2)):(c.type=ee,c.fill="origin",c.borderColor=d[j%d.length],c.backgroundColor=d[j%d.length].replace(")",", 1)"),c.stepped=!0,c.cubicInterpolationMode="monotone"),K.push(c),j++}}t(11,V.data.labels=Object.keys(K[0].data),V),t(11,V.data.datasets=K,V),t(11,V.options.scales.y.title.text="Power ["+y+"]",V),t(3,s=!1),t(1,v=!0),await tt();let B=l.solution_name.split(".");t(10,X=[B[(B==null?void 0:B.length)-1],l==null?void 0:l.scenario_name,"balance",w,a,I].join("_"))}function ve(f){i=f,t(6,i)}function F(f){r=f,t(4,r)}function Z(f){D=f,t(8,D)}function Ce(f){l=f,t(0,l)}function me(f){_=f,t(2,_)}function N(f){D=f,t(8,D)}function S(f){I=f,t(9,I)}function $(f){r=f,t(4,r)}function W(f){a=f,t(5,a)}function x(f){i=f,t(6,i)}function Ie(f){w=f,t(7,w)}function we(f){V=f,t(11,V)}function T(f){X=f,t(10,X)}return[l,v,_,s,r,a,i,w,D,I,X,V,be,de,ve,F,Z,Ce,me,N,S,$,W,x,Ie,we,T]}class Rt extends rt{constructor(o){super(),dt(this,o,At,qt,it,{})}}export{Rt as component};
