import{s as Me,r as U,e as C,a as R,c as w,m as Y,g as Z,b as j,f as _,o as v,v as oe,i as H,h as D,w as X,y as Ce,t as me,d as ve,z as Ae,A as we,B as ke,j as Se,C as Ne,D as ze,E as ye,F as qe,n as N}from"../chunks/scheduler.Bw2O2KLD.js";import{S as Be,i as Oe,b as $,c as se,d as ae,m as ie,t as W,a as G,e as _e,f as re,g as he}from"../chunks/index.Cyrvb228.js";import{e as Ee}from"../chunks/each.D6YF6ztN.js";import{S as je,f as Pe,B as Fe,b as We}from"../chunks/utils.A9D7PIXO.js";import{A as Ye}from"../chunks/AllCheckbox.dzwR-lxb.js";import{D as Ke}from"../chunks/Dropdown.B1LicA_3.js";import{g as Re}from"../chunks/variables.CqS7hfz2.js";import{T as Ze}from"../chunks/ToggleButton.CgFO1nKI.js";function De(n,e,t){const l=n.slice();return l[39]=e[t],l}function Ie(n){let e,t,l='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Variable Selection</button>',o,c,i,g,s,k,f=n[2].length>0&&Te(n),m=n[0]&&n[6]&&n[4].length>0&&n[3].length>0&&He(n);return{c(){e=C("div"),t=C("h2"),t.innerHTML=l,o=R(),c=C("div"),i=C("div"),f&&f.c(),g=R(),m&&m.c(),s=Ce(),this.h()},l(r){e=w(r,"DIV",{class:!0});var d=j(e);t=w(d,"H2",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-18ejqb9"&&(t.innerHTML=l),o=Z(d),c=w(d,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var I=j(c);i=w(I,"DIV",{class:!0});var V=j(i);f&&f.l(V),V.forEach(_),I.forEach(_),d.forEach(_),g=Z(r),m&&m.l(r),s=Ce(),this.h()},h(){v(t,"class","accordion-header"),v(i,"class","accordion-body"),v(c,"id","collapseTwo"),v(c,"class","accordion-collapse collapse"),v(c,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item variable-selction")},m(r,d){H(r,e,d),D(e,t),D(e,o),D(e,c),D(c,i),f&&f.m(i,null),H(r,g,d),m&&m.m(r,d),H(r,s,d),k=!0},p(r,d){r[2].length>0?f?(f.p(r,d),d[0]&4&&W(f,1)):(f=Te(r),f.c(),W(f,1),f.m(i,null)):f&&(he(),G(f,1,1,()=>{f=null}),_e()),r[0]&&r[6]&&r[4].length>0&&r[3].length>0?m?(m.p(r,d),d[0]&89&&W(m,1)):(m=He(r),m.c(),W(m,1),m.m(s.parentNode,s)):m&&(he(),G(m,1,1,()=>{m=null}),_e())},i(r){k||(W(f),W(m),k=!0)},o(r){G(f),G(m),k=!1},d(r){r&&(_(e),_(g),_(s)),f&&f.d(),m&&m.d(r)}}}function Te(n){let e,t="Carrier",l,o,c,i=(n[9]||n[8])+"",g,s,k,f,m="Year",r,d,I,V,O,F,T,S=Ee(n[2]),h=[];for(let a=0;a<S.length;a+=1)h[a]=Ve(De(n,S,a));function P(a){n[23](a)}function q(a){n[24](a)}let L={enabled:!n[9]&&!n[8]};return n[12]!==void 0&&(L.options=n[12]),n[13]!==void 0&&(L.selected_option=n[13]),d=new Ke({props:L}),U.push(()=>$(d,"options",P)),U.push(()=>$(d,"selected_option",q)),d.$on("selection-changed",n[16]),{c(){e=C("h3"),e.textContent=t,l=R(),o=C("select");for(let a=0;a<h.length;a+=1)h[a].c();c=me(`
                                        disabled=`),g=me(i),k=R(),f=C("h3"),f.textContent=m,r=R(),se(d.$$.fragment),this.h()},l(a){e=w(a,"H3",{"data-svelte-h":!0}),Y(e)!=="svelte-xc22hm"&&(e.textContent=t),l=Z(a),o=w(a,"SELECT",{});var E=j(o);for(let M=0;M<h.length;M+=1)h[M].l(E);c=ve(E,`
                                        disabled=`),g=ve(E,i),E.forEach(_),k=Z(a),f=w(a,"H3",{"data-svelte-h":!0}),Y(f)!=="svelte-r9e7qt"&&(f.textContent=m),r=Z(a),ae(d.$$.fragment,a),this.h()},h(){o.disabled=s=n[9]||n[8],n[6]===void 0&&Ae(()=>n[22].call(o))},m(a,E){H(a,e,E),H(a,l,E),H(a,o,E);for(let M=0;M<h.length;M+=1)h[M]&&h[M].m(o,null);D(o,c),D(o,g),we(o,n[6],!0),H(a,k,E),H(a,f,E),H(a,r,E),ie(d,a,E),O=!0,F||(T=[ke(o,"change",n[22]),ke(o,"change",n[16])],F=!0)},p(a,E){if(E[0]&4){S=Ee(a[2]);let p;for(p=0;p<S.length;p+=1){const A=De(a,S,p);h[p]?h[p].p(A,E):(h[p]=Ve(A),h[p].c(),h[p].m(o,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=S.length}(!O||E[0]&768)&&i!==(i=(a[9]||a[8])+"")&&Se(g,i),(!O||E[0]&768&&s!==(s=a[9]||a[8]))&&(o.disabled=s),E[0]&68&&we(o,a[6]);const M={};E[0]&768&&(M.enabled=!a[9]&&!a[8]),!I&&E[0]&4096&&(I=!0,M.options=a[12],X(()=>I=!1)),!V&&E[0]&8192&&(V=!0,M.selected_option=a[13],X(()=>V=!1)),d.$set(M)},i(a){O||(W(d.$$.fragment,a),O=!0)},o(a){G(d.$$.fragment,a),O=!1},d(a){a&&(_(e),_(l),_(o),_(k),_(f),_(r)),Ne(h,a),re(d,a),F=!1,ze(T)}}}function Ve(n){let e,t=n[39]+"",l,o;return{c(){e=C("option"),l=me(t),this.h()},l(c){e=w(c,"OPTION",{});var i=j(e);l=ve(i,t),i.forEach(_),this.h()},h(){e.__value=o=n[39],ye(e,e.__value)},m(c,i){H(c,e,i),D(e,l)},p(c,i){i[0]&4&&t!==(t=c[39]+"")&&Se(l,t),i[0]&4&&o!==(o=c[39])&&(e.__value=o,ye(e,e.__value))},d(c){c&&_(e)}}}function He(n){let e,t,l='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Data Selection</button>',o,c,i,g,s,k,f="Technology Subdivision",m,r,d,I,V,O="Node",F,T,S,h,P;function q(p){n[25](p)}let L={};n[11]!==void 0&&(L.value=n[11]),r=new Ze({props:L}),U.push(()=>$(r,"value",q)),r.$on("change",n[17]);function a(p){n[26](p)}function E(p){n[27](p)}let M={};return n[7]!==void 0&&(M.selected_elements=n[7]),n[3]!==void 0&&(M.elements=n[3]),T=new Ye({props:M}),U.push(()=>$(T,"selected_elements",a)),U.push(()=>$(T,"elements",E)),T.$on("selection-changed",n[17]),{c(){e=C("div"),t=C("h2"),t.innerHTML=l,o=R(),c=C("div"),i=C("div"),g=C("div"),s=R(),k=C("h3"),k.textContent=f,m=R(),se(r.$$.fragment),I=R(),V=C("h3"),V.textContent=O,F=R(),se(T.$$.fragment),this.h()},l(p){e=w(p,"DIV",{class:!0});var A=j(e);t=w(A,"H2",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1btd1mx"&&(t.innerHTML=l),o=Z(A),c=w(A,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var y=j(c);i=w(y,"DIV",{class:!0});var B=j(i);g=w(B,"DIV",{class:!0}),j(g).forEach(_),s=Z(B),k=w(B,"H3",{"data-svelte-h":!0}),Y(k)!=="svelte-q2zoen"&&(k.textContent=f),m=Z(B),ae(r.$$.fragment,B),I=Z(B),V=w(B,"H3",{"data-svelte-h":!0}),Y(V)!=="svelte-ocjo5w"&&(V.textContent=O),F=Z(B),ae(T.$$.fragment,B),B.forEach(_),y.forEach(_),A.forEach(_),this.h()},h(){v(t,"class","accordion-header"),v(g,"class","row"),v(i,"class","accordion-body"),v(c,"id","collapseThree"),v(c,"class","accordion-collapse collapse"),v(c,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item")},m(p,A){H(p,e,A),D(e,t),D(e,o),D(e,c),D(c,i),D(i,g),D(i,s),D(i,k),D(i,m),ie(r,i,null),D(i,I),D(i,V),D(i,F),ie(T,i,null),P=!0},p(p,A){const y={};!d&&A[0]&2048&&(d=!0,y.value=p[11],X(()=>d=!1)),r.$set(y);const B={};!S&&A[0]&128&&(S=!0,B.selected_elements=p[7],X(()=>S=!1)),!h&&A[0]&8&&(h=!0,B.elements=p[3],X(()=>h=!1)),T.$set(B)},i(p){P||(W(r.$$.fragment,p),W(T.$$.fragment,p),P=!0)},o(p){G(r.$$.fragment,p),G(T.$$.fragment,p),P=!1},d(p){p&&_(e),re(r),re(T)}}}function Ge(n){let e,t,l,o;function c(s){n[28](s)}function i(s){n[29](s)}let g={zoom:!0};return n[14]!==void 0&&(g.config=n[14]),n[10]!==void 0&&(g.plot_name=n[10]),e=new Fe({props:g}),U.push(()=>$(e,"config",c)),U.push(()=>$(e,"plot_name",i)),{c(){se(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,k){ie(e,s,k),o=!0},p(s,k){const f={};!t&&k[0]&16384&&(t=!0,f.config=s[14],X(()=>t=!1)),!l&&k[0]&1024&&(l=!0,f.plot_name=s[10],X(()=>l=!1)),e.$set(f)},i(s){o||(W(e.$$.fragment,s),o=!0)},o(s){G(e.$$.fragment,s),o=!1},d(s){re(e,s)}}}function Je(n){let e,t="No data with this selection.";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Qe(n){let e,t="No locations with this selection.";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-tr8mx7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Ue(n){let e,t="No data with this selection.";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function Xe(n){let e,t="No solution selected.";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-17x0k81"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function $e(n){let e,t="No carriers with this selection.";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1wht3n0"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function xe(n){let e,t="No technologies with this selection.";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1ontq7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function et(n){let e,t='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=C("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-57s7b4"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-center")},m(l,o){H(l,e,o)},p:N,i:N,o:N,d(l){l&&_(e)}}}function tt(n){let e,t='<div class="col"><h2>The Energy Balance Storage</h2></div>',l,o,c,i,g,s,k,f='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',m,r,d,I,V,O,F,T,S,h,P,q,L,a;function E(u){n[18](u)}function M(u){n[19](u)}function p(u){n[20](u)}let A={enabled:!n[9]&&!n[8]};n[5]!==void 0&&(A.selected_solution=n[5]),n[8]!==void 0&&(A.loading=n[8]),n[12]!==void 0&&(A.years=n[12]),I=new je({props:A}),U.push(()=>$(I,"selected_solution",E)),U.push(()=>$(I,"loading",M)),U.push(()=>$(I,"years",p)),I.$on("solution_selected",n[21]);let y=!n[8]&&n[5]&&Ie(n);const B=[et,xe,$e,Xe,Ue,Qe,Je,Ge],J=[];function ce(u,z){return u[8]||u[9]?0:u[4].length==0?1:u[2].length==0?2:u[5]==null?3:u[1]==null?4:u[3].length==0?5:u[1].length==0?6:7}return q=ce(n),L=J[q]=B[q](n),{c(){e=C("div"),e.innerHTML=t,l=R(),o=C("div"),c=C("div"),i=C("div"),g=C("div"),s=C("div"),k=C("h2"),k.innerHTML=f,m=R(),r=C("div"),d=C("div"),se(I.$$.fragment),T=R(),y&&y.c(),S=R(),h=C("div"),P=C("div"),L.c(),this.h()},l(u){e=w(u,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-wp6wh4"&&(e.innerHTML=t),l=Z(u),o=w(u,"DIV",{class:!0,style:!0});var z=j(o);c=w(z,"DIV",{class:!0});var Q=j(c);i=w(Q,"DIV",{class:!0,style:!0});var x=j(i);g=w(x,"DIV",{class:!0,id:!0});var ee=j(g);s=w(ee,"DIV",{class:!0});var te=j(s);k=w(te,"H2",{class:!0,"data-svelte-h":!0}),Y(k)!=="svelte-1oln34a"&&(k.innerHTML=f),m=Z(te),r=w(te,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var ue=j(r);d=w(ue,"DIV",{class:!0});var de=j(d);ae(I.$$.fragment,de),de.forEach(_),ue.forEach(_),te.forEach(_),T=Z(ee),y&&y.l(ee),ee.forEach(_),x.forEach(_),Q.forEach(_),z.forEach(_),S=Z(u),h=w(u,"DIV",{class:!0,style:!0});var fe=j(h);P=w(fe,"DIV",{class:!0});var b=j(P);L.l(b),b.forEach(_),fe.forEach(_),this.h()},h(){v(e,"class","row"),v(k,"class","accordion-header"),v(d,"class","accordion-body"),v(r,"id","collapseOne"),v(r,"class","accordion-collapse collapse show"),v(r,"data-bs-parent","#accordionExample"),v(s,"class","accordion-item solution-selection"),v(g,"class","accordion"),v(g,"id","accordionExample"),v(i,"class","filters"),oe(i,"position","absolute"),oe(i,"width","100%"),v(c,"class","col position-relative"),v(o,"class","row"),oe(o,"z-index","1"),oe(o,"position","relative"),v(P,"class","row"),v(h,"class","col"),oe(h,"margin-top","400px")},m(u,z){H(u,e,z),H(u,l,z),H(u,o,z),D(o,c),D(c,i),D(i,g),D(g,s),D(s,k),D(s,m),D(s,r),D(r,d),ie(I,d,null),D(g,T),y&&y.m(g,null),H(u,S,z),H(u,h,z),D(h,P),J[q].m(P,null),a=!0},p(u,z){const Q={};z[0]&768&&(Q.enabled=!u[9]&&!u[8]),!V&&z[0]&32&&(V=!0,Q.selected_solution=u[5],X(()=>V=!1)),!O&&z[0]&256&&(O=!0,Q.loading=u[8],X(()=>O=!1)),!F&&z[0]&4096&&(F=!0,Q.years=u[12],X(()=>F=!1)),I.$set(Q),!u[8]&&u[5]?y?(y.p(u,z),z[0]&288&&W(y,1)):(y=Ie(u),y.c(),W(y,1),y.m(g,null)):y&&(he(),G(y,1,1,()=>{y=null}),_e());let x=q;q=ce(u),q===x?J[q].p(u,z):(he(),G(J[x],1,1,()=>{J[x]=null}),_e(),L=J[q],L?L.p(u,z):(L=J[q]=B[q](u),L.c()),W(L,1),L.m(P,null))},i(u){a||(W(I.$$.fragment,u),W(y),W(L),a=!0)},o(u){G(I.$$.fragment,u),G(y),G(L),a=!1},d(u){u&&(_(e),_(l),_(o),_(S),_(h)),re(I),y&&y.d(),J[q].d()}}}let ge="storage_level";function lt(n,e,t){let l=null,o=null,c=[],i=[],g=[],s=null,k=null,f=null,m="technology",r=[],d=[],I=!1,V=!1,O="",F=!0,T=[],S=0,h={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};function P(){t(7,d=i),r=g,m="node"}async function q(){if(t(0,l=null),s===null)return;console.log("SELECTED YEAR"),console.log(S),console.log("WAT");let b=Math.floor((S-s.detail.system.reference_year)/s.detail.system.interval_between_years),K=await We(s.solution_name,Re(ge),s.scenario_name,b);t(0,l=K.data),k=K.unit}async function L(){s!==null&&(console.log(T),t(9,V=!0),t(13,S=T[0]),await q(),p(),A(),E(),P(),y(),t(9,V=!1))}async function a(){t(9,V=!0),await q(),A(),E(),P(),y(),t(9,V=!1)}function E(){t(3,i=Array.from(new Set(l.data.map(b=>b.node)))),t(7,d=i)}function M(){try{return k.data[0][0]}catch{return""}}function p(){if(t(2,c=[]),!l)return;let b=Array.from(l.data.map(K=>K.technology));l.data.forEach(K=>{let le=K.technology,ne=s.detail.reference_carrier[le];!c.includes(ne)&&b.includes(K.technology)&&c.push(ne)}),c.length>0&&t(6,f=c[0])}function A(){let b=Array.from(new Set(l.data.map(K=>K.technology)));t(4,g=b.filter(K=>(s==null?void 0:s.detail.reference_carrier[K])==f)),r=g}function y(){if(m=="technology"?t(7,d=i):r=g,d.length==0||r.length==0||l===null){t(1,o=null);return}let b={},K={};if(b.technology=r,K.node=d,t(1,o=Pe(l.data,b,K,[],!1,"line")),!F){let ne={};for(const be in o[0].data)ne[be]=o.map(pe=>pe.data[be]).reduce((pe,Le)=>pe+Le,0);t(1,o=[{data:ne,label:"Storage level",type:"line",borderColor:"black"}])}t(14,h.data={datasets:o},h),t(14,h.options.scales.y.title.text=ge+" ["+M()+"]",h);let le=s.solution_name.split(".");t(10,O=[le[(le==null?void 0:le.length)-1],s==null?void 0:s.scenario_name,ge,f].join("_"))}function B(b){s=b,t(5,s)}function J(b){I=b,t(8,I)}function ce(b){T=b,t(12,T)}const u=()=>{L()};function z(){f=qe(this),t(6,f),t(2,c)}function Q(b){T=b,t(12,T)}function x(b){S=b,t(13,S)}function ee(b){F=b,t(11,F)}function te(b){d=b,t(7,d)}function ue(b){i=b,t(3,i)}function de(b){h=b,t(14,h)}function fe(b){O=b,t(10,O)}return[l,o,c,i,g,s,f,d,I,V,O,F,T,S,h,L,a,y,B,J,ce,u,z,Q,x,ee,te,ue,de,fe]}class dt extends Be{constructor(e){super(),Oe(this,e,lt,tt,Me,{},null,[-1,-1])}}export{dt as component};
