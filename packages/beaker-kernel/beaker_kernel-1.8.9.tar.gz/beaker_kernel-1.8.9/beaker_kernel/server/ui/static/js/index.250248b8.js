var beaker_vue;(function(){var e={2857:function(e,t,n){"use strict";n.r(t);var o=n(31601),a=n.n(o),r=n(76314),l=n.n(r),i=l()(a());i.push([e.id,"div.controls-container[data-v-77ca4bf4]{div.p-toolbar[data-v-77ca4bf4]{padding:.5rem;padding-left:.25rem}}button.pdf-ui-button[data-v-77ca4bf4]{padding:unset;margin:unset;margin-left:.25rem;margin-right:.25rem;height:2rem;min-width:2rem}button.pdf-ui-button.pdf-ui-close[data-v-77ca4bf4]{width:2rem}div.pdf-ui-inputselection[data-v-77ca4bf4]{padding:unset;margin:unset;margin-left:.25rem;margin-right:.25rem;height:2rem;div[data-v-77ca4bf4]{min-width:2rem;padding:0}input[data-v-77ca4bf4]{width:3rem}}",""]),t["default"]=i},64556:function(e,t,n){"use strict";n.r(t);var o=n(31601),a=n.n(o),r=n(76314),l=n.n(r),i=l()(a());i.push([e.id,".pdf-container[data-v-26753cf8]{overflow:auto}.pdf-canvas[data-v-26753cf8]{border:1px solid #ddd;width:auto;display:inline}",""]),t["default"]=i},71351:function(e,t,n){"use strict";n.r(t);var o=n(31601),a=n.n(o),r=n(76314),l=n.n(r),i=l()(a());i.push([e.id,".context-heading{color:var(--text-color-secondary);margin:1rem 1.25rem .25rem 1.25rem}.context-tree{margin-top:.5rem;flex:1;border:none;width:21rem;position:relative}.context-tree .p-tree{border:none}.context-tree .p-tree-wrapper{position:absolute;left:1rem;top:0;bottom:0;right:0}.context-tree .p-tree-wrapper .p-treenode .p-treenode-content{padding:0}.context-toggle-button{position:absolute;right:-.5rem;top:40%;background:var(--surface-a);border-color:var(--surface-300);color:var(--primary-300);z-index:2}.button-rotate{transform:rotate(180deg)}.loading-area{background:var(--surface-a);display:flex;flex-direction:column;align-items:center;justify-content:center;position:absolute;top:0;bottom:0;left:0;right:0}.hidden{visibility:hidden}",""]),t["default"]=i},67062:function(e,t,n){"use strict";n.r(t);var o=n(31601),a=n.n(o),r=n(76314),l=n.n(r),i=l()(a());i.push([e.id,".preview-container-pre{display:flex;flex-direction:row;min-height:100%}.preview-draggable{width:3px;min-height:100%;z-index:100;background-color:var(--surface-b)}.preview-draggable:hover{cursor:col-resize}.preview-container-main{display:flex;flex-direction:column;flex:1;overflow:hidden}.preview-container-main .pdf-preview .controls-container div.p-toolbar{border:none;border-radius:0;flex-wrap:nowrap}.preview-container-main .pdf-preview .controls-container div.p-toolbar .p-toolbar-group-start button.pdf-ui-close{margin-left:0}.preview-under-toolbar{display:flex;flex:1;overflow:auto}.preview-under-toolbar .preview-payload div.csv-preview div div.mime-select-container{display:none}div.preview-standard-toolbar div.p-toolbar{padding:.5rem;padding-left:.25rem;border:none;border-radius:0;flex-wrap:nowrap}div.preview-standard-toolbar div.p-toolbar .p-toolbar-group-start button.pdf-ui-close{margin-left:0}button.preview-close{width:2rem;height:2rem}button.preview-raw{height:2rem;padding-left:.5rem;padding-right:.5rem}button.preview-raw span.p-button-label{font-weight:400;text-wrap:nowrap}.preview-payload{flex:1;max-height:100%;max-width:100%}.pdf-preview{flex:1;max-height:100%;display:flex;flex-direction:column}",""]),t["default"]=i},86520:function(e,t,n){"use strict";n.r(t);var o=n(31601),a=n.n(o),r=n(76314),l=n.n(r),i=l()(a());i.push([e.id,".notebook-container{display:flex;height:100%;max-width:100%}.beaker-notebook{flex:2 0 calc(50vw - 2px);border:2px solid var(--surface-border);border-radius:0;border-top:0;max-width:100%}.spacer.left{flex:1 1000 25vw}.spacer.right{flex:1 1 25vw}.notebook-toolbar{border-style:inset;border-radius:0;border-top:unset;border-left:unset;border-right:unset}.title-extra{vertical-align:baseline;display:inline-block;height:100%;font-family:Ubuntu Mono,Courier New,Courier,monospace}",""]),t["default"]=i},98207:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{n(44114),n(14603),n(47566),n(98721);var a=n(56768),r=n(90144),l=n(85029),i=n(68718),u=n(50041),s=n(56559),c=n(46365),d=n(21972),p=n(42775),f=n(72854),v=n(70387),b=n(73845),m=n(98609),g=n(39219),h=n(72845),y=n(85579),w=n(24660),k=n(56280),x=n(10461),_=n(79926),C=n(53939),R=n(63376),A=e([c]);c=(A.then?(await A)():A)[0];const F={class:"notebook-container"},K={class:"welcome-placeholder"},P={key:0,class:"spacer right"};t.A=(0,a.pM)({__name:"NotebookInterface",props:["config","connectionSettings","sessionName","sessionId","defaultKernel","renderers"],setup(e){const t=(0,r.KR)(),n=(0,r.KR)(),o=(0,r.KR)(),A=(0,r.KR)(),E=(0,r.KR)(),L=(0,r.KR)(!1),M=new URLSearchParams(window.location.search),j=M.has("session")?M.get("session"):"notebook_dev_session",S=e,O=[...d.dn.map((e=>new l.hC(e))).map(c.ft),c.oH,c.En,c.To,c.nk,c.ek],T={code:x.A,markdown:_.A,query:C.A,raw:R.A},W=(0,r.KR)("connecting"),X=(0,r.KR)([]),N=(0,r.KR)([]),B=(0,r.KR)(),I=((0,r.KR)(),(0,r.KR)(null)),z=(0,r.KR)(null),Q=((0,r.KR)(!1),(0,r.KR)(!1)),{theme:V,toggleDarkMode:U}=((0,r.KR)(),(0,a.WQ)("theme")),$=(0,r.KR)(),D=((0,a.EW)((()=>(z.value,"Beaker Notebook"))),(0,a.EW)((()=>[{type:"link",href:`/chat${window.location.search}`,icon:"comment",label:"Navigate to chat view"},{type:"button",icon:"dark"===V.mode?"sun":"moon",command:U,label:`Switch to ${"dark"===V.mode?"light":"dark"} mode.`},{type:"link",href:"https://jataware.github.io/beaker-kernel",label:"Beaker Documentation",icon:"book",rel:"noopener",target:"_blank"},{type:"link",href:"https://github.com/jataware/beaker-kernel",label:"Check us out on Github",icon:"github",rel:"noopener",target:"_blank"}]))),q=(0,a.EW)((()=>n?.value?.beakerSession));(0,a.wB)((()=>t?.value?.notebook.cells),(e=>{0===e?.length&&t.value.insertCellBefore()}),{deep:!0});const Z=e=>{"preview"===e.header.msg_type?B.value=e.content:"debug_event"===e.header.msg_type&&X.value.push({type:e.content.event,body:e.content.body,timestamp:e.header.date})},G=(e,t)=>{N.value.push({type:t,body:e,timestamp:e.header.date})},H=e=>{console.log("Unhandled message recieved",e)},Y=e=>{W.value="idle"==e?"connected":e},J=async()=>{const e=q.value.session.sendBeakerMessage("reset_request",{});await e},ee=(e,n)=>{const o=t.value;q.value?.session.loadNotebook(e),z.value=n;const r=o.notebook.cells.map((e=>e.id));r.includes(o.selectedCellId)||(0,a.dY)((()=>{o.selectCell(r[0])}))},te=async e=>{z.value=e,e&&(E.value?.selectPanel("Files"),await o.value.refresh(),await o.value.flashFile(e))},ne=()=>{t.value?.selectPrevCell()},oe=()=>{t.value?.selectNextCell()},ae={},re={"keydown.enter.ctrl.prevent.capture.in-cell":()=>{t.value?.selectedCell().execute(),t.value?.selectedCell().exit()},"keydown.enter.shift.prevent.capture.in-cell":()=>{const e=t.value?.selectedCell();e.execute(),t.value?.selectNextCell()||(t.value?.insertCellAfter(e,void 0,!0),(0,a.dY)((()=>{t.value?.selectedCell().enter()})))},"keydown.enter.exact.prevent.stop.!in-editor":()=>{t.value?.selectedCell().enter()},"keydown.esc.exact.prevent":()=>{t.value?.selectedCell().exit()},"keydown.up.!in-editor.prevent":ne,"keydown.k.!in-editor":ne,"keydown.down.!in-editor.prevent":oe,"keydown.j.!in-editor":oe,"keydown.a.prevent.!in-editor":e=>{const n=t.value;n?.selectedCell().exit(),n?.insertCellBefore()},"keydown.b.prevent.!in-editor":()=>{const e=t.value;e?.selectedCell().exit(),e?.insertCellAfter()},"keydown.d.!in-editor":()=>{const e=t.value,n=e.selectedCell(),o=()=>{delete ae["d"]},a=ae["d"];if(void 0===a){const e=setTimeout(o,1e3);ae["d"]={cell_id:n.id,timeout:e}}else{const{cell_id:t,timeout:o}=ae["d"];t===n.id&&(e?.removeCell(n),I.value=n.cell,delete ae["d"]),o&&window.clearTimeout(o)}},"keydown.y.!in-editor":()=>{const e=t.value,n=e.selectedCell(),o=()=>{delete ae["y"]},a=ae["y"];if(void 0===a){const e=setTimeout(o,1e3);ae["y"]={cell_id:n.id,timeout:e}}else{const{cell_id:e,timeout:t}=ae["y"];e===n.id&&(I.value=n.cell,delete ae["y"]),t&&window.clearTimeout(t)}},"keydown.p.!in-editor":e=>{const n=t.value;let o=(0,r.ux)(I.value);if(null!==o){const t=n.notebook.cells.map((e=>e.id));if(t.includes(o.id)){const e=o.constructor,t={...o,id:void 0,executionCount:void 0,busy:void 0,last_execution:void 0};o=new e(t)}"p"===e.key?n?.insertCellAfter(n.selectedCell(),o):"P"===e.key&&n?.insertCellBefore(n.selectedCell(),o),o.value=null}}};return(e,l)=>{const c=(0,a.gN)("autoscroll"),d=(0,a.gN)("keybindings");return(0,a.uX)(),(0,a.Wv)(f.A,{title:"Beaker Notebook","title-extra":z.value,"header-nav":D.value,ref_key:"beakerInterfaceRef",ref:n,connectionSettings:S.config,sessionName:"notebook_interface",defaultKernel:"beaker_kernel",sessionId:(0,r.R1)(j),renderers:O,savefile:z.value,onIopubMsg:Z,onUnhandledMsg:H,onAnyMsg:G,onSessionStatusChanged:Y,onOpenFile:ee},{"left-panel":(0,a.k6)((()=>[(0,a.bF)(y.A,{ref_key:"sideMenuRef",ref:E,position:"left","show-label":!0,highlight:"line",expanded:!1,initialWidth:"25vi",maximized:Q.value},{default:(0,a.k6)((()=>[(0,a.bF)(w.A,{label:"Info",icon:"pi pi-home"},{default:(0,a.k6)((()=>[(0,a.bF)(b.A)])),_:1}),(0,a.bF)(w.A,{id:"files",label:"Files",icon:"pi pi-file-export","no-overflow":"",lazy:!0},{default:(0,a.k6)((()=>[(0,a.bF)(m.A,{ref_key:"filePanelRef",ref:o,onOpenFile:ee,onPreviewFile:l[1]||(l[1]=(e,t)=>{$.value={url:e,mimetype:t},L.value=!0})},null,512)])),_:1}),"server"!==S.config.config_type?((0,a.uX)(),(0,a.Wv)(w.A,{key:0,id:"config",label:"Config",icon:"pi pi-cog",lazy:!0},{default:(0,a.k6)((()=>[(0,a.bF)(g.Ay,{ref_key:"configPanelRef",ref:A,onRestartSession:J},null,512)])),_:1})):(0,a.Q3)("",!0)])),_:1},8,["maximized"])])),"right-panel":(0,a.k6)((()=>[])),default:(0,a.k6)((()=>[(0,a.Lk)("div",F,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(i.A,{ref_key:"beakerNotebookRef",ref:t,"cell-map":T},{default:(0,a.k6)((()=>[(0,a.bF)(u.A,{"default-severity":"",saveAvailable:!0,"save-as-filename":z.value,onNotebookSaved:te,onOpenFile:ee},{"end-extra":(0,a.k6)((()=>[(0,a.bF)((0,r.R1)(p.A),{onClick:l[0]||(l[0]=e=>{Q.value=!Q.value}),icon:"pi "+(Q.value?"pi-window-minimize":"pi-window-maximize"),size:"small",text:""},null,8,["icon"])])),_:1},8,["save-as-filename"]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(s.A,{"selected-cell":t.value?.selectedCellId},{"notebook-background":(0,a.k6)((()=>[(0,a.Lk)("div",K,[(0,a.bF)(h.A)])])),_:1},8,["selected-cell"])),[[c]]),(0,a.bF)(v.A,{class:"agent-query-container"})])),_:1})),[[d,re,void 0,{top:!0}]]),Q.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",P))]),(0,a.bF)(k.A,{url:$.value?.url,mimetype:$.value?.mimetype,modelValue:L.value,"onUpdate:modelValue":l[2]||(l[2]=e=>L.value=e)},null,8,["url","mimetype","modelValue"])])),_:1},8,["title-extra","header-nav","connectionSettings","sessionId","savefile"])}}}),o()}catch(F){o(F)}}))},17871:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{n.r(t);var a=n(45130),r=n(99119),l=n(18648),i=n(85413),u=n(26883),s=n(8271),c=n(31577),d=n(98124),p=n(419),f=n(89571),v=(n(96153),n(17198),n(47997)),b=e([f]);f=(b.then?(await b)():b)[0];const m=v.PageConfig.getBaseUrl();(async()=>{const e=v.URLExt.join(m,"/config"),t=await fetch(e),n=await t.json(),o=(0,a.Ef)(f.A,{config:n});o.use(r.Ay),o.use(u.A),o.use(i.A),o.use(p.Ay),o.directive("tooltip",l.A),o.directive("focustrap",s.A),o.directive("keybindings",c.c),o.directive("autoscroll",d.n),o.mount("#app")})(),o()}catch(m){o(m)}}))},73845:function(e,t,n){"use strict";n.d(t,{A:function(){return p}});n(44114);var o=n(56768),a=n(90144),r=n(24232),l=n(11723);const i={class:"info-panel-container"},u=(0,o.Lk)("div",{class:"loading-area"}," No Context Loaded. ",-1),s={style:{cursor:"help","border-bottom":"1px dotted var(--text-color-secondary)"}};var c=(0,o.pM)({__name:"InfoPanel",setup(e){(0,a.KR)(!0);const t=(0,a.KR)({0:!0,1:!0,2:!0,3:!0}),n=(0,o.WQ)("beakerSession"),c=(0,o.EW)((()=>{const e=n?.activeContext,t=n?.session.kernelInfo;return{...e,kernelInfo:t}})),d=(0,o.EW)((()=>{const e=c.value;if(!e)return[];const t=[{key:"0",label:"Kernel",icon:"pi pi-fw pi-cog",expanded:!0,children:[{key:"0-1",label:`${e?.info?.subkernel} (${e?.info?.language})`}]}];return t.push({key:"3",label:"Tools",icon:"pi pi-fw pi-wrench",expanded:!0,children:Object.keys(e?.info?.agent?.tools||{}).map(((t,n)=>({key:`3-${n}`,label:t.replace("PyPackageAgent.",""),data:e.info.agent.tools[t],type:"tool"})))}),t}));return(e,n)=>{const c=(0,o.gN)("tooltip");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)((0,a.R1)(l.A),{value:d.value,loading:!d.value,expandedKeys:t.value,"onUpdate:expandedKeys":n[1]||(n[1]=e=>t.value=e)},{loadingicon:(0,o.k6)((()=>[u])),action:(0,o.k6)((e=>[(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{onMousedown:n[0]||(n[0]=e=>{e.detail>1&&e.preventDefault()}),style:{cursor:"pointer","border-bottom":"1px dotted var(--text-color-secondary)"}},[(0,o.eW)((0,r.v_)(e.node.label),1)],32)),[[c,{value:`${e.node.data}`,pt:{text:{style:{width:"20rem"}},root:{style:{marginLeft:"1rem"}}}}]])])),tool:(0,o.k6)((e=>[(0,o.bo)(((0,o.uX)(),(0,o.CE)("span",s,[(0,o.eW)((0,r.v_)(e.node.label),1)])),[[c,{value:`${e.node.data}`,pt:{text:{style:{width:"20rem"}},root:{style:{marginLeft:"1rem"}}}}]])])),_:1},8,["value","loading","expandedKeys"])])}}});n(7837);const d=c;var p=d},56280:function(e,t,n){"use strict";n.d(t,{A:function(){return V}});n(44114),n(16573),n(78100),n(77936),n(37467),n(44732),n(79577);var o=n(56768),a=n(90144),r=n(24232),l=n(45130),i=n(77729),u=n(42775),s=n(52211),c=n(31254),d=n(23421);const p=e=>((0,o.Qi)("data-v-77ca4bf4"),e=e(),(0,o.jt)(),e),f=p((()=>(0,o.Lk)("i",{class:"pi pi-book"},null,-1))),v=p((()=>(0,o.Lk)("i",{class:"pi pi-search"},null,-1)));var b=(0,o.pM)({__name:"PDFControls",props:["page","scale","isLoading","sidebarCallback"],emits:["pdf-page-next","pdf-page-prev","pdf-zoom-in","pdf-zoom-out"],setup(e,{emit:t}){const n=e,r=t,l=(0,a.KR)(null),p=e=>`${Math.floor(100*e)}%`;return(t,b)=>((0,o.uX)(),(0,o.CE)("div",{ref_key:"controlsContainer",ref:l,class:"controls-container"},[(0,o.bF)((0,a.R1)(i.A),null,{start:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(u.A),{class:"pdf-ui-button pdf-ui-close",icon:"pi pi-times",onClick:e.sidebarCallback,severity:"danger"},null,8,["onClick"])])),center:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(u.A),{class:"pdf-ui-button",icon:"pi pi-chevron-left",onClick:b[0]||(b[0]=e=>r("pdf-page-prev")),disabled:e.isLoading},null,8,["disabled"]),(0,o.bF)((0,a.R1)(u.A),{class:"pdf-ui-button",icon:"pi pi-chevron-right",onClick:b[1]||(b[1]=e=>r("pdf-page-next")),disabled:e.isLoading},null,8,["disabled"]),(0,o.bF)((0,a.R1)(c.A),{class:"pdf-ui-inputselection"},{default:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(d.A),null,{default:(0,o.k6)((()=>[f])),_:1}),(0,o.bF)((0,a.R1)(s.A),{placeholder:"Page",value:n?.page},null,8,["value"])])),_:1})])),end:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(u.A),{class:"pdf-ui-button",icon:"pi pi-search-minus",onClick:b[2]||(b[2]=e=>r("pdf-zoom-out"))}),(0,o.bF)((0,a.R1)(u.A),{class:"pdf-ui-button",icon:"pi pi-search-plus",onClick:b[3]||(b[3]=e=>r("pdf-zoom-in"))}),(0,o.bF)((0,a.R1)(c.A),{class:"pdf-ui-inputselection"},{default:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(d.A),null,{default:(0,o.k6)((()=>[v])),_:1}),(0,o.bF)((0,a.R1)(s.A),{placeholder:"Zoom",value:p(n?.scale)},null,8,["value"])])),_:1})])),_:1})],512))}}),m=(n(36684),n(71241));const g=(0,m.A)(b,[["__scopeId","data-v-77ca4bf4"]]);var h=g,y=(n(14603),n(47566),n(98721),n(81747)),w={__name:"PDFPage",props:["sidebarCallback","url","scale","page"],setup(e,{expose:t}){const r=async function(){const e=await Promise.resolve().then(n.bind(n,81747));e.GlobalWorkerOptions.workerSrc=new URL(n(10259),n.b).toString()},l=e,i=(0,a.KR)(null),u=(0,a.KR)(null);let s=null;const c=(0,a.KR)(!1),d=(0,a.KR)(null);let p=null;const f=async e=>{if(!s)return;c.value=!0;const t=await s.getPage(e),n=t.getViewport({scale:l.scale});if(!u.value)return;const o=u.value.getContext("2d");u.value.width=n.width,u.value.height=n.height;const a={canvasContext:o,viewport:n};p=t.render(a),await p.promise,c.value=!1},v=async()=>{if("object"===typeof l.url&&l.url instanceof File){const e=new FileReader;e.readAsArrayBuffer(l.url),e.onload=async e=>{s=await(0,y.getDocument)({data:e.target.result}).promise,d.value=s?._pdfInfo?.numPages,f(l.page)}}else"string"===typeof l.url&&(s=await(0,y.getDocument)(l.url).promise,d.value=s?._pdfInfo?.numPages,f(l.page))};return t({pages:d,isLoading:c,renderTask:p}),(0,o.sV)((async()=>{await r(),await v()})),(0,o.wB)((()=>[l.url]),v),(0,o.wB)((()=>[l.scale,l.page]),(()=>f(l.page))),(e,t)=>((0,o.uX)(),(0,o.CE)("div",{ref_key:"pdfContainer",ref:i,class:"pdf-container"},[(0,o.Lk)("canvas",{ref_key:"canvas",ref:u,class:"pdf-canvas"},null,512)],512))}};n(88433);const k=(0,m.A)(w,[["__scopeId","data-v-26753cf8"]]);var x=k;const _=4;var C=(0,o.pM)({__name:"PDFPreview",props:{url:{},sidebarCallback:{type:Function}},setup(e,{expose:t}){const n=[.25,.5,.75,.9,1,1.1,1.25,1.5,2,3,4],r=(e,t,n)=>e<=t?t:e>=n?n:e,l=e,i=(0,a.KR)(1),u=(0,a.KR)(null),s=(0,a.KR)(_);return t({pdf:u}),(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(h,{onPdfPageNext:t[0]||(t[0]=()=>{i.value=r(i.value+1,1,u.value?.pages??1)}),onPdfPagePrev:t[1]||(t[1]=()=>{i.value=r(i.value-1,1,u.value?.pages??1)}),onPdfZoomIn:t[2]||(t[2]=()=>{s.value=r(s.value+1,0,n.length-1)}),onPdfZoomOut:t[3]||(t[3]=()=>{s.value=r(s.value-1,0,n.length-1)}),page:i.value,scale:n[s.value],sidebarCallback:e.sidebarCallback},null,8,["page","scale","sidebarCallback"]),(0,o.bF)(x,{ref_key:"pdf",ref:u,url:l.url,scale:n[s.value],page:i.value},null,8,["url","scale","page"])],64))}});const R=C;var A=R,F=n(8522),K=n(11289),P=n(72464);const E={class:"preview-container-pre"},L={key:0,class:"preview-standard-toolbar"},M={class:"preview-under-toolbar"},j={key:0},S={key:1,class:"preview-payload"},O={key:0,class:"pdf-preview"},T={key:1,class:"text-preview"},W={key:2,class:"image-preview"},X=["src"],N={key:3,class:"csv-preview"},B=500,I=260;var z=(0,o.pM)({__name:"PreviewPanel",props:(0,o.zz)(["url","mimetype"],{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=(0,a.KR)(),n=(0,a.KR)(),s=(0,a.KR)(),c=(0,a.KR)(""),d=(0,a.KR)(!1),p=()=>{const e=e=>{const t=window.innerWidth-(e.x-h.value/2);y.value=Math.min(Math.max(t,I),.9*window.innerWidth)},t=()=>{document.querySelector("body").removeEventListener("mousemove",e),document.querySelector("body").removeEventListener("mouseup",this)};document.querySelector("body").addEventListener("mousemove",e),document.querySelector("body").addEventListener("mouseup",t)},f=e=>e.startsWith("image/")?"image":"application/pdf"===e?"pdf":"text/csv"===e?"csv":"text/tsv"===e?"tsv":"application/vnd.ms-excel"===e||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e?"excel":"plaintext",v={"application/pdf":{overridesToolbar:!0,skipContents:!0},"image/png":{skipContents:!0},"text/csv":{hasRawToggle:!0},"text/tsv":{hasRawToggle:!0}},b=(0,a.KR)({isLoading:!1,contentLength:-1}),m=(0,a.KR)(!1),g=new TextDecoder,h=(0,a.KR)(5),y=(0,a.KR)(614+h.value),w=e,k=(0,o.fn)(e,"modelValue"),x=(0,o.EW)((()=>w.mimetype??c.value??"")),_=(0,a.KR)();let C=(0,o.EW)((()=>{const e=b.value?.contents,t=f(x.value);return"image"===t||"pdf"===t?"<loaded elsewhere via url>":e?0===e.length?"<file is 0 bytes>":"excel"===t?e:g.decode(e):""}));(0,o.wB)((()=>[C.value]),((e,t)=>{n.value&&(n.value.model=e[0])}));const R=(0,o.EW)((()=>{const e=w.url?.split("/");return e.length>0?e[e.length-1]:""})),z=async e=>{const t=await fetch(e,{method:"HEAD"});return["Content-Type","Content-Length"].map((e=>t.headers.get(e)))},Q=async e=>{_.value=new AbortController;const t=await fetch(e,{signal:_.value.signal});let n=[];for await(const a of t.body)n.push(a);if(0===n.length)return[];const o=new Uint8Array(n.map((e=>e.length)).reduce(((e,t)=>e+t)));return n.reduce(((e,t)=>(o.set(t,e),e+t.length)),0),o};return(0,o.wB)((()=>[w.url,w.mimetype]),(async(e,t)=>{t.length>=2&&"application/pdf"===t[1]&&console.log("interrupted pdf rendering for another preview"),b.value={isLoading:!0,contentLength:0};const n=setTimeout((()=>{m.value=!0}),B),[o,a]=await z(w.url);void 0===w.mimetype||null==w.mimetype?c.value=o:c.value=void 0,b.value.contentLength=parseInt(a,10),(v[w.mimetype]??{})?.skipContents||(b.value.contents=await Q(w.url)),b.value.isLoading=!1,m.value=!1,clearTimeout(n)})),(c,g)=>((0,o.uX)(),(0,o.Wv)((0,a.R1)(F.A),{visible:k.value,"onUpdate:visible":g[3]||(g[3]=e=>k.value=e),position:"right",style:(0,r.Tr)(`width: ${y.value}px; overflow:auto;`),modal:!1,dismissable:!1,ref_key:"sidebar",ref:t},{container:(0,o.k6)((({closeCallback:t})=>[(0,o.Lk)("div",E,[(0,o.Lk)("div",{class:"preview-draggable",style:(0,r.Tr)(`width: ${h.value}px;`),onMousedown:g[0]||(g[0]=(0,l.D$)((e=>p()),["left","prevent"]))},null,36),(0,o.Lk)("div",{class:"preview-container-main",style:(0,r.Tr)(`max-width: calc(100% - ${h.value}px);`)},[v[x.value]?.overridesToolbar?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",L,[(0,o.bF)((0,a.R1)(i.A),null,{start:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(u.A),{class:"preview-close",icon:"pi pi-times",onClick:t,severity:"danger"},null,8,["onClick"])])),center:(0,o.k6)((()=>[(0,o.Lk)("span",null,(0,r.v_)(R.value),1)])),end:(0,o.k6)((()=>[v[x.value]?.hasRawToggle?((0,o.uX)(),(0,o.Wv)((0,a.R1)(u.A),{key:0,class:"preview-raw",onClick:g[1]||(g[1]=e=>d.value=!d.value),label:d.value?"Rich View":"Raw View"},null,8,["label"])):(0,o.Q3)("",!0)])),_:2},1024)])),(0,o.Lk)("div",M,[m.value&&b.value.isLoading?((0,o.uX)(),(0,o.CE)("div",j,[(0,o.bF)((0,a.R1)(u.A),{class:"preview-cancel",onClick:g[2]||(g[2]=e=>_.value.abort()),severity:"danger",label:"Cancel Preview"}),(0,o.Lk)("span",null,"File is "+(0,r.v_)(b.value.contentLength/1e6)+" MB",1)])):(0,o.Q3)("",!0),b.value.isLoading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",S,["pdf"===f(x.value)?((0,o.uX)(),(0,o.CE)("div",O,[(0,o.bF)(A,{ref_key:"pdfPreviewRef",ref:s,url:e.url,sidebarCallback:t},null,8,["url","sidebarCallback"])])):(0,o.Q3)("",!0),"plaintext"===f(x.value)?((0,o.uX)(),(0,o.CE)("div",T,[(0,o.bF)(K.A,{"display-mode":"dark",modelValue:(0,a.R1)(C),ref_key:"codeEditorRef",ref:n,placeholder:"Loading...",language:"text/x-python"===x.value?"python":void 0},null,8,["modelValue","language"])])):(0,o.Q3)("",!0),"image"===f(x.value)?((0,o.uX)(),(0,o.CE)("div",W,[(0,o.Lk)("img",{src:e.url},null,8,X)])):(0,o.Q3)("",!0),["csv","tsv","excel"].includes(f(x.value))?((0,o.uX)(),(0,o.CE)("div",N,[d.value||b.value.isLoading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(P.A,{key:0,mimeBundle:{[x.value]:(0,a.R1)(C)}},null,8,["mimeBundle"])),d.value?((0,o.uX)(),(0,o.Wv)(K.A,{key:1,"display-mode":"dark",modelValue:(0,a.R1)(C),ref_key:"codeEditorRef",ref:n,placeholder:"Loading..."},null,8,["modelValue"])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]))])],4)])])),_:1},8,["visible","style"]))}});n(64896);const Q=z;var V=Q},89571:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{var a=n(27850),r=(n(94383),e([a]));a=(r.then?(await r)():r)[0];const l=a.A;t.A=l,o()}catch(l){o(l)}}))},27850:function(e,t,n){"use strict";n.a(e,(async function(e,o){try{n.d(t,{A:function(){return a.A}});var a=n(98207),r=e([a]);a=(r.then?(await r)():r)[0],o()}catch(l){o(l)}}))},94383:function(e,t,n){"use strict";n(13938)},36684:function(e,t,n){var o=n(2857);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var a=n(68459).A;a("e976810e",o,!0,{sourceMap:!1,shadowMode:!1})},88433:function(e,t,n){var o=n(64556);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var a=n(68459).A;a("0bc67f21",o,!0,{sourceMap:!1,shadowMode:!1})},7837:function(e,t,n){var o=n(71351);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var a=n(68459).A;a("95e63384",o,!0,{sourceMap:!1,shadowMode:!1})},64896:function(e,t,n){var o=n(67062);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var a=n(68459).A;a("1af7f9b5",o,!0,{sourceMap:!1,shadowMode:!1})},13938:function(e,t,n){var o=n(86520);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var a=n(68459).A;a("35e7a6a5",o,!0,{sourceMap:!1,shadowMode:!1})}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={id:o,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=function(e){e&&e.d<1&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},r=function(n){return n.map((function(n){if(null!==n&&"object"===typeof n){if(n[e])return n;if(n.then){var r=[];r.d=0,n.then((function(e){l[t]=e,a(r)}),(function(e){l[o]=e,a(r)}));var l={};return l[e]=function(e){e(r)},l}}var i={};return i[e]=function(){},i[t]=n,i}))};n.a=function(n,l,i){var u;i&&((u=[]).d=-1);var s,c,d,p=new Set,f=n.exports,v=new Promise((function(e,t){d=t,c=e}));v[t]=f,v[e]=function(e){u&&e(u),p.forEach(e),v["catch"]((function(){}))},n.exports=v,l((function(n){var a;s=r(n);var l=function(){return s.map((function(e){if(e[o])throw e[o];return e[t]}))},i=new Promise((function(t){a=function(){t(l)},a.r=0;var n=function(e){e!==u&&!p.has(e)&&(p.add(e),e&&!e.d&&(a.r++,e.push(a)))};s.map((function(t){t[e](n)}))}));return a.r?i:l()}),(function(e){e?d(v[o]=e):c(f),a(u)})),u&&u.d<0&&(u.d=0)}}(),function(){var e=[];n.O=function(t,o,a,r){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],r=e[c][2];for(var i=!0,u=0;u<o.length;u++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[u])}))?o.splice(u--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var s=a();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var r=Object.create(null);n.r(r);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&o;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){l[e]=function(){return o[e]}}));return l["default"]=function(){return o},n.d(r,l),r}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"static/js/"+e+"."+{100:"337eb321",113:"ff64ad07",119:"b16312bf",252:"1022d549",262:"fecbdd6a",408:"af9c3863",422:"c1865ea8",538:"e017895b",569:"21f38e30",577:"155616f4",661:"fb3a0995",725:"e8c956c8",727:"583bcbb5",809:"755815b7",824:"5aa41816",859:"a555ca99"}[e]+".js"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="beaker_vue:";n.l=function(o,a,r,l){if(e[o])e[o].push(a);else{var i,u;if(void 0!==r)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+r){i=d;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=o),e[o]=[a];var p=function(t,n){i.onerror=i.onload=null,clearTimeout(f);var a=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),u&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.j=57}(),function(){n.p="/"}(),function(){n.b=document.baseURI||self.location.href;var e={57:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=r);var l=n.p+n.u(t),i=new Error,u=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+l+")",i.name="ChunkLoadError",i.type=r,i.request=l,a[1](i)}};n.l(l,u,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,l=o[0],i=o[1],u=o[2],s=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(u)var c=u(n)}for(t&&t(o);s<l.length;s++)r=l[s],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunkbeaker_vue"]=self["webpackChunkbeaker_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504,996],(function(){return n(17871)}));o=n.O(o),beaker_vue=o})();
//# sourceMappingURL=index.250248b8.js.map