<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="author" title="About these documents" href="../../../../about/" /><link rel="index" title="Index" href="../../../../genindex/" /><link rel="search" title="Search" href="../../../../search/" />

    <link rel="shortcut icon" href="../../../../_static/betty.ico"/><!-- Generated with Sphinx 7.4.7 and Furo 2024.05.06 -->
        <title>betty.serde.load - Betty documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../"><div class="brand">Betty  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../../_static/betty-32x32.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Betty  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../installation/">Installation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Installation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation/desktop/">Installation of the Betty Desktop application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation/pip/">Installation via <code class="docutils literal notranslate"><span class="pre">pip</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation/source/">Installation from source</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../usage/">Usage</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Usage</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../usage/ancestry/">Ancestry</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Ancestry</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/citation/">Citation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/date/">Dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/enclosure/">Enclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/event/">Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/event-type/">Event Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/file/">File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/link/">Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/media-type/">Media Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/note/">Note</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/person/">Person</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/person-name/">Person Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/place/">Place</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/place-name/">Place Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/presence/">Presence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/presence-role/">Presence Role</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/privacy/">Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/ancestry/source/">Source</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../usage/assets/">Asset Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../usage/cli/">The command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../usage/configuration/">Application configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../usage/env/">Environment variables</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../usage/extension/">Extensions</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/cotton_candy/">The <em>Cotton Candy</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/deriver/">The <em>Deriver</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/gramps/">The <em>Gramps</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/http_api_doc/">The <em>HTTP API Documentation</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/maps/">The <em>Maps</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/nginx/">The <em>nginx</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/privatizer/">The <em>Privatizer</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/trees/">The <em>Trees</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/extension/wikipedia/">The <em>Wikipedia</em> extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../usage/gedcom/">GEDCOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../usage/npm/">npm</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../usage/project/">Projects</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Projects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/project/configuration/">Project configuration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../usage/templating/">Templating</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Templating</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/templating/filters/">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/templating/globals/">Globals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../usage/templating/tests/">Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../usage/translation/">Translations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../development/">Development</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Development</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../development/extension/">Developing a Betty extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development/translation/">Working on Betty’s translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development/test/">Testing Betty’s source code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../py-modindex/">API Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../about/">About</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of About</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../about/contributing/">Contributing to Betty</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about/license/">Copyright &amp; license</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for betty.serde.load</h1><div class="highlight"><pre>
<span></span>&quot;&quot;&quot;
Provide a deserialization API.
&quot;&quot;&quot;

from __future__ import annotations

from pathlib import Path
from typing import (
    Iterator,
    Callable,
    Any,
    Generic,
    TYPE_CHECKING,
    TypeVar,
    MutableSequence,
    MutableMapping,
    overload,
    cast,
    TypeAlias,
)

from betty.functools import _Result
from betty.locale import LocaleNotFoundError, get_data, Str
from betty.model import (
    Entity,
    get_entity_type,
    EntityTypeImportError,
    EntityTypeInvalidError,
    EntityTypeError,
)
from betty.serde.dump import DumpType, DumpTypeT, Void
from betty.serde.error import SerdeError, SerdeErrorCollection
from betty.warnings import deprecated

if TYPE_CHECKING:
    from betty.app.extension import Extension


_AssertionValueT = TypeVar(&quot;_AssertionValueT&quot;)
_AssertionReturnT = TypeVar(&quot;_AssertionReturnT&quot;)
_AssertionReturnU = TypeVar(&quot;_AssertionReturnU&quot;)

Assertion: TypeAlias = Callable[
    [
        _AssertionValueT,
    ],
    _AssertionReturnT,
]


Number: TypeAlias = int | float


<div class="viewcode-block" id="LoadError">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.LoadError">[docs]</a>
class LoadError(SerdeError):
    &quot;&quot;&quot;
    Raised for any error while deserializing data.
    &quot;&quot;&quot;

    pass  # pragma: no cover</div>



<div class="viewcode-block" id="AssertionFailed">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.AssertionFailed">[docs]</a>
class AssertionFailed(LoadError):
    &quot;&quot;&quot;
    Raised when an assertion failed while deserializing data.
    &quot;&quot;&quot;

    pass  # pragma: no cover</div>



<div class="viewcode-block" id="FormatError">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.FormatError">[docs]</a>
class FormatError(LoadError):
    &quot;&quot;&quot;
    Raised when data that is being deserialized is provided in an unknown (undeserializable) format.
    &quot;&quot;&quot;

    pass  # pragma: no cover</div>



_AssertionsExtendReturnT = TypeVar(&quot;_AssertionsExtendReturnT&quot;)
_AssertionsIntermediateValueReturnT = TypeVar(&quot;_AssertionsIntermediateValueReturnT&quot;)


<div class="viewcode-block" id="AssertionChain">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.AssertionChain">[docs]</a>
class AssertionChain(Generic[_AssertionValueT, _AssertionReturnT]):
    &quot;&quot;&quot;
    An assertion chain.

    Assertion chains let you chain/link/combine assertions into pipelines that take an input
    value and, if the assertions pass, return an output value. Each chain may be (re)used as many
    times as needed.

    Assertions chains are `monads &lt;https://en.wikipedia.org/wiki/Monad_(functional_programming)&gt;`_.
    While uncommon in Python, this allows us to create these chains in a type-safe way, and tools
    like mypy can confirm that all assertions in any given chain are compatible with each other.
    &quot;&quot;&quot;

<div class="viewcode-block" id="AssertionChain.__init__">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.AssertionChain.__init__">[docs]</a>
    def __init__(self, _assertion: Assertion[_AssertionValueT, _AssertionReturnT]):
        self._assertion = _assertion</div>


<div class="viewcode-block" id="AssertionChain.extend">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.AssertionChain.extend">[docs]</a>
    def extend(
        self, _assertion: Assertion[_AssertionReturnT, _AssertionsExtendReturnT]
    ) -&gt; AssertionChain[_AssertionValueT, _AssertionsExtendReturnT]:
        &quot;&quot;&quot;
        Extend the chain with the given assertion.
        &quot;&quot;&quot;
        return _AssertionChainExtension(_assertion, self)</div>


    def __or__(
        self, _assertion: Assertion[_AssertionReturnT, _AssertionsExtendReturnT]
    ) -&gt; AssertionChain[_AssertionValueT, _AssertionsExtendReturnT]:
        return self.extend(_assertion)

    def __call__(self, value: _AssertionValueT) -&gt; _Result[_AssertionReturnT]:
        &quot;&quot;&quot;
        Invoke the chain with a value.

        This method may be called more than once.
        &quot;&quot;&quot;
        return _Result(value).map(self._assertion)

    @property
    def assertion(self) -&gt; Assertion[_AssertionValueT, _AssertionReturnT]:
        &quot;&quot;&quot;
        The assertion for this chain.
        &quot;&quot;&quot;
        return lambda value: self(value).value</div>



class _AssertionChainExtension(
    AssertionChain[_AssertionValueT, _AssertionReturnT],
    Generic[_AssertionValueT, _AssertionReturnT],
):
    def __init__(
        self,
        assertion_extension: Assertion[
            _AssertionsIntermediateValueReturnT, _AssertionReturnT
        ],
        assertion_chain: AssertionChain[
            _AssertionValueT, _AssertionsIntermediateValueReturnT
        ],
    ):
        super().__init__(
            lambda value: assertion_chain(value).map(assertion_extension).value
        )


<div class="viewcode-block" id="Assertions">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Assertions">[docs]</a>
@deprecated(
    &quot;This class is deprecated as of Betty 0.3.8, and will be removed in Betty 0.4.x. Instead, use :py:class:`betty.serde.load.AssertionChain`.&quot;
)
class Assertions(  # noqa: D101
    AssertionChain[_AssertionValueT, _AssertionReturnT],
    Generic[_AssertionValueT, _AssertionReturnT],
):
    pass</div>



AssertionType: TypeAlias = (
    AssertionChain[_AssertionValueT, _AssertionReturnT]
    | Assertion[_AssertionValueT, _AssertionReturnT]
)


class _Field(Generic[_AssertionValueT, _AssertionReturnT]):
    @overload
    def __init__(
        self,
        name: str,
        assertion: AssertionChain[_AssertionValueT, _AssertionReturnT] | None = None,
    ):
        pass

    @overload
    def __init__(
        self,
        name: str,
        assertion: Assertion[_AssertionValueT, _AssertionReturnT] | None = None,
    ):
        pass

    def __init__(
        self,
        name: str,
        assertion: AssertionChain[_AssertionValueT, _AssertionReturnT]
        | Assertion[_AssertionValueT, _AssertionReturnT]
        | None = None,
    ):
        self._name = name
        self._assertion = (
            assertion
            if assertion is None or isinstance(assertion, AssertionChain)
            else AssertionChain(assertion)
        )

    @property
    def name(self) -&gt; str:
        return self._name

    @property
    def assertion(self) -&gt; AssertionChain[_AssertionValueT, _AssertionReturnT] | None:
        return self._assertion


<div class="viewcode-block" id="RequiredField">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.RequiredField">[docs]</a>
class RequiredField(
    Generic[_AssertionValueT, _AssertionReturnT],
    _Field[_AssertionValueT, _AssertionReturnT],
):
    &quot;&quot;&quot;
    A required key-value mapping field.
    &quot;&quot;&quot;

    pass  # pragma: no cover</div>



<div class="viewcode-block" id="OptionalField">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.OptionalField">[docs]</a>
class OptionalField(
    Generic[_AssertionValueT, _AssertionReturnT],
    _Field[_AssertionValueT, _AssertionReturnT],
):
    &quot;&quot;&quot;
    An optional key-value mapping field.
    &quot;&quot;&quot;

    pass  # pragma: no cover</div>



<div class="viewcode-block" id="Fields">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Fields">[docs]</a>
class Fields:
    &quot;&quot;&quot;
    A sequence of fields, used to assert key-value mappings.
    &quot;&quot;&quot;

<div class="viewcode-block" id="Fields.__init__">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Fields.__init__">[docs]</a>
    def __init__(self, *fields: _Field[Any, Any]):
        self._fields = fields</div>


    def __iter__(self) -&gt; Iterator[_Field[Any, Any]]:
        return (field for field in self._fields)</div>



_AssertionBuilderFunction = Callable[[_AssertionValueT], _AssertionReturnT]
_AssertionBuilderMethod = Callable[[object, _AssertionValueT], _AssertionReturnT]
_AssertionBuilder = &quot;_AssertionBuilderFunction[ValueT, ReturnT] | _AssertionBuilderMethod[ValueT, ReturnT]&quot;


<div class="viewcode-block" id="Asserter">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter">[docs]</a>
class Asserter:
    &quot;&quot;&quot;
    Provide deserialization assertions.
    &quot;&quot;&quot;

    def _assert_type_violation_error_message(
        self,
        asserted_type: type[DumpType],
    ) -&gt; Str:
        messages = {
            None: Str._(&quot;This must be none/null.&quot;),
            bool: Str._(&quot;This must be a boolean.&quot;),
            int: Str._(&quot;This must be a whole number.&quot;),
            float: Str._(&quot;This must be a decimal number.&quot;),
            str: Str._(&quot;This must be a string.&quot;),
            list: Str._(&quot;This must be a list.&quot;),
            dict: Str._(&quot;This must be a key-value mapping.&quot;),
        }
        return messages[asserted_type]  # type: ignore[index]

    def _assert_type(
        self,
        value: Any,
        value_required_type: type[DumpTypeT],
        value_disallowed_type: type[DumpType] | None = None,
    ) -&gt; DumpTypeT:
        if isinstance(value, value_required_type) and (
            value_disallowed_type is None
            or not isinstance(value, value_disallowed_type)
        ):
            return value
        raise AssertionFailed(
            self._assert_type_violation_error_message(
                value_required_type,  # type: ignore[arg-type]
            )
        )

<div class="viewcode-block" id="Asserter.assert_or">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_or">[docs]</a>
    def assert_or(
        self,
        if_assertion: Assertion[_AssertionValueT, _AssertionReturnT],
        else_assertion: Assertion[_AssertionValueT, _AssertionReturnU],
    ) -&gt; Assertion[_AssertionValueT, _AssertionReturnT | _AssertionReturnU]:
        &quot;&quot;&quot;
        Assert that at least one of the given assertions passed.
        &quot;&quot;&quot;

        def _assert_or(value: Any) -&gt; _AssertionReturnT | _AssertionReturnU:
            assertions = (if_assertion, else_assertion)
            errors = SerdeErrorCollection()
            for assertion in assertions:
                try:
                    return assertion(value)
                except SerdeError as e:
                    if e.raised(AssertionFailed):
                        errors.append(e)
            raise errors

        return _assert_or</div>


<div class="viewcode-block" id="Asserter.assert_none">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_none">[docs]</a>
    def assert_none(self) -&gt; Assertion[Any, None]:
        &quot;&quot;&quot;
        Assert that a value is ``None``.
        &quot;&quot;&quot;

        def _assert_none(value: Any) -&gt; None:
            self._assert_type(value, type(None))

        return _assert_none</div>


<div class="viewcode-block" id="Asserter.assert_bool">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_bool">[docs]</a>
    def assert_bool(self) -&gt; Assertion[Any, bool]:
        &quot;&quot;&quot;
        Assert that a value is a Python ``bool``.
        &quot;&quot;&quot;

        def _assert_bool(value: Any) -&gt; bool:
            return self._assert_type(value, bool)

        return _assert_bool</div>


<div class="viewcode-block" id="Asserter.assert_int">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_int">[docs]</a>
    def assert_int(self) -&gt; Assertion[Any, int]:
        &quot;&quot;&quot;
        Assert that a value is a Python ``int``.
        &quot;&quot;&quot;

        def _assert_int(value: Any) -&gt; int:
            return self._assert_type(value, int, bool)

        return _assert_int</div>


<div class="viewcode-block" id="Asserter.assert_float">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_float">[docs]</a>
    def assert_float(self) -&gt; Assertion[Any, float]:
        &quot;&quot;&quot;
        Assert that a value is a Python ``float``.
        &quot;&quot;&quot;

        def _assert_float(value: Any) -&gt; float:
            return self._assert_type(value, float)

        return _assert_float</div>


<div class="viewcode-block" id="Asserter.assert_number">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_number">[docs]</a>
    def assert_number(self) -&gt; Assertion[Any, Number]:
        &quot;&quot;&quot;
        Assert that a value is a number (a Python ``int`` or ``float``).
        &quot;&quot;&quot;
        return self.assert_or(self.assert_int(), self.assert_float())</div>


<div class="viewcode-block" id="Asserter.assert_positive_number">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_positive_number">[docs]</a>
    def assert_positive_number(self) -&gt; Assertion[Any, Number]:
        &quot;&quot;&quot;
        Assert that a vaue is a positive nu,ber.
        &quot;&quot;&quot;

        def _assert_positive_number(
            value: Any,
        ) -&gt; Number:
            value = self.assert_number()(value)
            if value &lt;= 0:
                raise AssertionFailed(Str._(&quot;This must be a positive number.&quot;))
            return value

        return _assert_positive_number</div>


<div class="viewcode-block" id="Asserter.assert_str">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_str">[docs]</a>
    def assert_str(self) -&gt; Assertion[Any, str]:
        &quot;&quot;&quot;
        Assert that a value is a Python ``str``.
        &quot;&quot;&quot;

        def _assert_str(value: Any) -&gt; str:
            return self._assert_type(value, str)

        return _assert_str</div>


<div class="viewcode-block" id="Asserter.assert_list">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_list">[docs]</a>
    def assert_list(self) -&gt; Assertion[Any, list[Any]]:
        &quot;&quot;&quot;
        Assert that a value is a Python ``list``.
        &quot;&quot;&quot;

        def _assert_list(value: Any) -&gt; list[Any]:
            return self._assert_type(value, list)

        return _assert_list</div>


<div class="viewcode-block" id="Asserter.assert_dict">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_dict">[docs]</a>
    def assert_dict(self) -&gt; Assertion[Any, dict[str, Any]]:
        &quot;&quot;&quot;
        Assert that a value is a Python ``dict``.
        &quot;&quot;&quot;

        def _assert_dict(value: Any) -&gt; dict[str, Any]:
            return self._assert_type(value, dict)

        return _assert_dict</div>


<div class="viewcode-block" id="Asserter.assert_assertions">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_assertions">[docs]</a>
    def assert_assertions(
        self, assertions: AssertionType[_AssertionValueT, _AssertionReturnT]
    ) -&gt; Assertion[_AssertionValueT, _AssertionReturnT]:
        &quot;&quot;&quot;
        Assert that an assertions chain passes, and return the chain&#39;s output.
        &quot;&quot;&quot;

        def _assert_assertions(value: _AssertionValueT) -&gt; _AssertionReturnT:
            if isinstance(assertions, AssertionChain):
                return assertions(value).value
            return assertions(value)

        return _assert_assertions</div>


    @overload
    def assert_sequence(
        self, item_assertion: AssertionChain[Any, _AssertionReturnT]
    ) -&gt; Assertion[Any, MutableSequence[_AssertionReturnT]]:
        pass

    @overload
    def assert_sequence(
        self, item_assertion: Assertion[Any, _AssertionReturnT]
    ) -&gt; Assertion[Any, MutableSequence[_AssertionReturnT]]:
        pass

<div class="viewcode-block" id="Asserter.assert_sequence">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_sequence">[docs]</a>
    def assert_sequence(
        self, item_assertion: AssertionType[Any, _AssertionReturnT]
    ) -&gt; Assertion[Any, MutableSequence[_AssertionReturnT]]:
        &quot;&quot;&quot;
        Assert that a value is a sequence and that all item values are of the given type.
        &quot;&quot;&quot;

        def _assert_sequence(value: Any) -&gt; MutableSequence[_AssertionReturnT]:
            list_value = self.assert_list()(value)
            sequence: MutableSequence[_AssertionReturnT] = []
            with SerdeErrorCollection().assert_valid() as errors:
                for value_item_index, value_item_value in enumerate(list_value):
                    with errors.catch(Str.plain(value_item_index)):
                        sequence.append(
                            self.assert_assertions(item_assertion)(value_item_value)
                        )
            return sequence

        return _assert_sequence</div>


    @overload
    def assert_mapping(
        self, item_assertion: AssertionChain[Any, _AssertionReturnT]
    ) -&gt; Assertion[Any, MutableMapping[str, _AssertionReturnT]]:
        pass

    @overload
    def assert_mapping(
        self, item_assertion: Assertion[Any, _AssertionReturnT]
    ) -&gt; Assertion[Any, MutableMapping[str, _AssertionReturnT]]:
        pass

<div class="viewcode-block" id="Asserter.assert_mapping">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_mapping">[docs]</a>
    def assert_mapping(self, item_assertion):
        &quot;&quot;&quot;
        Assert that a value is a key-value mapping and assert that all item values are of the given type.
        &quot;&quot;&quot;

        def _assert_mapping(value: Any) -&gt; MutableMapping[str, _AssertionReturnT]:
            dict_value = self.assert_dict()(value)
            mapping: MutableMapping[str, _AssertionReturnT] = {}
            with SerdeErrorCollection().assert_valid() as errors:
                for value_item_key, value_item_value in dict_value.items():
                    with errors.catch(Str.plain(value_item_key)):
                        mapping[value_item_key] = self.assert_assertions(  # type: ignore[assignment]
                            item_assertion  # type: ignore[arg-type]
                        )(value_item_value)
            return mapping

        return _assert_mapping</div>


<div class="viewcode-block" id="Asserter.assert_fields">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_fields">[docs]</a>
    def assert_fields(self, fields: Fields) -&gt; Assertion[Any, MutableMapping[str, Any]]:
        &quot;&quot;&quot;
        Assert that a value is a key-value mapping of arbitrary value types, and assert several of its values.
        &quot;&quot;&quot;

        def _assert_fields(value: Any) -&gt; MutableMapping[str, Any]:
            value_dict = self.assert_dict()(value)
            mapping: MutableMapping[str, Any] = {}
            with SerdeErrorCollection().assert_valid() as errors:
                for field in fields:
                    with errors.catch(Str.plain(field.name)):
                        if field.name in value_dict:
                            if field.assertion:
                                mapping[field.name] = self.assert_assertions(
                                    field.assertion
                                )(value_dict[field.name])
                        elif isinstance(field, RequiredField):
                            raise AssertionFailed(Str._(&quot;This field is required.&quot;))
            return mapping

        return _assert_fields</div>


    @overload
    def assert_field(
        self, field: RequiredField[_AssertionValueT, _AssertionReturnT]
    ) -&gt; Assertion[_AssertionValueT, _AssertionReturnT]:
        pass  # pragma: no cover

    @overload
    def assert_field(
        self, field: OptionalField[_AssertionValueT, _AssertionReturnT]
    ) -&gt; Assertion[_AssertionValueT, _AssertionReturnT | type[Void]]:
        pass  # pragma: no cover

<div class="viewcode-block" id="Asserter.assert_field">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_field">[docs]</a>
    def assert_field(
        self, field: _Field[_AssertionValueT, _AssertionReturnT]
    ) -&gt; Assertion[_AssertionValueT, _AssertionReturnT | type[Void]]:
        &quot;&quot;&quot;
        Assert that a value is a key-value mapping of arbitrary value types, and assert a single of its values.
        &quot;&quot;&quot;

        def _assert_field(value: Any) -&gt; _AssertionReturnT | type[Void]:
            fields = self.assert_fields(Fields(field))(value)
            try:
                return cast(&quot;_AssertionReturnT | type[Void]&quot;, fields[field.name])
            except KeyError:
                if isinstance(field, RequiredField):
                    raise
                return Void

        return _assert_field</div>


<div class="viewcode-block" id="Asserter.assert_record">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_record">[docs]</a>
    def assert_record(self, fields: Fields) -&gt; Assertion[Any, MutableMapping[str, Any]]:
        &quot;&quot;&quot;
        Assert that a value is a record: a key-value mapping of arbitrary value types, with a known structure.

        To validate a key-value mapping as a records, assertions for all possible keys
        MUST be provided. Any keys present in the value for which no field assertions
        are provided will cause the entire record assertion to fail.
        &quot;&quot;&quot;
        if not len(list(fields)):
            raise ValueError(&quot;One or more fields are required.&quot;)

        def _assert_record(value: Any) -&gt; MutableMapping[str, Any]:
            dict_value = self.assert_dict()(value)
            known_keys = {x.name for x in fields}
            unknown_keys = set(dict_value.keys()) - known_keys
            with SerdeErrorCollection().assert_valid() as errors:
                for unknown_key in unknown_keys:
                    with errors.catch(Str.plain(unknown_key)):
                        raise AssertionFailed(
                            Str._(
                                &quot;Unknown key: {unknown_key}. Did you mean {known_keys}?&quot;,
                                unknown_key=f&#39;&quot;{unknown_key}&quot;&#39;,
                                known_keys=&quot;, &quot;.join(
                                    (f&#39;&quot;{x}&quot;&#39; for x in sorted(known_keys))
                                ),
                            )
                        )
                return self.assert_fields(fields)(dict_value)

        return _assert_record</div>


<div class="viewcode-block" id="Asserter.assert_path">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_path">[docs]</a>
    def assert_path(self) -&gt; Assertion[Any, Path]:
        &quot;&quot;&quot;
        Assert that a value is a path to a file or directory on disk that may or may not exist.
        &quot;&quot;&quot;

        def _assert_path(value: Any) -&gt; Path:
            self.assert_str()(value)
            return Path(value).expanduser().resolve()

        return _assert_path</div>


<div class="viewcode-block" id="Asserter.assert_directory_path">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_directory_path">[docs]</a>
    def assert_directory_path(self) -&gt; Assertion[Any, Path]:
        &quot;&quot;&quot;
        Assert that a value is a path to an existing directory.
        &quot;&quot;&quot;

        def _assert_directory_path(value: Any) -&gt; Path:
            directory_path = self.assert_path()(value)
            if directory_path.is_dir():
                return directory_path
            raise AssertionFailed(
                Str._(
                    &#39;&quot;{path}&quot; is not a directory.&#39;,
                    path=value,
                )
            )

        return _assert_directory_path</div>


<div class="viewcode-block" id="Asserter.assert_locale">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_locale">[docs]</a>
    def assert_locale(self) -&gt; Assertion[Any, str]:
        &quot;&quot;&quot;
        Assert that a value is a valid `IETF BCP 47 language tag &lt;https://en.wikipedia.org/wiki/IETF_language_tag&gt;`_.
        &quot;&quot;&quot;

        def _assert_locale(
            value: Any,
        ) -&gt; str:
            value = self.assert_str()(value)
            try:
                get_data(value)
                return value
            except LocaleNotFoundError:
                raise AssertionFailed(
                    Str._(
                        &#39;&quot;{locale}&quot; is not a valid IETF BCP 47 language tag.&#39;,
                        locale=value,
                    )
                ) from None

        return _assert_locale</div>


<div class="viewcode-block" id="Asserter.assert_setattr">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_setattr">[docs]</a>
    def assert_setattr(
        self, instance: object, attr_name: str
    ) -&gt; Assertion[_AssertionValueT, _AssertionValueT]:
        &quot;&quot;&quot;
        Set a value for the given object&#39;s attribute.
        &quot;&quot;&quot;

        def _assert_setattr(value: _AssertionValueT) -&gt; _AssertionValueT:
            setattr(instance, attr_name, value)
            return value

        return _assert_setattr</div>


<div class="viewcode-block" id="Asserter.assert_extension_type">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_extension_type">[docs]</a>
    def assert_extension_type(self) -&gt; Assertion[Any, type[Extension]]:
        &quot;&quot;&quot;
        Assert that a value is an extension type.

        This assertion passes if the value is fully qualified :py:class:`betty.app.extension.Extension` subclass name.
        &quot;&quot;&quot;

        def _assert_extension_type(
            value: Any,
        ) -&gt; type[Extension]:
            from betty.app.extension import (
                get_extension_type,
                ExtensionTypeImportError,
                ExtensionTypeInvalidError,
                ExtensionTypeError,
            )

            self.assert_str()(value)
            try:
                return get_extension_type(value)
            except ExtensionTypeImportError:
                raise AssertionFailed(
                    Str._(
                        &#39;Cannot find and import &quot;{extension_type}&quot;.&#39;,
                        extension_type=str(value),
                    )
                ) from None
            except ExtensionTypeInvalidError:
                raise AssertionFailed(
                    Str._(
                        &#39;&quot;{extension_type}&quot; is not a valid Betty extension type.&#39;,
                        extension_type=str(value),
                    )
                ) from None
            except ExtensionTypeError:
                raise AssertionFailed(
                    Str._(
                        &#39;Cannot determine the extension type for &quot;{extension_type}&quot;. Did you perhaps make a typo, or could it be that the extension type comes from another package that is not yet installed?&#39;,
                        extension_type=str(value),
                    )
                ) from None

        return _assert_extension_type</div>


<div class="viewcode-block" id="Asserter.assert_entity_type">
<a class="viewcode-back" href="../../../../betty.serde.load/#betty.serde.load.Asserter.assert_entity_type">[docs]</a>
    def assert_entity_type(self) -&gt; Assertion[Any, type[Entity]]:
        &quot;&quot;&quot;
        Assert that a value is an entity type.

        This assertion passes if the value is fully qualified :py:class:`betty.model.Entity` subclass name.
        &quot;&quot;&quot;

        def _assert_entity_type(
            value: Any,
        ) -&gt; type[Entity]:
            self.assert_str()(value)
            try:
                return get_entity_type(value)
            except EntityTypeImportError:
                raise AssertionFailed(
                    Str._(
                        &#39;Cannot find and import &quot;{entity_type}&quot;.&#39;,
                        entity_type=str(value),
                    )
                ) from None
            except EntityTypeInvalidError:
                raise AssertionFailed(
                    Str._(
                        &#39;&quot;{entity_type}&quot; is not a valid Betty entity type.&#39;,
                        entity_type=str(value),
                    )
                ) from None
            except EntityTypeError:
                raise AssertionFailed(
                    Str._(
                        &#39;Cannot determine the entity type for &quot;{entity_type}&quot;. Did you perhaps make a typo, or could it be that the entity type comes from another package that is not yet installed?&#39;,
                        entity_type=str(value),
                    )
                ) from None

        return _assert_entity_type</div>
</div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Bart Feenstra and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=187304be"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
    </body>
</html>