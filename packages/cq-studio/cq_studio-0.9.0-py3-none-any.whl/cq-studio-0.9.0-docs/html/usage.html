<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Use &#8212; cq-studio 0.8 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=a0e24af7"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Additional Functionality" href="functionality.html" />
    <link rel="prev" title="Installation" href="install.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="use">
<h1>Use<a class="headerlink" href="#use" title="Link to this heading">¶</a></h1>
<section id="short-version">
<h2>Short version<a class="headerlink" href="#short-version" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Create a Python file with a <code class="docutils literal notranslate"><span class="pre">main()</span></code> method that takes no arguments, and which
returns your CadQuery model(s).  The return type can be a single object, a
list of objects, or a dictionary of names and objects.  A dictionary is
preferred so that you get meaningful names displayed in the viewer for your models.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">cq-studio</span> <span class="pre">/path/to/your/model-file.py</span></code>.</p></li>
<li><p>Point your browser at <a class="reference external" href="http://127.0.0.1:32323/">http://127.0.0.1:32323/</a> and
view your model(s).  You can select which objects to show, whether to show
faces, edges, vertices, or any combination for each object, adjust
transparency and other properties.  You can experiment with a <a class="reference external" href="https://yeicor-3d.github.io/yet-another-cad-viewer/?autoplay=false&amp;preload=logo.glb&amp;preload=logo_hl.glb&amp;preload=fox.glb&amp;preload=img.jpg.glb&amp;preload=location.glb">demo of the
viewer (which comes from the YACV package) here</a>.</p></li>
<li><p>Edit your Python file to modify your CadQuery model(s) and save it; the
changes will be pushed to the viewer in your browser.</p></li>
<li><p>If errors are encountered (bad Python code, or CadQuery cannot handle what
you’re asking it to do), they will be printed to the console where you
started <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code>, and it will then wait for the files to change again
and reload them.</p></li>
</ol>
<p>Use ctrl-c in the terminal you’re running <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> in to stop the server.</p>
</section>
<section id="details">
<h2>Details<a class="headerlink" href="#details" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> server takes some options, which you can see using the <code class="docutils literal notranslate"><span class="pre">--help</span></code>
option or by running it with no arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Usage: cq-studio [OPTIONS] MODEL_FILE

  Copyright © 2024 Charles Cazabon &lt;charlesc-software@pyropus.ca&gt;.

  Licensed under the GNU General Public License v2 (only).  See the file
  COPYING for details.

Options:
  -a, --address IP-ADDRESS        listen on ADDRESS  [default: 127.0.0.1]
  -p, --port PORT                 listen on PORT  [default: 32323;
                                  1&lt;=x&lt;=65535]
  -i, --poll-interval INTERVAL    poll for changed files every INTERVAL
                                  seconds  [default: 1.0; 0.1&lt;=x&lt;=2.0]
  -o, --axes-origin / -O, --no-axes-origin
                                  show axes and orientation at origin
                                  [default: axes-origin]
  -e, --export-models / -E, --no-export-models
                                  generate STL model files from loaded objects
                                  [default: export-models]
  -l, --linear-tolerance FLOAT RANGE
                                  maximum deflection (in model units) from the
                                  ideal position for object features
                                  [default: 0.01; 1e-06&lt;=x&lt;=1.0]
  -A, --angular-tolerance FLOAT RANGE
                                  maximum deflection (in radians) from the
                                  ideal angle for two features  [default:
                                  0.01; 1e-06&lt;=x&lt;=0.1]
  -x, --exclude-dir DIR           exclude directories from watching for
                                  changes (use multiple times)  [default:
                                  .venv, .git]
  -v, --verbose                   operate more verbosely (use multiple times)
  -q, --quiet                     operate less verbosely
  --help                          Show this message and exit.
</pre></div>
</div>
<p><em>Note: the ``–address`` and ``–port`` options are provisional and can’t be used
at present.  While they do actually affect the address and port the server binds
to, the front-end JavaScript code has the default values hardcoded, and so will
only try to contact http://127.0.0.1:32323/ to obtain the models for rendering.</em></p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> adds a small 3-bar object, named <code class="docutils literal notranslate"><span class="pre">origin</span></code>, at the
(0, 0, 0) origin of the workspace to indicate the position and direction (positive)
of the axes.  You can suppress this be running with the <code class="docutils literal notranslate"><span class="pre">--no-axes-origin</span></code> option.</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> will export the models returned by your code to STL
files in the current working directory whenever the models change.  You can
suppress this with the <code class="docutils literal notranslate"><span class="pre">--no-export-models</span></code> option.  If you generally want
to create model files, but not for specific model objects, you can set
<code class="docutils literal notranslate"><span class="pre">&lt;object&gt;.export_stl</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> will print a few types of messages to the console when
running, indicating when it has detected changes in the code files or modules
imported by those files.  You can suppress this with the <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> option,
which will result in only errors being reported on the console.  Higher
verbosity is generally only useful for debugging <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> itself.</p>
<p><code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> will ignore files (when watching for updates) under a given
directory with the <code class="docutils literal notranslate"><span class="pre">--exclude-dir</span></code> option.  This can be given multiple times to
ignore more than one directory.  By default, <code class="docutils literal notranslate"><span class="pre">.git</span></code> and <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directories are
ignored; specifying this option will override that default.</p>
</section>
<section id="memory-cpu-issues">
<h2>Memory/CPU Issues<a class="headerlink" href="#memory-cpu-issues" title="Link to this heading">¶</a></h2>
<p>The underlying CAD / solid modelling library that <code class="docutils literal notranslate"><span class="pre">CadQuery</span></code> (and
<code class="docutils literal notranslate"><span class="pre">build123d</span></code>) use, <code class="docutils literal notranslate"><span class="pre">Open</span> <span class="pre">Cascade</span> <span class="pre">Technology</span> <span class="pre">(OCCT)</span></code>, can run into problems
with certain model features, causing that library to use extraordinary amounts
of memory and CPU time.  If you experience cq-studio taking extremely long times
to regenerate the models after you save changes to your source files (several
tens of seconds, or even more) or it appears to be allocating memory
continuously without end, you can usually work around this by lowering the
default tolerance values given with the
<code class="docutils literal notranslate"><span class="pre">--linear-tolerance</span></code>/<code class="docutils literal notranslate"><span class="pre">-l</span></code> and <code class="docutils literal notranslate"><span class="pre">--angular-tolerance</span></code>/<code class="docutils literal notranslate"><span class="pre">-A</span></code> options.</p>
<p>Earlier versions of cq-studio defaulted to a value of 0.001 for these options,
but that value is unnecessarily fine, and increased the probability of running
into the problem.  The current default is 0.01, but if you experience the
problem, try setting both to 0.1 instead, which will likely prevent this
behaviour.</p>
</section>
<section id="viewer-interface">
<h2>Viewer Interface<a class="headerlink" href="#viewer-interface" title="Link to this heading">¶</a></h2>
<p>By default, all faces/edges/vertices of the objects are shown:</p>
<img alt="The YACV (Yet Another Cad Viewer) browser interface, showing a view of the parts of a 3D printer system, with the top plate removed." src="_images/view-1.png" />
<p>Clicking the arrow at the bottom-left of the viewer expands a control panel:</p>
<img alt="The same view as above, but with the left control panel of the YACV viewer expanded, showing the list of objects being rendered, along with controls for setting the visibility of various elements." src="_images/view-2.png" />
<p>Clicking on the name of an object will expand controls allowing you to set transparency and
other settings for that object.</p>
<p>For example, you can disable rendering of the faces of an object, showing only its edges and
vertices, so that it is transparent:</p>
<img alt="The same view as previously, but two of the objects have had face rendering deselected, so that they are shown with only their edges rendered as lines, ghost-like, allowing what is behind them to be seen." src="_images/view-3.png" />
<p>Another view, with the main body of the printer transparent by disabling rendering of faces
on that object:</p>
<img alt="Another view with additional objects set to not render faces." src="_images/view-4.png" />
</section>
</section>
<section id="example-project">
<h1>Example Project<a class="headerlink" href="#example-project" title="Link to this heading">¶</a></h1>
<p>There is an example project located in the <code class="docutils literal notranslate"><span class="pre">example_project</span></code> subdirectory.
Run <code class="docutils literal notranslate"><span class="pre">cq-server</span> <span class="pre">example_project/project.py</span></code> and point your browser at <a class="reference external" href="http://127.0.0.1:32323/">http://127.0.0.1:32323/</a> .</p>
<p>The example project included with <code class="docutils literal notranslate"><span class="pre">cq-studio</span></code> looks like this:</p>
<img alt="An example CadQuery project being displayed in ``cq-studio``.  It consists of a colourful block with four screwholes at the corners, a large hole in the center with a floating sphere in the middle, and a long rod running through the sphere at an angle.  There are screws or pins floating exploded-diagram-style above the holes they fit in." src="_images/example-project.png" />
<p>Expanding the left control panel and clicking on the <code class="docutils literal notranslate"><span class="pre">block</span></code> item expands the controls for that
object.  In addition to the face, edge, and vertex visibility toggles, there are sliders for the
transparency/opacity of the object, the prominence or rendering size of its edges and vertices,
and the ability to set a clipping plane anywhere on the <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>, or <code class="docutils literal notranslate"><span class="pre">Z</span></code> axes.</p>
<p>Here you can see the block’s opacity reduced so that the sphere and rod can be seen through it:</p>
<img alt="The same model scene as above, with the colourful block object having a roughly 50% transparency value applied." src="_images/example-project-object-transparency.png" />
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">cq-studio</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#short-version">Short version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#details">Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memory-cpu-issues">Memory/CPU Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#viewer-interface">Viewer Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#example-project">Example Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="functionality.html">Additional Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="install.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="functionality.html" title="next chapter">Additional Functionality</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024 Charles Cazabon.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>