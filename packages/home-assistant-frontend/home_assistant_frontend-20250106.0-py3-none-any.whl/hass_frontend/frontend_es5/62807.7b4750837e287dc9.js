"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["62807"],{99426:function(e,t,a){a.r(t);var i=a(61701),n=(a(71695),a(47021),a(57243)),s=a(50778),o=a(35359),c=a(36522);a(23334),a(37583);let d,l,r,u,h=e=>e;const p={info:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",warning:"M12,2L1,21H23M12,6L19.53,19H4.47M11,10V14H13V10M11,16V18H13V16",error:"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z",success:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2,4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"};(0,i.Z)([(0,s.Mo)("ha-alert")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)()],key:"title",value(){return""}},{kind:"field",decorators:[(0,s.Cb)({attribute:"alert-type"})],key:"alertType",value(){return"info"}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"dismissable",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"method",key:"render",value:function(){return(0,n.dy)(d||(d=h` <div class="issue-type ${0}" role="alert"> <div class="icon ${0}"> <slot name="icon"> <ha-svg-icon .path="${0}"></ha-svg-icon> </slot> </div> <div class="${0}"> <div class="main-content"> ${0} <slot></slot> </div> <div class="action"> <slot name="action"> ${0} </slot> </div> </div> </div> `),(0,o.$)({[this.alertType]:!0}),this.title?"":"no-title",p[this.alertType],(0,o.$)({content:!0,narrow:this.narrow}),this.title?(0,n.dy)(l||(l=h`<div class="title">${0}</div>`),this.title):n.Ld,this.dismissable?(0,n.dy)(r||(r=h`<ha-icon-button @click="${0}" label="Dismiss alert" .path="${0}"></ha-icon-button>`),this._dismissClicked,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"):n.Ld)}},{kind:"method",key:"_dismissClicked",value:function(){(0,c.B)(this,"alert-dismissed-clicked")}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(u||(u=h`.issue-type{position:relative;padding:8px;display:flex}.issue-type::after{position:absolute;top:0;right:0;bottom:0;left:0;opacity:.12;pointer-events:none;content:"";border-radius:4px}.icon{z-index:1}.icon.no-title{align-self:center}.content{display:flex;justify-content:space-between;align-items:center;width:100%;text-align:var(--float-start)}.content.narrow{flex-direction:column;align-items:flex-end}.action{z-index:1;width:min-content;--mdc-theme-primary:var(--primary-text-color)}.main-content{overflow-wrap:anywhere;word-break:break-word;margin-left:8px;margin-right:0;margin-inline-start:8px;margin-inline-end:0}.title{margin-top:2px;font-weight:700}.action ha-icon-button,.action mwc-button{--mdc-theme-primary:var(--primary-text-color);--mdc-icon-button-size:36px}.issue-type.info>.icon{color:var(--info-color)}.issue-type.info::after{background-color:var(--info-color)}.issue-type.warning>.icon{color:var(--warning-color)}.issue-type.warning::after{background-color:var(--warning-color)}.issue-type.error>.icon{color:var(--error-color)}.issue-type.error::after{background-color:var(--error-color)}.issue-type.success>.icon{color:var(--success-color)}.issue-type.success::after{background-color:var(--success-color)}:host ::slotted(ul){margin:0;padding-inline-start:20px}`))}}]}}),n.oi)},4322:function(e,t,a){a.a(e,(async function(e,t){try{var i=a(61701),n=(a(71695),a(47021),a(57243)),s=a(50778),o=a(36522),c=(a(19993),a(74633),a(42603)),d=a(7111),l=a(26779),r=a(93913),u=e([l]);l=(u.then?(await u)():u)[0];let h,p,g,k=e=>e;const v="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,i.Z)([(0,s.Mo)("ha-backup-config-encryption-key")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"value",value:void 0},{kind:"get",key:"_value",value:function(){var e;return null!==(e=this.value)&&void 0!==e?e:""}},{kind:"method",key:"render",value:function(){return this._value?(0,n.dy)(h||(h=k` <ha-md-list> <ha-md-list-item> <span slot="headline">Download emergency kit</span> <span slot="supporting-text"> We recommend to save this encryption key somewhere secure. </span> <ha-button slot="end" @click="${0}"> <ha-svg-icon .path="${0}" slot="icon"></ha-svg-icon> Download </ha-button> </ha-md-list-item> <ha-md-list-item> <span slot="headline">Show my encryption key</span> <span slot="supporting-text"> Please keep your encryption key private. </span> <ha-button slot="end" @click="${0}">Show</ha-button> </ha-md-list-item> <ha-md-list-item> <span slot="headline">Change encryption key</span> <span slot="supporting-text"> All next backups will use this encryption key. </span> <ha-button class="danger" slot="end" @click="${0}"> Change </ha-button> </ha-md-list-item> </ha-md-list> `),this._download,v,this._show,this._change):(0,n.dy)(p||(p=k` <ha-md-list> <ha-md-list-item> <span slot="headline">Set encryption key</span> <span slot="supporting-text"> Set an encryption key for your backups. </span> <ha-button slot="end" @click="${0}"> Set </ha-button> </ha-md-list-item> </ha-md-list> `),this._set)}},{kind:"method",key:"_download",value:function(){this._value&&(0,l.VY)(this.hass,this._value)}},{kind:"method",key:"_show",value:function(){(0,r.i)(this,{currentKey:this._value})}},{kind:"method",key:"_change",value:function(){(0,c.k)(this,{currentKey:this._value,saveKey:e=>{(0,o.B)(this,"value-changed",{value:e})}})}},{kind:"method",key:"_set",value:function(){(0,d.S)(this,{saveKey:e=>{(0,o.B)(this,"value-changed",{value:e})}})}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(g||(g=k`ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}.danger{--mdc-theme-primary:var(--error-color)}`))}}]}}),n.oi);t()}catch(h){t(h)}}))},42603:function(e,t,a){a.d(t,{k:function(){return s}});a(71695),a(19423),a(40251),a(47021);var i=a(36522);const n=()=>Promise.all([a.e("7442"),a.e("50437")]).then(a.bind(a,36943)),s=(e,t)=>new Promise((a=>{const s=null==t?void 0:t.cancel,o=null==t?void 0:t.submit;(0,i.B)(e,"show-dialog",{dialogTag:"ha-dialog-change-backup-encryption-key",dialogImport:n,dialogParams:Object.assign(Object.assign({},t),{},{cancel:()=>{a(!1),s&&s()},submit:e=>{a(e),o&&o(e)}})})}))},84941:function(e,t,a){a.d(t,{s:function(){return n}});a(71695),a(40251),a(47021);var i=a(36522);const n=(e,t)=>{(0,i.B)(e,"show-dialog",{dialogTag:"dialog-local-backup-location",dialogImport:()=>Promise.all([a.e("63055"),a.e("35155")]).then(a.bind(a,74136)),dialogParams:t})}},7111:function(e,t,a){a.d(t,{S:function(){return s}});a(71695),a(19423),a(40251),a(47021);var i=a(36522);const n=()=>Promise.all([a.e("7442"),a.e("28501")]).then(a.bind(a,82023)),s=(e,t)=>new Promise((a=>{const s=null==t?void 0:t.cancel,o=null==t?void 0:t.submit;(0,i.B)(e,"show-dialog",{dialogTag:"ha-dialog-set-backup-encryption-key",dialogImport:n,dialogParams:Object.assign(Object.assign({},t),{},{cancel:()=>{a(!1),s&&s()},submit:e=>{a(e),o&&o(e)}})})}))},93913:function(e,t,a){a.d(t,{i:function(){return s}});a(71695),a(40251),a(47021);var i=a(36522);const n=()=>Promise.all([a.e("7442"),a.e("99091")]).then(a.bind(a,70697)),s=(e,t)=>(0,i.B)(e,"show-dialog",{dialogTag:"ha-dialog-show-backup-encryption-key",dialogImport:n,dialogParams:t})},13310:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t);var n=a(61701),s=a(72621),o=(a(71695),a(19423),a(40251),a(47021),a(57243)),c=a(50778),d=a(72344),l=a(36522),r=a(87707),u=a(22381),h=a(76320),p=(a(59826),a(34273),a(54977),a(23334),a(13928),a(7285),a(99426),a(34326),a(37583),a(26779)),g=(a(87979),a(68545)),k=(a(5131),a(4322)),v=a(6384),f=a(84941),b=e([g,k,v,p]);[g,k,v,p]=b.then?(await b)():b;let y,_,m,w,A=e=>e;const C="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",L="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L17.17,18.08L12.95,12.77L12.09,13.27Z";(0,n.Z)([(0,c.Mo)("ha-config-backup-settings")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"cloudStatus",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_config",value:void 0},{kind:"method",key:"willUpdate",value:function(e){(0,s.Z)(a,"willUpdate",this,3)([e]),e.has("config")&&!this._config&&(this._config=this.config)}},{kind:"method",key:"firstUpdated",value:function(e){(0,s.Z)(a,"firstUpdated",this,3)([e]),this._scrollToSection()}},{kind:"method",key:"_scrollToSection",value:async function(){var e,t;if("locations"===window.location.hash.substring(1)&&(0,d.p)(this.hass,"hassio")&&(null===(e=this._config)||void 0===e||!e.create_backup.include_all_addons)&&null!==(t=this._config)&&void 0!==t&&null!==(t=t.create_backup.include_addons)&&void 0!==t&&t.length)return this.addEventListener("backup-addons-fetched",(async()=>{await(0,h.y)(),this._scrolltoHash()})),void setTimeout((()=>{this._clearHash()}),500);await(0,h.y)(),this._scrolltoHash()}},{kind:"method",key:"_scrolltoHash",value:function(){const e=window.location.hash.substring(1);if(e){const t=this.shadowRoot.getElementById(e);null==t||t.scrollIntoView(),this._clearHash()}}},{kind:"method",key:"_clearHash",value:function(){history.replaceState(null,"",window.location.pathname)}},{kind:"method",key:"render",value:function(){return this._config?(0,o.dy)(y||(y=A` <hass-subpage back-path="/config/backup" .hass="${0}" .narrow="${0}" .header="${0}"> ${0} <div class="content"> <ha-card id="schedule"> <div class="card-header">Automatic backups</div> <div class="card-content"> <p> Let Home Assistant take care of your backups by creating a scheduled backup that also removes older backups. </p> <ha-backup-config-schedule .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-schedule> </div> </ha-card> <ha-card id="data"> <div class="card-header">Backup data</div> <div class="card-content"> <ha-backup-config-data .hass="${0}" .value="${0}" @value-changed="${0}" force-home-assistant hide-addon-version></ha-backup-config-data> </div> </ha-card> <ha-card class="agents" id="locations"> <div class="card-header">Locations</div> <div class="card-content"> <p> Your backup will be stored on these locations when this default backup is created. You can use all locations for custom backups. </p> <ha-backup-config-agents .hass="${0}" .value="${0}" .cloudStatus="${0}" @value-changed="${0}"></ha-backup-config-agents> ${0} </div> </ha-card> <ha-card> <div class="card-header">Encryption key</div> <div class="card-content"> <p> Keep this encryption key in a safe place, as you will need it to access your backup, allowing it to be restored. Download them as an emergency kit file and store it somewhere safe. Encryption keeps your backups private and secure. </p> <ha-backup-config-encryption-key .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-encryption-key> </div> </ha-card> </div> </hass-subpage> `),this.hass,this.narrow,"Backup settings",(0,d.p)(this.hass,"hassio")?(0,o.dy)(_||(_=A` <ha-button-menu slot="toolbar-icon"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-list-item graphic="icon" @request-selected="${0}"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> Change default action location </ha-list-item> </ha-button-menu> `),this.hass.localize("ui.common.menu"),C,this._changeLocalLocation,L):o.Ld,this.hass,this._config,this._scheduleConfigChanged,this.hass,this._dataConfig,this._dataConfigChanged,this.hass,this._config.create_backup.agent_ids,this.cloudStatus,this._agentsConfigChanged,this._config.create_backup.agent_ids.length?o.Ld:(0,o.dy)(m||(m=A`<ha-alert alert-type="warning" title="No location selected">You have to select at least one location to create a backup.</ha-alert><br>`)),this.hass,this._config.create_backup.password,this._encryptionKeyChanged):o.Ld}},{kind:"method",key:"_changeLocalLocation",value:async function(e){(0,r.Q)(e)&&(0,f.s)(this,{})}},{kind:"method",key:"_scheduleConfigChanged",value:function(e){const t=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{schedule:t.schedule,retention:t.retention}),this._debounceSave()}},{kind:"get",key:"_dataConfig",value:function(){const{include_addons:e,include_all_addons:t,include_database:a,include_folders:i}=this._config.create_backup;return{include_homeassistant:!0,include_database:a,include_folders:i||void 0,include_all_addons:t,include_addons:e||void 0}}},{kind:"method",key:"_dataConfigChanged",value:function(e){const t=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this.config.create_backup),{},{include_database:t.include_database,include_folders:t.include_folders||null,include_all_addons:t.include_all_addons,include_addons:t.include_addons||null})}),this._debounceSave()}},{kind:"method",key:"_agentsConfigChanged",value:function(e){const t=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{agent_ids:t})}),this._debounceSave()}},{kind:"method",key:"_encryptionKeyChanged",value:function(e){const t=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{password:t})}),this._debounceSave()}},{kind:"field",key:"_debounceSave",value(){return(0,u.D)((()=>this._save()),500)}},{kind:"method",key:"_save",value:async function(){var e,t;await(0,p._r)(this.hass,{create_backup:{agent_ids:this._config.create_backup.agent_ids,include_folders:null!==(e=this._config.create_backup.include_folders)&&void 0!==e?e:[],include_database:this._config.create_backup.include_database,include_addons:null!==(t=this._config.create_backup.include_addons)&&void 0!==t?t:[],include_all_addons:this._config.create_backup.include_all_addons,password:this._config.create_backup.password},retention:this._config.retention,schedule:this._config.schedule.state}),(0,l.B)(this,"ha-refresh-backup-config")}},{kind:"field",static:!0,key:"styles",value(){return(0,o.iv)(w||(w=A`ha-card{scroll-margin-top:16px}.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:24px;display:flex;flex-direction:column;margin-bottom:24px}.alert{--mdc-theme-primary:var(--error-color)}.card-header{padding-bottom:8px}.card-content{padding-bottom:0}`))}}]}}),o.oi);i()}catch(y){i(y)}}))}}]);
//# sourceMappingURL=62807.7b4750837e287dc9.js.map