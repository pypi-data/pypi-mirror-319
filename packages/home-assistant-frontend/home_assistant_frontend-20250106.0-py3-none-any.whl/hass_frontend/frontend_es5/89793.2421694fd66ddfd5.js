"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["89793"],{87865:function(e,t,a){a.d(t,{v:function(){return i}});a(40251);const i=async(e,t)=>{if(navigator.clipboard)try{return void(await navigator.clipboard.writeText(e))}catch(n){}const a=null!=t?t:document.body,i=document.createElement("textarea");i.value=e,a.appendChild(i),i.select(),document.execCommand("copy"),a.removeChild(i)}},5828:function(e,t,a){a.r(t),a.d(t,{HaIconButtonPrev:function(){return c}});var i=a(61701),n=(a(71695),a(47021),a(57243)),o=a(50778),s=a(5111);a(23334);let d,l=e=>e;let c=(0,i.Z)([(0,o.Mo)("ha-icon-button-prev")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_icon",value(){return"rtl"===s.E.document.dir?"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z":"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"}},{kind:"method",key:"render",value:function(){var e;return(0,n.dy)(d||(d=l` <ha-icon-button .disabled="${0}" .label="${0}" .path="${0}"></ha-icon-button> `),this.disabled,this.label||(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.back"))||"Back",this._icon)}}]}}),n.oi)},51784:function(e,t,a){a.d(t,{dJ:function(){return g},zB:function(){return m}});var i=a(61701),n=a(72621),o=(a(52247),a(71695),a(19423),a(40251),a(47021),a(67840)),s=a(88854),d=a(57243),l=a(50778);let c,r,u=e=>e;o.A.addInitializer((async e=>{await e.updateComplete;const t=e;t.dialog.prepend(t.scrim),t.scrim.style.inset=0,t.scrim.style.zIndex=0;const{getOpenAnimation:a,getCloseAnimation:i}=t;t.getOpenAnimation=()=>{var e,t;const i=a.call(void 0);return i.container=[...null!==(e=i.container)&&void 0!==e?e:[],...null!==(t=i.dialog)&&void 0!==t?t:[]],i.dialog=[],i},t.getCloseAnimation=()=>{var e,t;const a=i.call(void 0);return a.container=[...null!==(e=a.container)&&void 0!==e?e:[],...null!==(t=a.dialog)&&void 0!==t?t:[]],a.dialog=[],a}}));(0,i.Z)([(0,l.Mo)("ha-md-dialog")],(function(e,t){class i extends t{constructor(){super(),e(this),this.addEventListener("cancel",this._handleCancel),"function"!=typeof HTMLDialogElement&&(this.addEventListener("open",this._handleOpen),r||(r=a.e("73854").then(a.bind(a,85893)))),void 0===this.animate&&(this.quick=!0),void 0===this.animate&&(this.quick=!0)}}return{F:i,d:[{kind:"field",decorators:[(0,l.Cb)({attribute:"disable-cancel-action",type:Boolean})],key:"disableCancelAction",value(){return!1}},{kind:"field",key:"_polyfillDialogRegistered",value(){return!1}},{kind:"method",key:"_handleOpen",value:async function(e){var t;if(e.preventDefault(),this._polyfillDialogRegistered)return;this._polyfillDialogRegistered=!0,this._loadPolyfillStylesheet("/static/polyfills/dialog-polyfill.css");const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("dialog");(await r).default.registerDialog(a),this.removeEventListener("open",this._handleOpen),this.show()}},{kind:"method",key:"_loadPolyfillStylesheet",value:async function(e){const t=document.createElement("link");return t.rel="stylesheet",t.href=e,new Promise(((a,i)=>{var n;t.onload=()=>a(),t.onerror=()=>i(new Error(`Stylesheet failed to load: ${e}`)),null===(n=this.shadowRoot)||void 0===n||n.appendChild(t)}))}},{kind:"method",key:"_handleCancel",value:function(e){if(this.disableCancelAction){var t;e.preventDefault();const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("dialog .container");void 0!==this.animate&&(null==a||a.animate([{transform:"rotate(-1deg)","animation-timing-function":"ease-in"},{transform:"rotate(1.5deg)","animation-timing-function":"ease-out"},{transform:"rotate(0deg)","animation-timing-function":"ease-in"}],{duration:200,iterations:2}))}}},{kind:"field",static:!0,key:"styles",value(){return[...(0,n.Z)(i,"styles",this),(0,d.iv)(c||(c=u`:host{--md-dialog-container-color:var(--card-background-color);--md-dialog-headline-color:var(--primary-text-color);--md-dialog-supporting-text-color:var(--primary-text-color);--md-sys-color-scrim:#000000;--md-dialog-headline-weight:400;--md-dialog-headline-size:1.574rem;--md-dialog-supporting-text-size:1rem;--md-dialog-supporting-text-line-height:1.5rem}:host([type=alert]){min-width:320px}@media all and (max-width:450px),all and (max-height:500px){:host(:not([type=alert])){min-width:calc(100vw - env(safe-area-inset-right) - env(safe-area-inset-left));max-width:calc(100vw - env(safe-area-inset-right) - env(safe-area-inset-left));min-height:100%;max-height:100%;--md-dialog-container-shape:0}}::slotted(ha-dialog-header[slot=headline]){display:contents}.scroller{overflow:var(--dialog-content-overflow,auto)}slot[name=content]::slotted(*){padding:var(--dialog-content-padding,24px)}.scrim{z-index:10}`))]}}]}}),o.A);const h=Object.assign(Object.assign({},s.I),{},{dialog:[[[{transform:"translateY(50px)"},{transform:"translateY(0)"}],{duration:500,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}]]}),p=Object.assign(Object.assign({},s.G),{},{dialog:[[[{transform:"translateY(0)"},{transform:"translateY(50px)"}],{duration:150,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]]}),g=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?h:s.I,m=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?p:s.G},35956:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t);var n=a(61701),o=(a(71695),a(92745),a(19423),a(40251),a(92519),a(42179),a(89256),a(24931),a(88463),a(57449),a(19814),a(47021),a(57243)),s=a(50778),d=a(72344),l=a(36522),c=a(87865),r=(a(59826),a(95198),a(23334),a(5828),a(13928),a(51784),a(19993),a(74633),a(34326),a(37583),a(26779)),u=a(28008),h=a(72473),p=a(68545),g=(a(5131),a(6384)),m=e([p,g,r]);[p,g,r]=m.then?(await m)():m;let _,f,k,v,y,b,x,w,C,L,$,S,O,A=e=>e;const j="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",H="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",M="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",B=["welcome","key","setup","schedule","data","locations"],D=new Set(["setup"]),V={create_backup:{agent_ids:[],include_folders:[],include_database:!0,include_addons:[],include_all_addons:!0,password:null,name:null},retention:{copies:3,days:null},schedule:{state:r.g2.DAILY},last_attempted_automatic_backup:null,last_completed_automatic_backup:null};(0,n.Z)([(0,s.Mo)("ha-dialog-backup-onboarding")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_opened",value(){return!1}},{kind:"field",decorators:[(0,s.SB)()],key:"_step",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,s.IO)("ha-md-dialog")],key:"_dialog",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_config",value:void 0},{kind:"method",key:"showDialog",value:function(e){var t;this._params=e,this._step=this._firstStep,this._config=V;const a=[];(0,d.p)(this.hass,"hassio")?a.push(r.Kn):a.push(r.UR),null!==(t=this._params.cloudStatus)&&void 0!==t&&t.logged_in&&a.push(r.$u),this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{agent_ids:a,password:(0,r.Ty)()})}),this._opened=!0}},{kind:"method",key:"closeDialog",value:function(){this._params.cancel&&this._params.cancel(),this._opened&&(0,l.B)(this,"dialog-closed",{dialog:this.localName}),this._opened=!1,this._step=void 0,this._config=void 0,this._params=void 0}},{kind:"get",key:"_firstStep",value:function(){var e;return null!==(e=this._params)&&void 0!==e&&e.skipWelcome?B[1]:B[0]}},{kind:"method",key:"_done",value:async function(){if(!this._config)return;const e={create_backup:{password:this._config.create_backup.password,include_database:this._config.create_backup.include_database,agent_ids:this._config.create_backup.agent_ids},schedule:this._config.schedule.state,retention:this._config.retention};(0,d.p)(this.hass,"hassio")&&(e.create_backup.include_folders=this._config.create_backup.include_folders||[],e.create_backup.include_all_addons=this._config.create_backup.include_all_addons,e.create_backup.include_addons=this._config.create_backup.include_addons||[]);try{var t;await(0,r._r)(this.hass,e),null===(t=this._params)||void 0===t||t.submit(!0),this._dialog.close()}catch(a){console.error(a),(0,h.C)(this,{message:"Failed to save backup configuration"})}}},{kind:"method",key:"_previousStep",value:function(){const e=B.indexOf(this._step);0!==e&&(this._step=B[e-1])}},{kind:"method",key:"_nextStep",value:function(){const e=B.indexOf(this._step);e!==B.length-1&&(this._step=B[e+1])}},{kind:"method",key:"render",value:function(){if(!this._opened||!this._params||!this._step)return o.Ld;const e=this._step===B[B.length-1],t=this._step===this._firstStep;return(0,o.dy)(_||(_=A` <ha-md-dialog disable-cancel-action open @closed="${0}"> <ha-dialog-header slot="headline"> ${0} <span slot="title">${0}</span> </ha-dialog-header> <div slot="content">${0}</div> ${0} </ha-md-dialog> `),this.closeDialog,t?(0,o.dy)(f||(f=A` <ha-icon-button slot="navigationIcon" .label="${0}" .path="${0}" @click="${0}"></ha-icon-button> `),this.hass.localize("ui.dialogs.generic.close"),j,this.closeDialog):(0,o.dy)(k||(k=A` <ha-icon-button-prev slot="navigationIcon" @click="${0}"></ha-icon-button-prev> `),this._previousStep),this._stepTitle,this._renderStepContent(),D.has(this._step)?o.Ld:(0,o.dy)(v||(v=A` <div slot="actions"> ${0} </div> `),e?(0,o.dy)(y||(y=A` <ha-button @click="${0}" .disabled="${0}"> Save and create backup </ha-button> `),this._done,!this._isStepValid()):(0,o.dy)(b||(b=A` <ha-button @click="${0}" .disabled="${0}"> Next </ha-button> `),this._nextStep,!this._isStepValid())))}},{kind:"get",key:"_stepTitle",value:function(){switch(this._step){case"welcome":default:return"";case"key":return"Encryption key";case"setup":return"Set up your automatic backups";case"schedule":return"Automatic backups";case"data":return"Backup data";case"locations":return"Locations"}}},{kind:"method",key:"_isStepValid",value:function(){var e,t,a;switch(this._step){case"key":case"setup":default:return!0;case"schedule":return!(null===(e=this._config)||void 0===e||!e.schedule);case"data":return!(null===(t=this._config)||void 0===t||!t.schedule);case"locations":return!(null===(a=this._config)||void 0===a||!a.create_backup.agent_ids.length)}}},{kind:"method",key:"_renderStepContent",value:function(){if(!this._config)return o.Ld;switch(this._step){case"welcome":return(0,o.dy)(x||(x=A` <div class="welcome"> <img src="/static/images/voice-assistant/hi.png" alt="Casita Home Assistant logo"> <h1>Set up backups</h1> <p class="secondary"> Backups are essential for a reliable smart home. They help protect the work you've put into setting up your smart home, and if the worst happens, you can get back up and running quickly. It is recommended that you create a backup every day. You should keep three backups in at least two different locations, one of which should be off-site. </p> </div> `));case"key":return(0,o.dy)(w||(w=A` <p> All your backups are encrypted to keep your data private and secure. We recommend to save this key somewhere secure. As you can only restore your data with the backup encryption key. </p> <div class="encryption-key"> <p>${0}</p> <ha-icon-button .path="${0}" @click="${0}"></ha-icon-button> </div> <ha-md-list> <ha-md-list-item> <span slot="headline">Download emergency kit</span> <span slot="supporting-text"> We recommend to save this encryption key somewhere secure. </span> <ha-button slot="end" @click="${0}"> <ha-svg-icon .path="${0}" slot="icon"></ha-svg-icon> Download </ha-button> </ha-md-list-item> </ha-md-list> `),this._config.create_backup.password,H,this._copyKeyToClipboard,this._downloadKey,M);case"setup":return(0,o.dy)(C||(C=A` <ha-md-list class="full"> <ha-md-list-item type="button" @click="${0}"> <span slot="headline">Recommended settings</span> <span slot="supporting-text"> Backup everything daily, keeping three days of backups </span> <ha-icon-next slot="end"> </ha-icon-next> </ha-md-list-item> <ha-md-list-item type="button" @click="${0}"> <span slot="headline">Custom settings</span> <span slot="supporting-text"> Select when, where, and what to backup </span> <ha-icon-next slot="end"> </ha-icon-next> </ha-md-list-item> </ha-md-list> `),this._done,this._nextStep);case"schedule":return(0,o.dy)(L||(L=A` <p> Let Home Assistant take care of your backups by creating a scheduled backup that also removes older backups. </p> <ha-backup-config-schedule .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-schedule> `),this.hass,this._config,this._scheduleChanged);case"data":return(0,o.dy)($||($=A` <p> Choose what data to include in your backups. You can always change this later. </p> <ha-backup-config-data .hass="${0}" .value="${0}" @value-changed="${0}" force-home-assistant hide-addon-version></ha-backup-config-data> `),this.hass,this._dataConfig(this._config),this._dataChanged);case"locations":return(0,o.dy)(S||(S=A` <p> Home Assistant will upload to these locations when an automatic backup is made. You can use all locations for manual backups. </p> <ha-backup-config-agents .hass="${0}" .value="${0}" .cloudStatus="${0}" @value-changed="${0}"></ha-backup-config-agents> `),this.hass,this._config.create_backup.agent_ids,this._params.cloudStatus,this._agentsConfigChanged)}return o.Ld}},{kind:"method",key:"_downloadKey",value:function(){var e;const t=null===(e=this._config)||void 0===e?void 0:e.create_backup.password;t&&(0,r.VY)(this.hass,t)}},{kind:"method",key:"_copyKeyToClipboard",value:async function(){await(0,c.v)(this._config.create_backup.password,this.renderRoot.querySelector("div")),(0,h.C)(this,{message:this.hass.localize("ui.common.copied_clipboard")})}},{kind:"method",key:"_dataConfig",value:function(e){const{include_addons:t,include_all_addons:a,include_database:i,include_folders:n}=e.create_backup;return{include_homeassistant:!0,include_database:i,include_folders:n||void 0,include_all_addons:a,include_addons:t||void 0}}},{kind:"method",key:"_dataChanged",value:function(e){const t=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{include_database:t.include_database,include_folders:t.include_folders||null,include_all_addons:t.include_all_addons,include_addons:t.include_addons||null})})}},{kind:"method",key:"_scheduleChanged",value:function(e){const t=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{schedule:t.schedule,retention:t.retention})}},{kind:"method",key:"_agentsConfigChanged",value:function(e){const t=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{agent_ids:t})})}},{kind:"get",static:!0,key:"styles",value:function(){return[u.Qx,u.yu,(0,o.iv)(O||(O=A`ha-md-dialog{width:90vw;max-width:560px;--dialog-content-padding:8px 24px;max-height:min(605px,100% - 48px)}ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}ha-md-list.full{--md-list-item-leading-space:24px;--md-list-item-trailing-space:24px;margin-left:-24px;margin-right:-24px}@media all and (max-width:450px),all and (max-height:500px){ha-md-dialog{max-width:none}div[slot=content]{margin-top:0}}p{margin-top:0}.welcome{text-align:center}.encryption-key{border:1px solid var(--divider-color);background-color:var(--primary-background-color);border-radius:8px;padding:16px;display:flex;flex-direction:row;align-items:center;gap:24px}.encryption-key p{margin:0;flex:1;font-family:"Roboto Mono",Consolas,Menlo,monospace;font-size:20px;font-style:normal;font-weight:400;line-height:28px;text-align:center}.encryption-key ha-icon-button{flex:none;margin:-16px}`))]}}]}}),o.oi);i()}catch(_){i(_)}}))}}]);
//# sourceMappingURL=89793.2421694fd66ddfd5.js.map