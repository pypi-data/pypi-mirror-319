(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{54727:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return n(58875)}])},56901:function(e,s,n){"use strict";n.d(s,{ZS:function(){return o},a4:function(){return i}});var l=n(80406);let t=n(21618).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:i}=t,a={purposes:{},special_purposes:{}},o=(0,l.P1)(t.endpoints.getPurposes.select(),e=>{let{data:s}=e;return s||a})},58875:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return N}});var l=n(24246),t=n(69746),i=n(27378),a=n(43124),o=n(92222),r=n(59003),c=n(11596),u=n(8540),d=n(86677);let x=(e,s)=>{let n=e.filter(e=>e.isChecked);return n.length>0?"".concat(s,"=").concat(n.map(e=>e.value).join("&".concat(s,"="))):void 0},p=e=>{let{value:s,displayText:n,isChecked:i,onCheckboxChange:a}=e;return(0,l.jsx)(t.XZJ,{value:s,height:"20px",mb:"25px",isChecked:i,onChange:e=>{let{target:n}=e;a(s,n.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,l.jsx)(t.xvT,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:n})},s)},h=e=>{let{options:s,header:n,onCheckboxChange:a,columns:o=3,numDefaultOptions:r=15}=e,[c,u]=(0,i.useState)(!1),d=c?s:s.slice(0,r),x=s.length>r;return(0,l.jsxs)(t.Qdk,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,l.jsx)(t.X6q,{height:"56px",children:(0,l.jsxs)(t.KFZ,{height:"100%",children:[(0,l.jsx)(t.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:n}),(0,l.jsx)(t.XEm,{})]})}),(0,l.jsxs)(t.Hk3,{id:"panel-".concat(n),children:[(0,l.jsx)(t.MIq,{columns:o,children:d.map(e=>(0,l.jsx)(p,{...e,onCheckboxChange:a},e.value))}),!c&&x?(0,l.jsx)(t.wpx,{type:"text",onClick:()=>{u(!0)},children:"View more"}):null,c&&x?(0,l.jsx)(t.wpx,{type:"text",onClick:()=>{u(!1)},children:"View less"}):null]})]})},g=e=>{let{heading:s,children:n}=e;return(0,l.jsxs)(t.xuv,{padding:"12px 8px 8px 12px",maxHeight:600,children:[s?(0,l.jsx)(t.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:s}):null,n]})},j=e=>{let{resetFilters:s,isOpen:n,onClose:i,children:a,...o}=e;return(0,l.jsxs)(t.u_l,{isOpen:n,onClose:i,isCentered:!0,size:"2xl",...o,children:[(0,l.jsx)(t.ZAr,{}),(0,l.jsxs)(t.hzk,{children:[(0,l.jsx)(t.xBx,{children:"Filters"}),(0,l.jsx)(t.olH,{}),(0,l.jsx)(t.izJ,{}),(0,l.jsx)(t.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:a}),(0,l.jsx)(t.mzw,{children:(0,l.jsxs)(t.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(t.wpx,{onClick:s,className:"mr-3 grow",children:"Reset filters"}),(0,l.jsx)(t.wpx,{type:"primary",onClick:i,className:"grow",children:"Done"})]})})]})]})};var C=n(11032),f=n(85815),m=n(44296),v=n(56901),k=n(79851);let b=()=>{let{isOpen:e,onClose:s,onOpen:n}=(0,t.qY0)();(0,k.fd)();let l=(0,m.C)(k.U3);(0,v.a4)();let a=(0,m.C)(v.ZS),[o,r]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[d,x]=(0,i.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),[p,h]=(0,i.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]);(0,i.useEffect)(()=>{0===c.length&&u(l.map(e=>({value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1})))},[l,c,u]),(0,i.useEffect)(()=>{0===o.length&&r([...Object.entries(a.purposes).map(e=>({value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1})),...Object.entries(a.special_purposes).map(e=>({value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}))])},[a,o,u]);let g=(e,s,n,l)=>{l(n.map(n=>n.value===e?{...n,isChecked:s}:n))};return{isOpen:e,onClose:s,onOpen:n,resetFilters:()=>{u(e=>e.map(e=>({...e,isChecked:!1}))),x(e=>e.map(e=>({...e,isChecked:!1}))),r(e=>e.map(e=>({...e,isChecked:!1}))),h(e=>e.map(e=>({...e,isChecked:!1})))},purposeOptions:o,onPurposeChange:(e,s)=>{g(e,s,o,r)},dataUseOptions:c,onDataUseChange:(e,s)=>{g(e,s,c,u)},legalBasisOptions:d,onLegalBasisChange:(e,s)=>{g(e,s,d,x)},consentCategoryOptions:p,onConsentCategoryChange:(e,s)=>{g(e,s,p,h)}}},y=e=>{let{isOpen:s,isTcfEnabled:n,onClose:i,resetFilters:a,purposeOptions:o,onPurposeChange:r,dataUseOptions:c,onDataUseChange:u,legalBasisOptions:d,onLegalBasisChange:x,consentCategoryOptions:p,onConsentCategoryChange:C}=e;return(0,l.jsx)(j,{isOpen:s,onClose:i,resetFilters:a,children:(0,l.jsx)(t.UQy,{children:(0,l.jsxs)(g,{children:[n?(0,l.jsx)(h,{options:o,onCheckboxChange:r,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,l.jsx)(h,{options:c,onCheckboxChange:u,header:"Data uses"}),n?(0,l.jsx)(h,{options:d,onCheckboxChange:x,header:"Legal basis"}):null,n?null:(0,l.jsx)(h,{options:p,onCheckboxChange:C,header:"Consent categories"})]})})})};var w=n(96878);let{Text:_,Title:S}=t.AntTypography,O=()=>{let{isOpen:e,onOpen:s,onClose:n}=(0,t.qY0)();return{isOpen:e,onOpen:s,onClose:n}},z=e=>{let{isOpen:s,onClose:n,fidesKey:i}=e,{data:a,isLoading:o}=(0,w.ho)(i),r=(e,s)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S,{level:5,children:e}),(null==s?void 0:s.length)?(0,l.jsx)("div",{children:(0,l.jsx)(t.vyj,{size:[0,2],wrap:!0,children:null==s?void 0:s.map(e=>(0,l.jsx)(t.j8w,{children:e},e))})}):(0,l.jsxs)(_,{italic:!0,children:["no known ",e.toLowerCase()]})]});return(0,l.jsxs)(t.u_l,{isOpen:s,onClose:n,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,l.jsx)(t.ZAr,{}),(0,l.jsxs)(t.hzk,{maxWidth:"800px",children:[(0,l.jsx)(t.xBx,{children:a?null==a?void 0:a.name:"Vendor"}),(0,l.jsx)(t.fef,{children:o?(0,l.jsx)(t.jqI,{className:"h-80 w-full",align:"center",justify:"center",children:(0,l.jsx)(t.$jN,{})}):!!a&&(0,l.jsxs)(t.AntTypography,{children:[(0,l.jsx)(S,{level:5,children:"Purposes"}),Object.entries(a.purposes||{}).length>0?(0,l.jsx)(t.UQy,{allowMultiple:!0,children:Object.entries(a.purposes).map((e,s)=>{let[n]=e;return(0,l.jsx)(t.Qdk,{children:e=>{let{isExpanded:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.KFZ,{backgroundColor:s?"gray.50":"unset",children:[(0,l.jsx)(t.xuv,{flex:"1",textAlign:"left",children:n}),(0,l.jsx)(t.XEm,{})]}),(0,l.jsxs)(t.Hk3,{backgroundColor:"gray.50",children:[(0,l.jsx)(t.jqI,{className:"my-4",vertical:!0,children:r("Data uses",a.purposes[n].data_uses)}),(0,l.jsx)(t.jqI,{className:"my-4",vertical:!0,children:r("Legal basis",a.purposes[n].legal_bases)})]})]})}},s)})}):(0,l.jsx)(_,{italic:!0,children:"no known purposes"}),(0,l.jsx)("div",{className:"my-4",children:r("Features",a.features)}),(0,l.jsx)("div",{className:"my-4",children:r("Data categories",a.data_categories)})]})}),(0,l.jsxs)(t.mzw,{children:[(0,l.jsx)(t.wpx,{size:"small",onClick:n,children:"Close"}),(0,l.jsx)(t.LZC,{})]})]})]})},F=(0,o.Cl)(),T={items:[],total:0,page:1,size:25,pages:1},P=()=>{let{tcf:e,dictionaryService:s}=(0,c.hz)(),{isLoading:n}=(0,w.x8)(),{isOpen:a,onOpen:p,onClose:h}=O(),g=(0,d.useRouter)(),[j,m]=(0,i.useState)(),{isOpen:v,onOpen:k,onClose:_,resetFilters:S,purposeOptions:P,onPurposeChange:R,dataUseOptions:N,onDataUseChange:I,legalBasisOptions:E,onLegalBasisChange:M,consentCategoryOptions:L,onConsentCategoryChange:q}=b(),V=(0,i.useMemo)(()=>x(N,"data_uses"),[N]),Z=(0,i.useMemo)(()=>x(E,"legal_bases"),[E]),D=(0,i.useMemo)(()=>x(P.filter(e=>e.value.includes("normal")).map(e=>({...e,value:e.value.split(".")[1]})),"purposes"),[P]),A=(0,i.useMemo)(()=>x(P.filter(e=>e.value.includes("special")).map(e=>({...e,value:e.value.split(".")[1]})),"special_purposes"),[P]),H=(0,i.useMemo)(()=>x(L,"consent_category"),[L]),{PAGE_SIZES:U,pageSize:X,setPageSize:B,onPreviousPageClick:Q,isPreviousPageDisabled:W,onNextPageClick:G,isNextPageDisabled:K,startRange:J,endRange:Y,pageIndex:$,setTotalPages:ee,resetPageIndexToDefault:es}=(0,u.oi)(),[en,el]=(0,i.useState)(),et=(0,i.useCallback)(e=>{es(),el(e)},[es,el]),{isFetching:ei,isLoading:ea,data:eo}=(0,w.de)({pageIndex:$,pageSize:X,dataUses:V,search:en,legalBasis:Z,purposes:D,specialPurposes:A,consentCategories:H}),{items:er,total:ec,pages:eu}=(0,i.useMemo)(()=>eo||T,[eo]);(0,i.useEffect)(()=>{ee(eu)},[eu,ee]);let ed=(0,i.useMemo)(()=>[F.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Vendor",...e})}),F.accessor(e=>e.data_uses,{id:"tcf_purpose",cell:e=>(0,l.jsx)(u.CI,{plSuffix:"purposes",singSuffix:"purpose",count:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"TCF purpose",...e})}),F.accessor(e=>e.data_uses,{id:"data_uses",cell:e=>(0,l.jsx)(u.CI,{plSuffix:"data uses",singSuffix:"data use",count:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Data use",...e})}),F.accessor(e=>e.legal_bases,{id:"legal_bases",cell:e=>(0,l.jsx)(u.CI,{plSuffix:"bases",singSuffix:"basis",count:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Legal basis",...e})}),F.accessor(e=>e.consent_categories,{id:"consent_categories",cell:e=>(0,l.jsx)(u.CI,{plSuffix:"categories",singSuffix:"category",count:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Categories",...e})}),F.accessor(e=>e.cookies,{id:"cookies",cell:e=>(0,l.jsx)(u.CI,{plSuffix:"cookies",singSuffix:"cookie",count:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Cookies",...e})})],[]),ex=(0,r.b7)({columns:ed,data:er,state:{columnVisibility:{tcf_purpose:e,data_uses:e,legal_bases:e,consent_categories:!e,cookies:!e}},getCoreRowModel:(0,o.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return ea||n?(0,l.jsx)(u.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(t.kCb,{flex:1,direction:"column",overflow:"auto",children:[a&&j?(0,l.jsx)(z,{isOpen:a,fidesKey:j,onClose:h}):null,(0,l.jsxs)(u.Q$,{children:[(0,l.jsx)(u.HO,{globalFilter:en,setGlobalFilter:et,placeholder:"Search"}),(0,l.jsx)(y,{isOpen:v,isTcfEnabled:e,onClose:_,resetFilters:S,purposeOptions:P,onPurposeChange:R,dataUseOptions:N,onDataUseChange:I,legalBasisOptions:E,onLegalBasisChange:M,consentCategoryOptions:L,onConsentCategoryChange:q}),(0,l.jsxs)(t.Ugi,{alignItems:"center",spacing:4,children:[(0,l.jsx)(f.Z,{buttonLabel:"Add vendors",buttonProps:{size:"small"},onButtonClick:s?()=>{g.push(C.Gg)}:void 0}),(0,l.jsx)(t.wpx,{onClick:k,"data-testid":"filter-multiple-systems-btn",size:"small",children:"Filter"})]})]}),(0,l.jsx)(u.ZK,{tableInstance:ex,onRowClick:e=>{m(e.fides_key),p()}}),(0,l.jsx)(u.s8,{totalRows:ec||0,pageSizes:U,setPageSize:B,onPreviousPageClick:Q,isPreviousPageDisabled:W||ei,onNextPageClick:G,isNextPageDisabled:K||ei,startRange:J,endRange:Y})]})},R=e=>{let{title:s,description:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.xuv,{mb:4,children:(0,l.jsx)(t.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:s})}),(0,l.jsx)(t.kCb,{children:(0,l.jsx)(t.xvT,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:n})})]})};var N=()=>(0,l.jsxs)(a.Z,{title:"Configure consent",children:[(0,l.jsx)(R,{title:"Manage your vendors",description:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"}),(0,l.jsx)(P,{})]})}},function(e){e.O(0,[8033,6451,8540,8141,5815,2888,9774,179],function(){return e(e.s=54727)}),_N_E=e.O()}]);