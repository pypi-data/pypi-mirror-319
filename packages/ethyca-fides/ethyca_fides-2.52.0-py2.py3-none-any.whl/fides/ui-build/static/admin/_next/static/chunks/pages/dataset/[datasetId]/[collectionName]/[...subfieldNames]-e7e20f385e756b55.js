(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2096],{16383:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]/[...subfieldNames]",function(){return a(49674)}])},60262:function(e,t,a){"use strict";a.d(t,{f:function(){return n}});var i=a(24246);let n=(0,a(69746).IUT)({displayName:"FieldIcon",viewBox:"0 0 16 16",path:(0,i.jsx)("path",{d:"M12.6667 12.6667V10.6667H3.33333V12.6667H12.6667ZM12.6667 9.33333V6.66667H3.33333V9.33333H12.6667ZM12.6667 5.33333V3.33333H3.33333V5.33333H12.6667ZM3.33333 14C2.96667 14 2.65278 13.8694 2.39167 13.6083C2.13056 13.3472 2 13.0333 2 12.6667V3.33333C2 2.96667 2.13056 2.65278 2.39167 2.39167C2.65278 2.13056 2.96667 2 3.33333 2H12.6667C13.0333 2 13.3472 2.13056 13.6083 2.39167C13.8694 2.65278 14 2.96667 14 3.33333V12.6667C14 13.0333 13.8694 13.3472 13.6083 13.6083C13.3472 13.8694 13.0333 14 12.6667 14H3.33333Z",fill:"currentColor"})})},29137:function(e,t,a){"use strict";a.d(t,{$:function(){return n}});var i=a(24246);let n=(0,a(69746).IUT)({displayName:"TableIcon",viewBox:"0 0 16 16",path:(0,i.jsx)("path",{fill:"currentColor",d:"M2 14V2H14V14H2ZM3.33333 6H12.6667V3.33333H3.33333V6ZM6.88333 9.33333H9.11667V7.33333H6.88333V9.33333ZM6.88333 12.6667H9.11667V10.6667H6.88333V12.6667ZM3.33333 9.33333H5.55V7.33333H3.33333V9.33333ZM10.45 9.33333H12.6667V7.33333H10.45V9.33333ZM3.33333 12.6667H5.55V10.6667H3.33333V12.6667ZM10.45 12.6667H12.6667V10.6667H10.45V12.6667Z"})})},19906:function(e,t,a){"use strict";var i=a(24246),n=a(69746),l=a(27378),o=a(74588),s=a(19310);t.Z=e=>{let{selectedTaxonomies:t,onAddTaxonomy:a,onRemoveTaxonomy:r}=e,[d,c]=(0,l.useState)(!1),{getDataCategoryDisplayName:u}=(0,s.Z)();return(0,i.jsxs)(n.Eq9,{py:2,alignItems:"center",position:"relative",width:"100%",gap:2,overflowX:"auto",children:[t.map(e=>(0,i.jsxs)(n.Cts,{fontWeight:"normal",textTransform:"none","data-testid":"classification-".concat(e),px:1.5,children:[u(e),(0,i.jsx)(n.wpx,{onClick:()=>r(e),icon:(0,i.jsx)(n.Two,{boxSize:2}),size:"small",type:"text",className:"ml-1 max-h-4 max-w-4","aria-label":"Remove category"})]},e)),(0,i.jsx)(n.wpx,{size:"small",type:"text",icon:(0,i.jsx)(n.jBn,{mb:"1px"}),onClick:()=>c(!0),className:" max-h-[20px] max-w-[20px] rounded-sm border-none bg-gray-100 hover:!bg-gray-200","data-testid":"add-category-btn","aria-label":"Add category"}),d&&(0,i.jsx)(n.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,i.jsx)(o.l,{selectedTaxonomies:t,onChange:e=>{c(!1),a(e)},onBlur:()=>c(!1),open:d})})]})}},74588:function(e,t,a){"use strict";a.d(t,{l:function(){return d}});var i=a(24246),n=a(69746),l=a(19310),o=a(55372),s=a.n(o);let r=e=>{let{data:t}=e;return(0,i.jsxs)(n.jqI,{gap:12,title:"".concat(t.primaryName||"").concat(t.primaryName?": ":"").concat(t.name," - ").concat(t.description),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:t.primaryName||t.name}),t.primaryName&&": ".concat(t.name)]}),(0,i.jsx)("em",{children:t.description})]})},d=e=>{let{selectedTaxonomies:t,showDisabled:a=!1,...o}=e,{getDataCategoryDisplayNameProps:d,getDataCategories:c}=(0,l.Z)(),u=(a?c():c().filter(e=>e.active)).filter(e=>!t.includes(e.fides_key)).map(e=>{let{name:t,primaryName:a}=d(e.fides_key);return{value:e.fides_key,name:t,primaryName:a,description:e.description||"",className:s().option}});return(0,i.jsx)(n.WPr,{autoFocus:!0,showSearch:!0,variant:"borderless",placeholder:"Select a category...",options:u,optionRender:r,dropdownStyle:{minWidth:"500px"},className:"w-full p-0","data-testid":"taxonomy-select",...o})}},19310:function(e,t,a){"use strict";var i=a(24246),n=a(64925),l=a.n(n),o=a(27378),s=a(44296),r=a(91650),d=a(79851),c=a(47411);let u=()=>{let{isLoading:e}=(0,d.fd)(),t=(0,s.C)(d.U3),{isLoading:a}=(0,c.MO)(),i=(0,s.C)(c.qb),{isLoading:n}=(0,r.te)();return{dataUses:t,dataSubjects:(0,s.C)(r.ZL),dataCategories:i,isLoading:e||a||n}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:a,isLoading:n}=u(),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},r=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return{};let n=t(s(e,a)),l=!!i.parent_key;return{name:i.name||void 0,primaryName:l&&(null==n?void 0:n.name)!==i.name&&(null==n?void 0:n.name)||void 0}},d=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:n,primaryName:l}=r(e,t,a);return n?l?(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)("strong",{children:[l,":"]})," ",n]},e):(0,i.jsx)("strong",{children:n},e):e},c=t=>l()(e,{fides_key:t}),m=e=>l()(t,{fides_key:e}),p=e=>l()(a,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:c,getDataUseDisplayName:e=>d(e,c,1),getDataCategories:()=>t,getDataCategoryByKey:m,getDataCategoryDisplayName:e=>d(e,m,2),getDataCategoryDisplayNameProps:e=>r(e,m,2),getDataSubjects:()=>a,getDataSubjectByKey:p,getDataSubjectDisplayName:e=>{let t=p(e);return t?t.name:e},getPrimaryKey:s,isLoading:n}}},89955:function(e,t,a){"use strict";var i=a(24246),n=a(69746),l=a(30454),o=a.n(l),s=a(47215),r=a.n(s),d=a(90271),c=a.n(d),u=a(57311),m=a(435),p=a(14529),x=a(5067);t.Z=e=>{let{field:t,isOpen:a,onClose:l,dataset:s,collectionName:d,subfields:f}=e,[g]=(0,m.TG)(),{isOpen:h,onOpen:v,onClose:j}=(0,n.qY0)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.ZP,{isOpen:a,onClose:l,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,i.jsx)(u.zR,{title:"Field Name: ".concat(null==t?void 0:t.name)}),footer:(0,i.jsx)(u.Gn,{onClose:l,onDelete:v,formId:p.e}),children:(0,i.jsx)(p.Z,{values:t,onSubmit:e=>{let a=(0,x.Fk)({dataset:s,collectionName:d,subfields:f?[...f,(null==t?void 0:t.name)||""]:[(null==t?void 0:t.name)||""]}),i={...t,...e},n=o()(s);r()(n,a,i),g(n),l()},dataType:"field"})}),(0,i.jsx)(n.cVQ,{isOpen:h,onClose:j,onConfirm:()=>{let e=(0,x.Fk)({dataset:s,collectionName:d,subfields:f}),a=o()(s);c()(a,e,e=>({...e,fields:e.fields.filter(e=>e.name!==(null==t?void 0:t.name))})),g(a),l(),j()},title:"Delete Field",message:(0,i.jsxs)(n.xvT,{children:["You are about to permanently delete the field named"," ",(0,i.jsx)(n.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})}},49674:function(e,t,a){"use strict";a.r(t);var i=a(24246),n=a(92222),l=a(59003),o=a(69746),s=a(30454),r=a.n(s),d=a(47215),c=a.n(d),u=a(86677),m=a(27378),p=a(90824),x=a(62257),f=a(60262),g=a(29137),h=a(43124),v=a(11032),j=a(37541),b=a(8540),y=a(19906),C=a(52987),w=a(39006),N=a(89955),V=a(5067);let k=(0,n.Cl)(),_=()=>(0,i.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,i.jsx)(o.gCW,{children:(0,i.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,u.useRouter)(),[t]=(0,C.TG)(),a=decodeURIComponent(e.query.datasetId),s=decodeURIComponent(e.query.collectionName),d=e.query.subfieldNames.map(decodeURIComponent),{isLoading:H,data:Z}=(0,C.oM)(a),M=(0,m.useMemo)(()=>(null==Z?void 0:Z.collections)||[],[Z]).find(e=>e.name===s),R=(0,m.useMemo)(()=>(null==M?void 0:M.fields)||[],[M]),S=(0,m.useMemo)(()=>{let e=R;return d.forEach(t=>{let a=e.find(e=>e.name===t);e=(null==a?void 0:a.fields)||[]}),e},[R,d]),[T,I]=(0,m.useState)(),D=(0,m.useCallback)(e=>{let{dataCategory:a,field:i}=e,n=i.data_categories||[],l=(0,V.Fk)({dataset:Z,collectionName:s,subfields:[...d,i.name]}),o=r()(Z);c()(o,"".concat(l,".data_categories"),[...n,a]),t(o)},[Z,t,s,d]),z=(0,m.useCallback)(e=>{let{dataCategory:a,field:i}=e,n=i.data_categories||[],l=(0,V.Fk)({dataset:Z,collectionName:s,subfields:[...d,null==i?void 0:i.name]}),o=r()(Z);c()(o,"".concat(l,".data_categories"),n.filter(e=>e!==a)),t(o)},[Z,t,s,d]),F=(0,m.useCallback)(t=>{let i=[...d.map(encodeURIComponent),t.name];e.push({pathname:v.y1,query:{datasetId:a,collectionName:s,subfieldNames:i}})},[a,e,s,d]),q=(0,m.useMemo)(()=>[k.accessor(e=>e.name,{id:"name",cell:e=>{var t;let a=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,i.jsx)(b.G3,{fontWeight:a?"semibold":"normal",value:e.getValue()})},header:e=>(0,i.jsx)(b.Rr,{value:"Field Name",...e}),size:180}),k.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,i.jsx)(b.A4,{value:e.getValue()}):(0,i.jsx)(b.G3,{value:void 0}),header:e=>(0,i.jsx)(b.Rr,{value:"Type",...e}),size:80}),k.accessor(e=>e.description,{id:"description",cell:e=>(0,i.jsx)(b.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,i.jsx)(b.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),k.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var t;let a=e.row.original;return!(e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0)&&(0,i.jsx)(y.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>D({dataCategory:e,field:a}),onRemoveTaxonomy:e=>z({dataCategory:e,field:a})})},header:e=>(0,i.jsx)(b.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),k.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,i.jsx)(o.Ugi,{spacing:0,"data-testid":"field-".concat(a.name),children:(0,i.jsx)(o.wpx,{size:"small",icon:(0,i.jsx)(o.dY8,{}),onClick:()=>{P(a),W(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[D,z]),U=(0,m.useMemo)(()=>T?S.filter(e=>e.name.toLowerCase().includes(T.toLowerCase())):S,[S,T]),E=(0,l.b7)({getCoreRowModel:(0,n.sC)(),getFilteredRowModel:(0,n.vL)(),getSortedRowModel:(0,n.tj)(),columns:q,data:U,columnResizeMode:"onChange"}),[O,W]=(0,m.useState)(!1),[L,P]=(0,m.useState)(),A=(0,m.useMemo)(()=>{let e=[{title:"All datasets",icon:(0,i.jsx)(p.V,{boxSize:4}),link:v.$m},{title:a,link:{pathname:v.o5,query:{datasetId:a}},icon:(0,i.jsx)(x.l,{boxSize:5})},{title:s,icon:(0,i.jsx)(g.$,{boxSize:5}),link:{pathname:v.RF,query:{datasetId:a,collectionName:s}}}];return d.forEach((t,n)=>{e.push({title:t,link:n<d.length-1?{pathname:v.y1,query:{datasetId:a,collectionName:s,subfieldNames:d.slice(0,n+1).map(encodeURIComponent)}}:void 0,icon:(0,i.jsx)(f.f,{boxSize:5})})}),e},[a,s,d]);return(0,i.jsxs)(h.Z,{title:"Dataset - ".concat(a),mainProps:{paddingTop:0},children:[(0,i.jsx)(j.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,i.jsx)(w.Z,{breadcrumbs:A})}),H?(0,i.jsx)(b.I4,{rowHeight:36,numRows:15}):(0,i.jsxs)(o.xuv,{"data-testid":"fields-table",children:[(0,i.jsx)(b.Q$,{children:(0,i.jsx)(b.HO,{globalFilter:T,setGlobalFilter:I,placeholder:"Search",testid:"fields-search"})}),(0,i.jsx)(b.ZK,{tableInstance:E,emptyTableNotice:(0,i.jsx)(_,{}),onRowClick:F,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,i.jsx)(N.Z,{isOpen:O,onClose:()=>{W(!1),P(void 0)},field:L,dataset:Z,collectionName:s,subfields:d})]})]})}},55372:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[8033,6451,4554,2866,9278,1995,8540,4919,2888,9774,179],function(){return e(e.s=16383)}),_N_E=e.O()}]);