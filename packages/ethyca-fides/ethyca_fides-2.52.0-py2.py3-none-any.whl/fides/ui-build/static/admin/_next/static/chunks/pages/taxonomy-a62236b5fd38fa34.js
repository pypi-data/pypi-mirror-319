(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4202],{71180:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/taxonomy",function(){return n(69346)}])},81836:function(e,t,n){"use strict";var r=n(24246),i=n(27378),s=n(69746),l=n(79894),a=n.n(l);t.Z=e=>{let{breadcrumbs:t,fontSize:n="2xl",fontWeight:l="semibold",separator:o="->",lastItemStyles:d={color:"black"},normalItemStyles:u={color:"gray.500"},...c}=e;return(0,r.jsx)(s.aGc,{separator:o,fontSize:n,fontWeight:l,"data-testid":"breadcrumbs",...c,children:t.map((e,n)=>{let l=n+1===t.length;return e.title?(0,i.createElement)(s.gN6,{...u,...l?d:{},key:e.title,children:[(null==e?void 0:e.icon)&&(0,r.jsx)(s.xuv,{mr:2,children:e.icon}),e.link?(0,r.jsx)(s.Atw,{as:a(),href:e.link,isCurrentPage:l,children:e.title}):(0,r.jsx)(s.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:l,children:e.title})]}):null})})}},57311:function(e,t,n){"use strict";n.d(t,{Gn:function(){return a},zR:function(){return l}});var r=n(24246),i=n(69746),s=n(79711);let l=e=>{let{title:t}=e;return(0,r.jsx)(i.OXI,{py:0,display:"flex",alignItems:"flex-start",children:(0,r.jsx)(i.xvT,{mr:"2",color:"gray.700",fontSize:"lg",lineHeight:1.8,children:t})})},a=e=>{let{onDelete:t,onEditYaml:n,formId:l,isSaving:a}=e;return(0,r.jsxs)(i.zeN,{justifyContent:"space-between",children:[t?(0,r.jsx)(i.wpx,{"aria-label":"delete",icon:(0,r.jsx)(s.q,{fontSize:"small"}),onClick:t,"data-testid":"delete-btn"}):null,(0,r.jsxs)("div",{className:"flex gap-2",children:[n&&(0,r.jsx)(i.wpx,{onClick:n,"data-testid":"edit-yaml-btn",children:"Edit YAML"}),(0,r.jsx)(i.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",form:l,loading:a,children:"Save"})]})]})};t.ZP=e=>{let{header:t,description:n,isOpen:s,onClose:l,children:a,footer:o}=e;return(0,r.jsxs)(i.dys,{placement:"right",isOpen:s,onClose:l,size:"md",children:[(0,r.jsx)(i.P1B,{}),(0,r.jsxs)(i.scA,{"data-testid":"edit-drawer-content",py:2,children:[(0,r.jsxs)(i.xuv,{display:"flex",justifyContent:"space-between",alignItems:"top",mr:2,py:2,gap:2,children:[(0,r.jsx)(i.xuv,{flex:1,minH:8,children:t}),(0,r.jsx)(i.xuv,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,r.jsx)(i.wpx,{"aria-label":"Close editor",onClick:l,"data-testid":"close-drawer-btn",icon:(0,r.jsx)(i.Two,{fontSize:"smaller"})})})]}),(0,r.jsxs)(i.Ng0,{pt:1,children:[n?(0,r.jsx)(i.xvT,{fontSize:"sm",mb:4,color:"gray.600",children:n}):null,a]}),o]})]})}},58665:function(e,t,n){"use strict";var r=n(24246),i=n(69746);t.Z=e=>{let{...t}=e;return(0,r.jsx)(i.kCb,{boxSize:"full",align:"center",justify:"center",children:(0,r.jsx)(i.$jN,{color:"primary",...t})})}},79711:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var r=n(24246);let i=(0,n(69746).IUT)({displayName:"TrashCanOutlineIcon",viewBox:"0 0 11 12",path:(0,r.jsx)("path",{d:"M4.5166 1.60859L4.1084 2.21875H7.22363L6.81543 1.60859C6.7832 1.56133 6.72949 1.53125 6.67148 1.53125H4.6584C4.60039 1.53125 4.54668 1.55918 4.51445 1.60859H4.5166ZM7.6748 1.03711L8.46328 2.21875H8.75977H9.79102H9.96289C10.2486 2.21875 10.4785 2.44863 10.4785 2.73438C10.4785 3.02012 10.2486 3.25 9.96289 3.25H9.79102V9.78125C9.79102 10.7309 9.02188 11.5 8.07227 11.5H3.25977C2.31016 11.5 1.54102 10.7309 1.54102 9.78125V3.25H1.36914C1.0834 3.25 0.853516 3.02012 0.853516 2.73438C0.853516 2.44863 1.0834 2.21875 1.36914 2.21875H1.54102H2.57227H2.86875L3.65723 1.03496C3.88066 0.701953 4.25664 0.5 4.6584 0.5H6.67148C7.07324 0.5 7.44922 0.701953 7.67266 1.03496L7.6748 1.03711ZM2.57227 3.25V9.78125C2.57227 10.1615 2.87949 10.4688 3.25977 10.4688H8.07227C8.45254 10.4688 8.75977 10.1615 8.75977 9.78125V3.25H2.57227ZM4.29102 4.625V9.09375C4.29102 9.28281 4.13633 9.4375 3.94727 9.4375C3.7582 9.4375 3.60352 9.28281 3.60352 9.09375V4.625C3.60352 4.43594 3.7582 4.28125 3.94727 4.28125C4.13633 4.28125 4.29102 4.43594 4.29102 4.625ZM6.00977 4.625V9.09375C6.00977 9.28281 5.85508 9.4375 5.66602 9.4375C5.47695 9.4375 5.32227 9.28281 5.32227 9.09375V4.625C5.32227 4.43594 5.47695 4.28125 5.66602 4.28125C5.85508 4.28125 6.00977 4.43594 6.00977 4.625ZM7.72852 4.625V9.09375C7.72852 9.28281 7.57383 9.4375 7.38477 9.4375C7.1957 9.4375 7.04102 9.28281 7.04102 9.09375V4.625C7.04102 4.43594 7.1957 4.28125 7.38477 4.28125C7.57383 4.28125 7.72852 4.43594 7.72852 4.625Z",fill:"currentColor"})})},43124:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(24246),i=n(69746),s=n(88038),l=n.n(s),a=n(86677);n(27378);var o=n(11596),d=n(72247),u=n(11032),c=()=>{let e=(0,a.useRouter)();return(0,r.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(i.xuv,{children:[(0,r.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(i.wpx,{onClick:()=>{e.push(u.fz)},children:"Configure"})]}),(0,r.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},x=e=>{let{children:t,title:n,padded:s=!0,mainProps:u}=e,x=(0,o.hz)(),m=(0,a.useRouter)(),f="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,p=!(x.flags.privacyRequestsConfiguration&&f),{data:y}=(0,d.JE)(void 0,{skip:p}),{data:h}=(0,d.PW)(void 0,{skip:p}),v=x.flags.privacyRequestsConfiguration&&(!y||!h)&&f;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(l(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(i.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[v?(0,r.jsx)(c,{}):null,t]})]})}},37541:function(e,t,n){"use strict";var r=n(24246),i=n(69746),s=n(19785),l=n.n(s),a=n(27378),o=n(81836);t.Z=e=>{let{breadcrumbs:t,isSticky:n=!0,children:s,rightContent:d,...u}=e;return(0,r.jsxs)(i.xuv,{bgColor:"white",paddingY:5,...n?{position:"sticky",top:0,left:0,zIndex:10}:{},...u,children:[(0,r.jsxs)(i.kCb,{alignItems:"flex-start",children:[(0,r.jsxs)(i.xuv,{flex:1,children:[l()(t)&&(0,r.jsx)(i.xuv,{marginBottom:s?4:0,children:(0,r.jsx)(o.Z,{breadcrumbs:t})}),(0,a.isValidElement)(t)&&t]}),d&&(0,r.jsx)(i.xuv,{children:d})]}),s]})}},60136:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return x},Ot:function(){return d},c6:function(){return i},cj:function(){return f},e$:function(){return a},fn:function(){return o},iC:function(){return m},nU:function(){return c},tB:function(){return u}});var r,i,s=n(41164);let l="An unexpected error occurred. Please try again.",a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function o(e){return"object"==typeof e&&null!=e&&"status"in e}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function u(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:l};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:n}=e;return{status:n,message:a(e,t.message)}}return t},x=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=i||(i={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let m={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},f=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},16781:function(e,t,n){"use strict";n.d(t,{MA:function(){return a},Vo:function(){return d},t5:function(){return o}});var r=n(24246),i=n(69746);let s=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",t]})},l=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})},a={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},o=e=>{let t=(0,r.jsx)(s,{children:e});return{...a,description:t}},d=e=>{let t=(0,r.jsx)(l,{children:e});return{...a,description:t,status:"error"}}},91311:function(e,t,n){"use strict";var r,i;n.d(t,{C:function(){return s},L:function(){return r}});let s="root";(i=r||(r={})).DATA_CATEGORIES="Data categories",i.DATA_USES="Data uses",i.DATA_SUBJECTS="Data subjects"},62091:function(e,t,n){"use strict";n.d(t,{Cd:function(){return s},Xl:function(){return l}});var r=n(10284),i=n(91311);let s=(e,t)=>{let n;if(null==t&&e.every(e=>void 0===e.parent_key))n=e;else{let r=null!=t?t:null;n=e.filter(e=>e.parent_key===r)}return n.map(t=>{var n,r;let i=t.fides_key;return{value:t.fides_key,label:""===t.name||null==t.name?t.fides_key:t.name,description:t.description,children:s(e,i),is_default:null!==(n=t.is_default)&&void 0!==n&&n,active:null!==(r=t.active)&&void 0!==r&&r}})},l=e=>{switch(e){case i.L.DATA_CATEGORIES:return r.P6.DATA_CATEGORY;case i.L.DATA_SUBJECTS:return r.P6.DATA_SUBJECT;case i.L.DATA_USES:return r.P6.DATA_USE;default:return}}},69346:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return en}});var r,i,s=n(24246),l=n(69746),a=n(69238),o=n.n(a),d=n(63662),u=n(27378),c=n(60136),x=n(43124),m=n(37541),f=n(16781),p=n(37827),y=n(79711),h=n(43073),v=n(57311),g=n(62091),j=n(91650),_=n(79851),C=n(91311),b=n(35249),T=e=>{let{taxonomyType:t}=e,[n,r]=(0,b.Vj)(),[i,s]=(0,j.nC)(),[l,a]=(0,_.dk)(),[o]=(0,b.Ti)(),[d]=(0,_.Ql)(),[u]=(0,j.wG)(),[c]=(0,b.jU)(),[x]=(0,_.LG)(),[m]=(0,j.h8)(),[f]=(0,b.K9)(),[p]=(0,_.gu)(),[y]=(0,j.Kv)();return t===C.L.DATA_SUBJECTS?{getAllTrigger:i,taxonomyItems:s.data||[],updateTrigger:m,deleteTrigger:y,createTrigger:u}:t===C.L.DATA_USES?{getAllTrigger:l,taxonomyItems:a.data||[],updateTrigger:x,deleteTrigger:p,createTrigger:d}:{getAllTrigger:n,taxonomyItems:r.data||[],updateTrigger:c,deleteTrigger:f,createTrigger:o}},E=n(90104),I=n.n(E),A=n(58665),S=n(10284),N=e=>{let{customFields:t,formId:n,form:r}=e,{idToAllowListWithOptions:i,idToCustomFieldDefinition:a,isEnabled:o,isLoading:d,sortedCustomFieldDefinitionIds:u}=t;return o&&0!==u.length?(0,s.jsxs)(l.PPS,{form:r,name:n,initialValues:t.customFieldValues,layout:"vertical","data-testid":"custom-fields-form",children:[(0,s.jsx)(l.AntTypography.Title,{level:5,children:"Custom fields"}),d?(0,s.jsx)(A.Z,{}):(0,s.jsx)("div",{children:!I()(u)&&(0,s.jsx)("div",{children:u.map(e=>{let t=a.get(e);if(!t)return null;let{id:n,name:r,description:o,allow_list_id:d,field_type:u}=t;if(!d&&u===S.AL.STRING)return(0,s.jsx)(l.PPS.Item,{name:n,label:r,tooltip:o,children:(0,s.jsx)(l.uFc,{})},e);let c=i.get(t.allow_list_id);if(!c)return null;let{options:x}=c;return(0,s.jsx)(l.PPS.Item,{name:n,label:r,tooltip:o,children:(0,s.jsx)(l.WPr,{mode:"string"!==u?"multiple":void 0,allowClear:!0,options:x})},e)})})})]}):null},k=n(43551),w=n.n(k),P=()=>{let e=l.PPS.useFormInstance(),t=l.PPS.useWatch(["rights","values"],e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.PPS.Item,{label:"Automated Decisions or Profiling",name:"automated_decisions_or_profiling",layout:"horizontal",valuePropName:"checked",children:(0,s.jsx)(l.E_O,{"data-testid":"edit-taxonomy-form_automated-decisions"})}),(0,s.jsx)(l.PPS.Item,{name:["rights","values"],label:"Rights",children:(0,s.jsx)(l.WPr,{mode:"multiple",options:(0,c.MM)(S.ts),"data-testid":"edit-taxonomy-form_rights"})}),t&&!I()(t)&&(0,s.jsx)(l.PPS.Item,{name:["rights","strategy"],label:"Strategy",required:!0,rules:[{required:!0,message:"Please select a strategy"}],children:(0,s.jsx)(l.WPr,{options:(0,c.MM)(S.jX),"data-testid":"edit-taxonomy-form_strategy"})})]})},O=e=>{let{initialValues:t,onSubmit:n,form:r,formId:i,taxonomyType:a}=e,o=a===C.L.DATA_SUBJECTS;return(0,s.jsxs)(l.PPS,{name:i,initialValues:t,onFinish:e=>{var r,i;let s={...t,...e};(!(null==s?void 0:null===(r=s.rights)||void 0===r?void 0:r.values)||I()(null==s?void 0:null===(i=s.rights)||void 0===i?void 0:i.values))&&w()(s,"rights"),n(s)},layout:"vertical",form:r,children:[(0,s.jsx)(l.PPS.Item,{label:"Name",name:"name",children:(0,s.jsx)(l.uFc,{"data-testid":"edit-taxonomy-form_name"})}),(0,s.jsx)(l.PPS.Item,{label:"Description",name:"description",children:(0,s.jsx)(l.uFc.TextArea,{rows:4,"data-testid":"edit-taxonomy-form_description"})}),o&&(0,s.jsx)(P,{})]})},V=e=>{let{taxonomyItem:t,taxonomyType:n,onClose:r}=e,i="edit-taxonomy-form",[a]=l.PPS.useForm(),[o]=l.PPS.useForm(),d=(0,l.pmc)(),{isOpen:u,onOpen:x,onClose:m}=(0,l.qY0)(),{updateTrigger:j}=T({taxonomyType:n}),_=(0,p.mZ)({resourceFidesKey:null==t?void 0:t.fides_key,resourceType:(0,g.Xl)(n)}),C=async e=>{let n=await j(e);if((0,h.D4)(n)){d((0,f.Vo)((0,c.e$)(n.error)));return}if(_.isEnabled){let e=o.getFieldsValue();await _.upsertCustomFields({fides_key:null==t?void 0:t.fides_key,customFieldValues:e})}d((0,f.t5)("Taxonomy successfully updated")),r()},b=async()=>{await j({...t,active:!1}),m(),r()},E=async()=>{await j({...t,active:!0}),m(),r()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v.ZP,{isOpen:!!t,onClose:r,header:(0,s.jsx)(v.zR,{title:(null==t?void 0:t.name)||""}),footer:(0,s.jsxs)(l.zeN,{justifyContent:"space-between",children:[(null==t?void 0:t.active)?(0,s.jsx)(l.esZ,{title:"Delete label",children:(0,s.jsx)(l.wpx,{"aria-label":"delete",icon:(0,s.jsx)(y.q,{fontSize:"small"}),onClick:x,"data-testid":"delete-btn"})}):(0,s.jsx)(l.esZ,{title:"Enable label",children:(0,s.jsx)(l.wpx,{"aria-label":"enable",onClick:E,"data-testid":"enable-btn",icon:(0,s.jsx)(l.tEF,{fontSize:"small"})})}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(l.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",form:i,children:"Save"})})]}),children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(l.AntTypography.Title,{level:5,children:"Details"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"w-1/3 shrink-0 text-sm text-gray-500",children:"Fides key:"}),(0,s.jsx)(l.esZ,{title:null==t?void 0:t.fides_key,trigger:"click",children:(0,s.jsx)("span",{className:"flex-1 truncate","data-testid":"edit-drawer-fides-key",children:null==t?void 0:t.fides_key})})]})]}),!!t&&(0,s.jsx)(O,{initialValues:t,onSubmit:C,form:a,formId:i,taxonomyType:n}),_.isEnabled&&!_.isLoading&&(0,s.jsx)(N,{form:o,formId:"custom-fields-form",customFields:_})]}),(0,s.jsx)(l.cVQ,{isOpen:u,onClose:m,onConfirm:b,title:"Delete ".concat(n),message:(0,s.jsx)(l.Kqy,{children:(0,s.jsxs)(l.xvT,{children:["You are about to permanently delete the ",n," ",(0,s.jsx)(l.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from your taxonomy. Are you sure you would like to continue?"]})})})]})};n(20744);var L=n(11265),D=n(18121),R=n.n(D);(r=i||(i={})).DEFAULT="DEFAULT",r.ACTIVE_HOVER="ACTIVE_HOVER",r.PARENT_OF_HOVER="PARENT_OF_HOVER",r.CHILD_OF_HOVER="CHILD_OF_HOVER",r.SIBLING_OF_HOVER="SIBLING_OF_HOVER",r.INACTIVE="INACTIVE";let F=(0,u.createContext)({activeNodeKey:null,setActiveNodeKey:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},getNodeHoverStatus:()=>"DEFAULT"}),H=e=>{let{children:t}=e,[n,r]=(0,u.useState)(null),i=(0,u.useCallback)(e=>{e!==n&&r(e)},[n]),l=(0,u.useCallback)(()=>{r(null)},[]),a=(0,u.useCallback)(e=>n?e===n?"ACTIVE_HOVER":n.startsWith("".concat(e,"."))||e===C.C?"PARENT_OF_HOVER":e.startsWith("".concat(n,"."))||n===C.C?"CHILD_OF_HOVER":n.split(".").slice(0,-1).join(".")===e.split(".").slice(0,-1).join(".")?"SIBLING_OF_HOVER":"INACTIVE":"DEFAULT",[n]),o=(0,u.useMemo)(()=>({activeNodeKey:n,setActiveNodeKey:r,onMouseEnter:i,onMouseLeave:l,getNodeHoverStatus:a}),[n,r,i,l,a]);return(0,s.jsx)(F.Provider,{value:o,children:t})};var M=n(62266),U=n(79658);let z=(0,M.Z)();var Z=e=>{let{nodes:t,edges:n,options:r}=e;return(0,u.useMemo)(()=>{if(0===t.length)return{nodes:t,edges:n};let e=(0,U.Z)().id(e=>e.id).parentId(e=>{var t;return null===(t=n.find(t=>t.target===e.id))||void 0===t?void 0:t.source})(t),i="LR"===r.direction?[35,320]:[320,35];return{nodes:z.nodeSize(i).separation((e,t)=>e.parent===t.parent?1:1.5)(e).descendants().map(e=>{let t;return t="LR"===r.direction?{x:e.y,y:e.x}:{x:e.x,y:e.y},{...e.data,position:t}}),edges:n}},[t,n,r])},B=e=>{let{positionAbsoluteX:t,positionAbsoluteY:n,nodeWidth:r}=e,{setCenter:i,getZoom:s}=(0,L._K)();return{centerScreenOnNode:(0,u.useCallback)(()=>i(t+r/2,n,{duration:500,zoom:s()}),[s,t,n,r,i])}},G=n(25238),q=n.n(G),K=n(46080),W=e=>{let{type:t,inactive:n=!1}=e;return(0,s.jsx)(L.HH,{type:t,position:"source"===t?K.Ly.Right:K.Ly.Left,style:{width:8,height:8,backgroundColor:n?R().FIDESUI_NEUTRAL_400:R().FIDESUI_MINOS},className:"transition-colors duration-300 ease-in"})},X=e=>{let{data:t,positionAbsoluteX:n,positionAbsoluteY:r}=e,{onCancel:i,onSubmit:a,parentKey:o}=t,d=(0,u.useRef)(null),[c,x]=(0,u.useState)(""),{centerScreenOnNode:m}=B({positionAbsoluteX:n,positionAbsoluteY:r,nodeWidth:200});return(0,u.useEffect)(()=>{x("");let e=()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.focus({cursor:"start",preventScroll:!0})};(async()=>{await m(),e()})()},[o,m,n,r]),(0,s.jsxs)("div",{style:{width:200},"data-testid":"taxonomy-text-input-node",children:[(0,s.jsx)(l.uFc,{placeholder:"Type label name...",ref:d,onBlur:i,onSubmit:()=>a(c),value:c,onChange:e=>x(e.target.value),onKeyUp:e=>{"Escape"===e.key&&i()},onPressEnter:()=>a(c),className:q().input}),(0,s.jsx)(W,{type:"target"})]})},J=e=>{let{getNodeHoverStatus:t}=(0,u.useContext)(F),{target:n}=e,r=t(n),l=(0,u.useCallback)(()=>{switch(r){case i.ACTIVE_HOVER:case i.PARENT_OF_HOVER:return R().FIDESUI_MINOS;case i.INACTIVE:return R().NEUTRAL_400;default:return R().FIDESUI_SANDSTONE}},[r]),a=(0,u.useCallback)(()=>{switch(r){case i.ACTIVE_HOVER:case i.PARENT_OF_HOVER:return 2;default:return 1}},[r]);return(0,s.jsx)(L.Jd,{...e,style:{stroke:l(),strokeWidth:a(),transition:"stroke 0.3s ease 0s"}})},Y=n(54718),$=n.n(Y),Q=e=>{let{data:t,positionAbsoluteX:n,positionAbsoluteY:r}=e,{onMouseEnter:a,onMouseLeave:o,getNodeHoverStatus:d}=(0,u.useContext)(F),{taxonomyType:c,taxonomyItem:x,onAddButtonClick:m,onTaxonomyItemClick:f,label:p,hasChildren:y,isLastCreatedItem:h,resetLastCreatedItemKey:v}=t,{centerScreenOnNode:g}=B({positionAbsoluteX:n,positionAbsoluteY:r,nodeWidth:200});(0,u.useEffect)(()=>{let e=async()=>{await g(),a(null==x?void 0:x.fides_key)};h&&(e(),v())},[h,a,null==x?void 0:x.fides_key,v,g]);let j=d(null==x?void 0:x.fides_key),_=(0,u.useCallback)(()=>{switch(j){case i.ACTIVE_HOVER:return $()["button--hover"];case i.PARENT_OF_HOVER:return $()["button--parent-hover"];case i.INACTIVE:return $()["button--inactive"];case i.DEFAULT:case i.CHILD_OF_HOVER:case i.SIBLING_OF_HOVER:default:return""}},[j]),b=(null==x?void 0:x.fides_key)===C.C,T=c===C.L.DATA_SUBJECTS;return(0,s.jsxs)("div",{className:$().container,onMouseEnter:()=>a(null==x?void 0:x.fides_key),onMouseLeave:()=>o(null==x?void 0:x.fides_key),"data-testid":"taxonomy-node-".concat(null==x?void 0:x.fides_key),children:[(0,s.jsx)(l.wpx,{className:"".concat($().button," ").concat(_()),onClick:()=>null==f?void 0:f(x),disabled:!f,type:"text",children:(0,s.jsxs)(l.AntTypography.Text,{ellipsis:!0,style:{color:"inherit"},children:[(null==x?void 0:x.active)===!1?"(disabled) ":"",p]})}),!b&&(0,s.jsx)(W,{type:"target",inactive:j===i.INACTIVE}),y&&(0,s.jsx)(W,{type:"source",inactive:j===i.INACTIVE}),(!T||b)&&(0,s.jsx)("div",{className:$()["add-button-container"],children:(0,s.jsx)(l.wpx,{type:"default",className:"".concat($()["add-button"]," ").concat(j===i.ACTIVE_HOVER?$()["add-button--visible"]:""),icon:(0,s.jsx)(l.PJP.mm_,{size:20}),onClick:()=>null==m?void 0:m(x),size:"middle","data-testid":"taxonomy-add-child-label-button","aria-label":"Add child label to ".concat(p)})})]})};let ee=e=>{let{taxonomyType:t,taxonomyItems:n,draftNewItem:r,lastCreatedItemKey:i,resetLastCreatedItemKey:l,onTaxonomyItemClick:a,onAddButtonClick:o,onCancelDraftItem:d,onSubmitDraftItem:c}=e,{fitView:x}=(0,L._K)();(0,u.useEffect)(()=>{setTimeout(()=>x(),150)},[x,t]);let m=[(0,u.useMemo)(()=>({id:C.C,position:{x:0,y:0},data:{label:t,taxonomyItem:{fides_key:C.C},taxonomyType:t,onTaxonomyItemClick:null,onAddButtonClick:o,hasChildren:0!==n.length},type:"taxonomyTreeNode"}),[t,n.length,o])],f=[];if(n.forEach(e=>{let n=e.name||e.fides_key.split(".").pop()||"",r={id:e.fides_key,position:{x:0,y:0},data:{label:n,taxonomyType:t,taxonomyItem:e,onTaxonomyItemClick:a,onAddButtonClick:o,hasChildren:!1,isLastCreatedItem:i===e.fides_key,resetLastCreatedItemKey:l},type:"taxonomyTreeNode"};m.push(r);let s=e.parent_key?m.find(t=>t.id===e.parent_key):null,d=s?s.id:C.C,u=e.fides_key,c={id:"".concat(d,"-").concat(u),source:d,target:u,type:"taxonomyTreeEdge"};f.push(c),s&&(s.data.hasChildren=!0)}),r){let e=r.parent_key||C.C;m.push({id:"draft-node",position:{x:0,y:0},type:"textInputNode",data:{parentKey:e,onCancel:d,onSubmit:c},hidden:!r}),f.push({id:"draft-line",source:e,target:"draft-node",animated:!0});let t=m.find(t=>t.id===e);t&&(t.data.hasChildren=!0)}let{nodes:p,edges:y}=Z({nodes:m,edges:f,options:{direction:"LR"}}),h=(0,u.useMemo)(()=>({taxonomyTreeNode:Q,textInputNode:X}),[]),v=(0,u.useMemo)(()=>({taxonomyTreeEdge:J}),[]);return(0,s.jsx)("div",{className:"size-full",style:{backgroundColor:R().FIDESUI_BG_CORINTH},"data-testid":"taxonomy-interactive-tree",children:(0,s.jsx)(H,{children:(0,s.jsxs)(L.x$,{nodes:p,edges:y,nodeTypes:h,edgeTypes:v,maxZoom:2,minZoom:.3,nodesConnectable:!1,edgesFocusable:!1,elementsSelectable:!1,proOptions:{hideAttribution:!0},children:[(0,s.jsx)(L.Aq,{color:R().FIDESUI_NEUTRAL_100,variant:L.T7.Dots,size:3}),(0,s.jsx)(L.a9,{nodeStrokeWidth:3,pannable:!0}),(0,s.jsx)(L.ZX,{showInteractive:!1})]})})})};var et=e=>(0,s.jsx)(L.tV,{children:(0,s.jsx)(ee,{...e})}),en=()=>{let[e,t]=(0,u.useState)(C.L.DATA_CATEGORIES),{createTrigger:n,getAllTrigger:r,taxonomyItems:i=[]}=T({taxonomyType:e}),a=(0,d.useSearchParams)(),p=(null==a?void 0:a.get("showDisabledItems"))==="true";(0,u.useEffect)(()=>{r()},[r,e]);let[y,h]=(0,u.useState)(null),[v,g]=(0,u.useState)(null),[j,_]=(0,u.useState)(null);(0,u.useEffect)(()=>{g(null),_(null),h(null)},[e]);let b=(0,l.pmc)(),E=(0,u.useCallback)(async e=>{if(!v)return;let t=(null==v?void 0:v.parent_key)===C.C,r={...v,name:e,parent_key:t?null:v.parent_key},i=await n(r);if((0,c.D4)(i)){b((0,f.Vo)((0,c.e$)(i.error)));return}_(i.data.fides_key),b((0,f.t5)("New label successfully created")),g(null)},[n,v,b]),I=o()(i,"active");return(0,s.jsxs)(x.Z,{title:"Taxonomy",mainProps:{padding:"0 40px 48px"},children:[(0,s.jsxs)(l.jqI,{vertical:!0,className:"h-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m.Z,{breadcrumbs:[{title:"Taxonomy"}]}),(0,s.jsx)("div",{className:"hidden",children:(0,s.jsx)("div",{className:"mb-5 flex justify-between",children:(0,s.jsxs)(l.vyj.Compact,{children:[(0,s.jsx)(l.uFc,{className:"min-w-[350px]",placeholder:"Search",allowClear:!0}),(0,s.jsx)(l.wpx,{type:"default",children:"Clear"})]})})})]}),(0,s.jsxs)("div",{className:"relative grow",children:[(0,s.jsx)("div",{className:"absolute left-2 top-2 z-[1]",children:(0,s.jsx)(l.AHg,{selectedKeys:[e],onSelect:e=>{let{key:n}=e;return t(n)},items:(0,c.MM)(C.L).map(e=>({label:e.label,key:e.value})),"data-testid":"taxonomy-type-selector"})}),!!i.length&&(0,s.jsx)(et,{taxonomyItems:p?i:I,draftNewItem:v,lastCreatedItemKey:j,resetLastCreatedItemKey:()=>_(null),onTaxonomyItemClick:e=>{h(e)},onAddButtonClick:e=>{var t;g({parent_key:null!==(t=null==e?void 0:e.fides_key)&&void 0!==t?t:null,is_default:!1,description:""})},taxonomyType:e,onCancelDraftItem:()=>g(null),onSubmitDraftItem:E})]})]}),y&&(0,s.jsx)(V,{taxonomyItem:y,taxonomyType:e,onClose:()=>h(null)})]})}},41164:function(e,t,n){"use strict";n.d(t,{Bw:function(){return l},D4:function(){return i},Dy:function(){return o},XD:function(){return d},cz:function(){return u},hE:function(){return a},oK:function(){return s}});var r=n(76649);let i=e=>"error"in e,s=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,l=e=>(0,r.Ln)({status:"number",data:{}},e),a=e=>(0,r.Ln)({detail:"string"},e),o=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),u=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},43073:function(e,t,n){"use strict";n.d(t,{Bw:function(){return r.Bw},D4:function(){return r.D4}});var r=n(41164)},25238:function(e){e.exports={input:"TaxonomyTextInputNode_input__P9czz"}},54718:function(e){e.exports={container:"TaxonomyTreeNode_container__T4KpF",button:"TaxonomyTreeNode_button__mcbOd","button--hover":"TaxonomyTreeNode_button--hover__oycXY","button--parent-hover":"TaxonomyTreeNode_button--parent-hover__pwAPl","button--inactive":"TaxonomyTreeNode_button--inactive__Fjdpe","add-button-container":"TaxonomyTreeNode_add-button-container__eEoRN","add-button":"TaxonomyTreeNode_add-button__oM2vI","add-button--visible":"TaxonomyTreeNode_add-button--visible__Ojqqf"}}},function(e){e.O(0,[1016,3662,4554,2866,9278,4734,7827,2888,9774,179],function(){return e(e.s=71180)}),_N_E=e.O()}]);