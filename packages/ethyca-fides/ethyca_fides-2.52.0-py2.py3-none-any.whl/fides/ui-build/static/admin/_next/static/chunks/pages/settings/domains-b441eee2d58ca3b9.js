(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9252],{98648:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/domains",function(){return n(28049)}])},14838:function(e,t,n){"use strict";var r=n(24246),i=n(69746);t.Z=e=>(0,r.jsx)(i.rUS,{isExternal:!0,color:"complimentary.500",...e})},43124:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(24246),i=n(69746),s=n(88038),a=n.n(s),o=n(86677);n(27378);var c=n(11596),l=n(72247),d=n(11032),u=()=>{let e=(0,o.useRouter)();return(0,r.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(i.xuv,{children:[(0,r.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(i.wpx,{onClick:()=>{e.push(d.fz)},children:"Configure"})]}),(0,r.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:n,padded:s=!0,mainProps:d}=e,m=(0,c.hz)(),g=(0,o.useRouter)(),f="/privacy-requests"===g.pathname||"/datastore-connection"===g.pathname,h=!(m.flags.privacyRequestsConfiguration&&f),{data:x}=(0,l.JE)(void 0,{skip:h}),{data:p}=(0,l.PW)(void 0,{skip:h}),v=m.flags.privacyRequestsConfiguration&&(!x||!p)&&f;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(a(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(i.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[v?(0,r.jsx)(u,{}):null,t]})]})}},51425:function(e,t,n){"use strict";var r=n(24246),i=n(69746),s=n(39514);t.Z=e=>{let{title:t,tooltip:n,children:a,...o}=e;return(0,r.jsxs)(i.xuv,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...o,children:[(0,r.jsxs)(i.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,n?(0,r.jsx)(i.xvT,{as:"span",mx:1,children:(0,r.jsx)(s.Z,{label:n})}):void 0]}),(0,r.jsx)(i.Kqy,{p:6,spacing:6,children:a})]})}},60136:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return m},Ot:function(){return l},c6:function(){return i},cj:function(){return f},e$:function(){return o},fn:function(){return c},iC:function(){return g},nU:function(){return u},tB:function(){return d}});var r,i,s=n(41164);let a="An unexpected error occurred. Please try again.",o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function c(e){return"object"==typeof e&&null!=e&&"status"in e}function l(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:n}=e;return{status:n,message:o(e,t.message)}}return t},m=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=i||(i={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let g={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},f=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},16781:function(e,t,n){"use strict";n.d(t,{MA:function(){return o},Vo:function(){return l},t5:function(){return c}});var r=n(24246),i=n(69746);let s=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",t]})},a=e=>{let{children:t}=e;return(0,r.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})},o={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},c=e=>{let t=(0,r.jsx)(s,{children:e});return{...o,description:t}},l=e=>{let t=(0,r.jsx)(a,{children:e});return{...o,description:t,status:"error"}}},28049:function(e,t,n){"use strict";n.r(t);var r=n(24246),i=n(69746),s=n(34090),a=n(59389),o=n(44296),c=n(14838),l=n(51425),d=n(34803),u=n(60136),m=n(43124),g=n(16781),f=n(72247);t.default=()=>{var e;let{isLoading:t}=(0,f.tB)({api_set:!0}),{isLoading:n}=(0,f.tB)({api_set:!1}),h=(0,o.C)(f.ak),x=h.apiSet,p=h.configSet,v=!!((null===(e=p.cors_origins)||void 0===e?void 0:e.length)||p.cors_origin_regex),j=(0,o.C)((0,f.U7)()),[y,{isLoading:b}]=(0,f.km)(),_=(0,i.pmc)(),w=e=>{if(!e||!(e.startsWith("https://")||e.startsWith("http://")))return!1;try{new URL(e)}catch(e){return!1}return!0},C=e=>!!e&&!e.includes("*"),k=e=>{if(!e)return!1;try{let t=new URL(e);return"/"===t.pathname&&!e.endsWith("/")}catch(e){return!1}},A=a.Ry().shape({cors_origins:a.IX().nullable().of(a.Z_().required().trim().test("is-valid-url",e=>{let{label:t}=e;return"".concat(t," must be a valid URL (e.g. https://example.com)")},e=>w(e)).test("has-no-wildcard",e=>{let{label:t}=e;return"".concat(t," cannot contain a wildcard (e.g. https://*.example.com)")},e=>C(e)).test("has-no-path",e=>{let{label:t}=e;return"".concat(t," cannot contain a path (e.g. https://example.com/path)")},e=>k(e)).label("Domain"))}),N=async(e,t)=>{let n=e.cors_origins&&e.cors_origins.length>0?e.cors_origins:void 0,r={...j,security:{cors_origins:n}};(n=>{if(_.closeAll(),(0,u.D4)(n)){let e=(0,u.e$)(n.error,"An unexpected error occurred while saving domains. Please try again.");_((0,g.Vo)(e))}else _((0,g.t5)("Domains saved successfully")),t.resetForm({values:e})})(await y(r))};return(0,r.jsx)(m.Z,{title:"Domains",children:(0,r.jsxs)(i.xuv,{"data-testid":"management-domains",children:[(0,r.jsx)(i.X6q,{marginBottom:4,fontSize:"2xl",children:"Domains"}),(0,r.jsx)(i.xuv,{maxWidth:"600px",children:(0,r.jsxs)(i.xvT,{marginBottom:3,fontSize:"sm",children:["For Fides to work on your website(s), each of your domains must be listed below. You can add and remove domains at any time up to the quantity included in your license. For more information on managing domains"," ",(0,r.jsx)(c.Z,{href:"https://fid.es/domain-configuration",children:"read here"}),"."]})}),(0,r.jsx)(i.xuv,{maxW:"600px",paddingY:3,children:(0,r.jsx)(l.Z,{"data-testid":"api-set-domains-form",title:"Organization domains",tooltip:"Fides uses these domains to enforce cross-origin resource sharing (CORS), a browser-based security standard. Each domain must be a valid URL (e.g. https://example.com) without any wildcards '*' or paths '/blog'",children:t||b?(0,r.jsx)(i.kCb,{justifyContent:"center",children:(0,r.jsx)(i.$jN,{})}):(0,r.jsx)(s.J9,{initialValues:x,enableReinitialize:!0,onSubmit:N,validationSchema:A,validateOnChange:!0,children:e=>{let{dirty:t,values:n,isValid:a}=e;return(0,r.jsxs)(s.l0,{children:[(0,r.jsx)(s.F2,{name:"cors_origins",render:e=>(0,r.jsxs)(i.kCb,{flexDir:"column",children:[n.cors_origins.map((t,n)=>(0,r.jsxs)(i.kCb,{flexDir:"row",my:3,children:[(0,r.jsx)(d.j0,{variant:"stacked",name:"cors_origins[".concat(n,"]"),placeholder:"https://subdomain.example.com:9090"}),(0,r.jsx)(i.wpx,{"aria-label":"delete-domain",className:"z-[2] ml-4",icon:(0,r.jsx)(i.pJl,{}),onClick:()=>{e.remove(n)}})]},n)),(0,r.jsx)(i.kCb,{justifyContent:"center",mt:3,children:(0,r.jsx)(i.wpx,{"aria-label":"add-domain",className:"w-full",onClick:()=>{e.push("")},children:"Add domain"})})]})}),(0,r.jsx)(i.xuv,{mt:6,children:(0,r.jsx)(i.wpx,{htmlType:"submit",type:"primary",disabled:b||!t||!a,loading:b,"data-testid":"save-btn",children:"Save"})})]})}})})}),(0,r.jsx)(i.xuv,{maxW:"600px",marginY:3,children:(0,r.jsx)(l.Z,{"data-testid":"config-set-domains-form",title:"Advanced settings",tooltip:"These domains are configured by an administrator with access to Fides security settings and can support more advanced options such as wildcards and regex.",children:n?(0,r.jsx)(i.kCb,{justifyContent:"center",children:(0,r.jsx)(i.$jN,{})}):(0,r.jsxs)(i.kCb,{flexDir:"column",children:[p.cors_origins.map((e,t)=>(0,r.jsx)(d.oi,{"data-testid":"input-config_cors_origins[".concat(t,"]"),marginY:3,value:e,isDisabled:!0,isPassword:!1},t)),p.cors_origin_regex?(0,r.jsx)(d.oi,{"data-testid":"input-config_cors_origin_regex",marginY:3,value:p.cors_origin_regex,isDisabled:!0,isPassword:!1},"cors_origin_regex"):void 0,v?void 0:(0,r.jsx)(i.xvT,{fontSize:"xs",color:"gray.500",children:"No advanced domain settings configured."})]})})})]})})}},41164:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return c},XD:function(){return l},cz:function(){return d},hE:function(){return o},oK:function(){return s}});var r=n(76649);let i=e=>"error"in e,s=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,a=e=>(0,r.Ln)({status:"number",data:{}},e),o=e=>(0,r.Ln)({detail:"string"},e),c=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),l=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r}});let r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?i in e?e.some(e=>s(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>s(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>s(n,t[e]));class a{static narrow(e){return new a(t=>r(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a(e=>t(e)&&n(e))}}new a(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=98648)}),_N_E=e.O()}]);