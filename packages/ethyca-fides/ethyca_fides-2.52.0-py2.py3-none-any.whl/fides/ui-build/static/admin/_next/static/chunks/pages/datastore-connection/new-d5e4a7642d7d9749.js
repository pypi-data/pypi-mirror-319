(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6050],{47201:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection/new",function(){return n(73002)}])},9862:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var s=n(24246),l=n(69746);let r=e=>{let{...t}=e,n="multiple"===t.mode;return(0,s.jsx)(l.WPr,{defaultActiveFirstOption:!1,maxTagCount:"responsive",allowClear:!0,dropdownStyle:n?void 0:{width:"auto",minWidth:"200px"},className:"w-auto","data-testid":"filter-select",...t})}},73002:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var s=n(24246),l=n(69728),r=n(48382),i=n(69746),a=n(86677),o=n(27378),u=n(45007),c=n(44296),d=n(73485),p=n(11032),x=n(94167),h=n(38615),f=n(50204),m=n(10284),j=n(9862),v=n(35894),y=()=>{let e=(0,u.I0)(),t=(0,o.useRef)(!1);(0,o.useEffect)(()=>(t.current=!0,()=>{e((0,l.zq)(v.gA)),t.current=!1}),[e]);let n=(0,o.useRef)([...v.yI].map(e=>{let[t,n]=e;return{value:null==n?void 0:n.value,label:t}}));return(0,s.jsx)(j.z,{allowClear:!1,options:n.current,onChange:t=>{e((0,l.zq)(t||v.gA))},defaultValue:"","data-testid":"connection-type-filter"})},C=n(79894),b=n.n(C),g=e=>{let{items:t}=e;return(0,s.jsx)(i.MIq,{columns:4,spacingX:"16px",spacingY:"16px",children:t.map(e=>(0,s.jsx)(b(),{href:{pathname:window.location.pathname,query:{step:2,connectorType:JSON.stringify(e)}},children:(0,s.jsx)(i.xuv,{boxShadow:"base",borderRadius:"5px",maxWidth:"331px",overflow:"hidden",_hover:{boxShadow:"lg",cursor:"pointer"},"data-testid":"".concat(e.identifier,"-item"),children:(0,s.jsxs)(i.kCb,{alignItems:"center",justifyContent:"start",pl:"24px",pr:"24px",color:"gray.700",fontSize:"14px",fontStyle:"normal",fontWeight:"600",lineHeight:"20px",h:"80px",children:[(0,s.jsx)(r.Z,{data:e}),(0,s.jsx)(i.xvT,{ml:"12px",children:e.human_readable})]})})},e.identifier))})},S=()=>{let e=(0,u.I0)(),t=(0,o.useRef)(!1),{step:n}=(0,c.C)(l.ZZ),r=(0,c.C)(l.pw),{data:a,isFetching:d,isLoading:p,isSuccess:j}=(0,l.$I)(r),[v,C]=(0,o.useState)(!1),b=(0,o.useCallback)(t=>{(0===t.target.value.length||t.target.value.length>1)&&e((0,l.qP)(t.target.value))},[e]),S=(0,o.useMemo)(()=>(0,x.Ds)(b,250),[b]),T=(0,o.useMemo)(()=>(null==a?void 0:a.items)&&[...a.items].sort((e,t)=>e.human_readable>t.human_readable?1:-1),[a]);return(0,o.useEffect)(()=>(t.current=!0,()=>{e((0,l.qP)("")),t.current=!1}),[e]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.kCb,{minWidth:"fit-content",children:(0,s.jsx)(i.xuv,{color:"gray.700",fontSize:"14px",maxHeight:"80px",maxWidth:"474px",mb:"24px",children:n.description})}),(0,s.jsxs)(i.kCb,{alignItems:"center",gap:"4",mb:"24px",minWidth:"fit-content",children:[(0,s.jsx)(y,{}),(0,s.jsxs)(i.BZy,{size:"sm",children:[(0,s.jsx)(i.Z8_,{pointerEvents:"none",children:(0,s.jsx)(i.PTu,{color:"gray.300",h:"17px",w:"17px"})}),(0,s.jsx)(i.IIB,{autoComplete:"off",autoFocus:!0,borderRadius:"md",name:"search",onChange:S,placeholder:"Search integrations",size:"sm",type:"search"})]}),(0,s.jsx)(h.ZP,{scopes:[m.Sh.CONNECTOR_TEMPLATE_REGISTER],children:(0,s.jsx)(i.wpx,{onClick:()=>{C(!0)},type:"primary",htmlType:"submit","data-testid":"upload-btn",children:"Upload connector"})})]}),(0,s.jsx)(f.Z,{isOpen:v,onClose:()=>C(!1)}),(d||p)&&(0,s.jsx)(i.M5Y,{children:(0,s.jsx)(i.$jN,{})}),j&&T?(0,s.jsx)(g,{items:T}):null]})},T=n(36848),I=n(59201),_=n(4894),w=n(89468),E=()=>{let e=(0,u.I0)(),t=(0,o.useRef)(!1),[n,r]=(0,o.useState)(!1),{connection:a,connectionOption:d}=(0,c.C)(l.ZZ),p=v.IM.find(e=>e.type===(null==d?void 0:d.type)),[x,h]=(0,o.useState)(null==p?void 0:p.options[0]),f=()=>{r(!0)},j=(0,o.useMemo)(()=>()=>{let e=[];return(null==p?void 0:p.options)&&p.options.forEach(t=>{let n;switch(t){case v.H5.CONNECTOR_PARAMETERS:n={label:t,content:(0,s.jsx)(I.s,{onConnectionCreated:f})};break;case v.H5.DATASET_CONFIGURATION:n=(null==a?void 0:a.key)?{label:t,content:(0,s.jsx)(_.Z,{})}:void 0;break;case v.H5.DSR_CUSTOMIZATION:n=(null==a?void 0:a.key)?{label:t,content:(0,s.jsx)(w.Z,{})}:void 0}n&&e.push(n)}),e},[null==a?void 0:a.key,null==p?void 0:p.options]),y=(0,o.useCallback)(t=>{switch(t){case v.H5.DATASET_CONFIGURATION:case v.H5.DSR_CUSTOMIZATION:e((0,l.nj)(v.Ss[3]));break;case v.H5.CONNECTOR_PARAMETERS:default:e((0,l.nj)(v.Ss[2]))}h(t)},[e]);return(0,o.useEffect)(()=>(t.current=!0,()=>{t.current=!1,e((0,l.mc)())}),[e]),(0,o.useEffect)(()=>{(null==a?void 0:a.key)&&(y((null==d?void 0:d.type)!==m.Zi.MANUAL?v.H5.DATASET_CONFIGURATION:v.H5.DSR_CUSTOMIZATION),n&&r(!1))},[n,null==a?void 0:a.key,null==d?void 0:d.type,null==p?void 0:p.options,y]),(0,s.jsx)(i.gCW,{alignItems:"stretch",gap:"18px",children:(0,s.jsx)(T.Z,{data:j(),flexGrow:1,index:null==p?void 0:p.options.findIndex(e=>e===x),isLazy:!0})})},N=n(99377),k=()=>{let e=(0,u.I0)(),t=(0,a.useRouter)(),{connectorType:n,step:x}=t.query,{connection:h,connectionOption:f,step:m}=(0,c.C)(l.ZZ);(0,o.useEffect)(()=>{if(n&&e((0,l.yA)(JSON.parse(n))),t.query.step){let t=v.Ss.find(e=>e.stepId===Number(x));e((0,l.nj)(t||v.Ss[1]))}return!t.query.id&&(null==h?void 0:h.key)&&(0,N.S)(h.key,m.href),()=>{}},[null==h?void 0:h.key,n,x,e,t.query.id,t.query.step,m.href]);let j=(0,o.useCallback)(e=>{let t="";switch(e.stepId){case 2:case 3:t=e.label.replace("{identifier}",f.human_readable);break;default:t=e.label}return t},[f]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{backPath:p.JR}),(0,s.jsx)(i.X6q,{fontSize:"2xl",fontWeight:"semibold",maxHeight:"40px",mb:"4px",whiteSpace:"nowrap",children:(0,s.jsxs)(i.xuv,{alignItems:"center",display:"flex",children:[f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{data:f}),(0,s.jsx)(i.xvT,{ml:"8px",children:j(m)})]}),!f&&(0,s.jsx)(i.xvT,{children:j(m)})]})}),(()=>{switch(m.stepId){case 1:default:return(0,s.jsx)(S,{});case 2:case 3:return(0,s.jsx)(E,{})}})()]})},O=n(73025),A=()=>(0,s.jsx)(O.Z,{children:(0,s.jsx)(k,{})})}},function(e){e.O(0,[3662,3005,4833,1735,3273,2888,9774,179],function(){return e(e.s=47201)}),_N_E=e.O()}]);