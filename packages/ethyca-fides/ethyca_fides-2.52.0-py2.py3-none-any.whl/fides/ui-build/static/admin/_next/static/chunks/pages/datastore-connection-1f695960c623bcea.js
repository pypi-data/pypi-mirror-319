(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1850],{98720:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection",function(){return t(53244)}])},95189:function(e,n,t){"use strict";var i=t(24246),s=t(69746);n.Z=e=>{let{connected:n,...t}=e,r="red.500";return null==n?r="gray.300":n&&(r="green.500"),(0,i.jsx)(s.xuv,{width:"12px",height:"12px",borderRadius:"6px",backgroundColor:r,...t})}},43124:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var i=t(24246),s=t(69746),r=t(88038),o=t.n(r),l=t(86677);t(27378);var a=t(11596),c=t(72247),d=t(11032),u=()=>{let e=(0,l.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.fz)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},x=e=>{let{children:n,title:t,padded:r=!0,mainProps:d}=e,x=(0,a.hz)(),h=(0,l.useRouter)(),p="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,m=!(x.flags.privacyRequestsConfiguration&&p),{data:g}=(0,c.JE)(void 0,{skip:m}),{data:f}=(0,c.PW)(void 0,{skip:m}),j=x.flags.privacyRequestsConfiguration&&(!g||!f)&&p;return(0,i.jsxs)(s.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,i.jsxs)(o(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:r?6:0,px:r?10:0,h:r?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[j?(0,i.jsx)(u,{}):null,n]})]})}},9862:function(e,n,t){"use strict";t.d(n,{z:function(){return r}});var i=t(24246),s=t(69746);let r=e=>{let{...n}=e,t="multiple"===n.mode;return(0,i.jsx)(s.WPr,{defaultActiveFirstOption:!1,maxTagCount:"responsive",allowClear:!0,dropdownStyle:t?void 0:{width:"auto",minWidth:"200px"},className:"w-auto","data-testid":"filter-select",...n})}},48382:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var i=t(24246),s=t(69746);t(27378);var r=t(10284),o=t(59461);let l=e=>void 0!==e.connection_type,a=e=>void 0!==e.encoded_icon;var c=e=>{let{data:n,...t}=e;return(0,i.jsx)(s.Eep,{boxSize:"32px",objectFit:"cover",src:(()=>{let e;if(a(n)&&n.encoded_icon)return"data:image/svg+xml;base64,".concat(n.encoded_icon);if(l(n))e=[...o.iW].find(e=>{var t,i;let[s]=e;return n.connection_type.toString()!==r.Rj.SAAS&&n.connection_type.toString()===s||n.connection_type.toString()===r.Rj.SAAS&&(null===(i=n.saas_config)||void 0===i?void 0:null===(t=i.type)||void 0===t?void 0:t.toString())===s.toString()});else if(a(n)){let{identifier:t}=n;e=[...o.iW].find(e=>{let[n]=e;return n.toLowerCase()===t.toLowerCase()})}return e?o.Ny+e[1]:o.VD})(),fallbackSrc:o.VD,alt:(()=>{if(l(n)){var e;return null!==(e=n.name)&&void 0!==e?e:n.key}return a(n)?n.human_readable:n})(),...t})}},73025:function(e,n,t){"use strict";var i=t(24246);t(27378);var s=t(43124);n.Z=e=>{let{children:n}=e;return(0,i.jsx)(s.Z,{title:"Connections",children:n})}},48071:function(e,n,t){"use strict";var i=t(24246),s=t(69746),r=t(86677);t(27378);var o=t(11032),l=t(7564);n.Z=e=>{let{connection_key:n,showMenu:t}=e,{isOpen:a,onOpen:c,onClose:d}=(0,s.qY0)(),[u,x]=(0,l.R5)(),h=(0,r.useRouter)(),p=()=>{x.isLoading||d()};return(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(s.sNh,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:c,children:(0,i.jsx)(s.xvT,{fontSize:"sm",children:"Delete"})}),!t&&(0,i.jsx)(s.wpx,{onClick:c,children:"Delete integration"}),(0,i.jsxs)(s.u_l,{isCentered:!0,isOpen:a,onClose:p,children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{children:[(0,i.jsx)(s.xBx,{children:"Delete integration"}),(0,i.jsx)(s.olH,{}),(0,i.jsx)(s.fef,{pb:6,children:(0,i.jsx)(s.Kqy,{direction:"column",spacing:"15px",children:(0,i.jsx)(s.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:"Deleting an integration may impact any privacy request that is currently in progress. Do you wish to proceed?"})})}),(0,i.jsxs)(s.mzw,{className:"flex gap-4",children:[(0,i.jsx)(s.wpx,{onClick:p,className:"w-1/2",children:"Cancel"}),(0,i.jsx)(s.wpx,{onClick:()=>{n&&(u(n),t||h.push(o.KH))},loading:x.isLoading,type:"primary",className:"w-1/2",children:"Delete integration"})]})]})]})]})}},89671:function(e,n,t){"use strict";var i=t(24246),s=t(69746);t(27378);var r=t(7564);n.Z=e=>{let{connection_key:n,disabled:t,name:o,access_type:l,connection_type:a,isSwitch:c}=e,{isOpen:d,onOpen:u,onClose:x}=(0,s.qY0)(),[h,p]=(0,r.XX)(),m=async()=>{await h({key:n,name:o,disabled:!t,access:l,connection_type:a}),x()},g=()=>{p.isLoading||x()};return(0,i.jsxs)(i.Fragment,{children:[c?(0,i.jsxs)(s.kCb,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(s.xvT,{fontSize:"sm",children:"Enable integration"}),(0,i.jsx)(s.rAg,{className:"ml-2",checked:!t,onChange:()=>u()})]}):(0,i.jsx)(s.sNh,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:u,children:(0,i.jsx)(s.xvT,{fontSize:"sm",children:t?"Enable":"Disable"})}),(0,i.jsxs)(s.u_l,{isCentered:!0,isOpen:d,onClose:g,children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{children:[(0,i.jsxs)(s.xBx,{children:[t?"Enable":"Disable"," Connection"]}),(0,i.jsx)(s.olH,{}),(0,i.jsx)(s.fef,{pb:6,children:(0,i.jsx)(s.Kqy,{direction:"column",spacing:"15px",children:(0,i.jsxs)(s.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:[t?"Enabling":"Disabling"," a connection may impact any privacy request that is currently in progress. Do you wish to proceed?"]})})}),(0,i.jsxs)(s.mzw,{className:"flex gap-4",children:[(0,i.jsx)(s.wpx,{onClick:g,className:"w-1/2",children:"Cancel"}),(0,i.jsxs)(s.wpx,{onClick:m,loading:p.isLoading,className:"w-1/2",children:[t?"Enable":"Disable"," Connection"]})]})]})]})]})}},40415:function(e,n,t){"use strict";t.d(n,{s:function(){return l}});var i=t(24246),s=t(69746),r=t(95189),o=t(94167);let l=e=>{let{succeeded:n,timestamp:t}=e,l=t?(0,o.p6)(t):"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,{connected:n}),(0,i.jsx)(s.xvT,{color:"gray.500",fontSize:"xs",fontWeight:"semibold",lineHeight:"16px",ml:"10px",children:t?"Last tested on ".concat(l):"This connection has not been tested yet"})]})}},53244:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return H}});var i=t(24246),s=t(94167),r=t(69746),o=t(27378),l=t(44296),a=t(69477),c=t(45007),d=t(7564),u=t(9862),x=()=>{let{connectionOptions:e}=(0,l.C)(a.ZZ),{connection_type:n}=(0,l.C)(d.dR),t=(0,o.useCallback)(()=>{let t=new Map;return e.forEach(e=>{let i=!1;(null==n?void 0:n.includes(e.identifier))&&(i=!0),t.set(e.human_readable,i)}),t},[e,n]),s=[...(0,o.useMemo)(()=>t(),[t])].map(e=>{let[n]=e;return{value:n,label:n}}),r=(0,l.T)();return(0,i.jsx)(u.z,{mode:"multiple",placeholder:"Connection Type",options:s,onChange:n=>{let t=e.filter(e=>n.includes(e.human_readable));r((0,d.Iw)(t.map(e=>e.identifier)))},defaultValue:(null==n?void 0:n.length)?n:[],className:"w-60","data-testid":"connection-type-filter"})},h=t(59461),p=()=>{let{disabled_status:e}=(0,c.v9)(d.dR),n=()=>{let e=new Map;return Object.values(h.QI).sort().forEach(n=>{e.set((0,s.kC)(n),{value:n})}),e},t=[...(0,o.useMemo)(()=>n(),[])].map(e=>{let[n,t]=e;return{value:t.value,label:n}}),r=(0,c.I0)();return(0,i.jsx)(u.z,{placeholder:"Status",options:t,onChange:e=>{r((0,d.Ru)(e||""))},defaultValue:(null==e?void 0:e.toString())||void 0,"data-testid":"disabled-status-filter"})},m=t(35894),g=()=>{let{system_type:e}=(0,c.v9)(d.dR),n=new Map(m.yI);n.delete("Show all");let t=[...n].map(e=>{let[n,t]=e;return{value:t.value,label:n}}),s=(0,l.T)();return(0,i.jsx)(u.z,{placeholder:"System Type",options:t,onChange:e=>{s((0,d.zq)(e||""))},defaultValue:(null==e?void 0:e.toString())||void 0,"data-testid":"system-type-filter"})},f=()=>{let{test_status:e}=(0,c.v9)(d.dR),n=()=>{let e=new Map;return Object.values(h.i0).sort().forEach(n=>{e.set((0,s.kC)(n),{value:n})}),e},t=[...(0,o.useMemo)(()=>n(),[])].map(e=>{let[n,t]=e;return{value:t.value,label:n}}),r=(0,c.I0)();return(0,i.jsx)(u.z,{placeholder:"Testing Status",options:t,onChange:e=>{r((0,d.Ri)(e||""))},defaultValue:(null==e?void 0:e.toString())||void 0,"data-testid":"testing-status-filter"})};let j=()=>{let e=(0,c.v9)(d.dR),n=(0,c.I0)();return{handleSearchChange:e=>n((0,d.qP)(e.target.value)),...e}};var v=()=>{let{handleSearchChange:e,search:n}=j();return(0,i.jsxs)(r.kCb,{minWidth:"fit-content",alignItems:"center",gap:"4",mb:6,flexWrap:"wrap",children:[(0,i.jsxs)(r.BZy,{size:"sm",minWidth:"308px",children:[(0,i.jsx)(r.Z8_,{pointerEvents:"none",children:(0,i.jsx)(r.PTu,{color:"gray.300",w:"17px",h:"17px"})}),(0,i.jsx)(r.IIB,{autoComplete:"off",autoFocus:!0,type:"search",minWidth:200,placeholder:"Search connection name or description",size:"sm",borderRadius:"md",value:n,name:"search",onChange:e})]}),(0,i.jsx)(x,{}),(0,i.jsx)(g,{}),(0,i.jsx)(f,{}),(0,i.jsx)(p,{})]})},y=e=>{let{page:n,size:t,total:s,handleNextPage:o,handlePreviousPage:l}=e,a=(n-1)*t+1,c=Math.min(s,n*t);return(0,i.jsxs)(r.kCb,{justifyContent:"space-between",mt:6,children:[(0,i.jsx)(r.xvT,{fontSize:"xs",color:"gray.600",children:s>0?(0,i.jsxs)(i.Fragment,{children:["Showing ",Number.isNaN(a)?0:a," to"," ",Number.isNaN(c)?0:c," of"," ",Number.isNaN(s)?0:s," results"]}):"0 results"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(r.wpx,{disabled:n<=1,onClick:l,className:"mr-2",children:"Previous"}),(0,i.jsx)(r.wpx,{disabled:n*t>=s,onClick:o,children:"Next"})]})]})},b=t(98904),C=t.n(b),w=t(79894),_=t.n(w),k=t(11032),S=t(48071),N=t(89671),z=e=>{let{connection_key:n,disabled:t,connection_type:s,access_type:o,name:l}=e;return(0,i.jsxs)(r.v2r,{children:[(0,i.jsx)(r.j2t,{as:r.zxk,size:"xs",bg:"white","data-testid":"connection-menu-btn",children:(0,i.jsx)(r.nXP,{color:"gray.700",w:18,h:18})}),(0,i.jsx)(r.h_i,{children:(0,i.jsxs)(r.qyq,{fontSize:"sm",shadow:"xl","data-testid":"connection-menu-".concat(l),children:[(0,i.jsx)(r.sNh,{as:_(),href:"".concat(k.JR,"/").concat(encodeURIComponent(n)),_focus:{color:"complimentary.500",bg:"gray.100"},"data-testid":"configure-btn",children:"Configure"}),(0,i.jsx)(N.Z,{connection_key:n,disabled:t,connection_type:s,access_type:o,name:l,isSwitch:!1}),(0,i.jsx)(S.Z,{showMenu:!0,connection_key:n})]})})]})},T=e=>{let{disabled:n}=e;return(0,i.jsx)(r.Cts,{color:"white",bg:n?"gray.500":"green.500",height:"18px",lineHeight:"18px",textAlign:"center",borderRadius:"2px",mr:"4px",children:n?"DISABLED":"ACTIVE"})},Z=t(48382),R=t(40415),E=e=>{var n;let{connectionData:t}=e,[c,u]=(0,d.h2)(),{connectionOptions:x}=(0,l.C)(a.ZZ),h=(0,o.useMemo)(()=>x.find(e=>e.identifier===t.connection_type||t.saas_config&&e.identifier===t.saas_config.type)||"ethyca",[t,x]);return(0,i.jsxs)(r.xuv,{width:"100%",height:136,p:"18px 16px 16px 16px","data-testid":"connection-grid-item-".concat(t.name),children:[(0,i.jsxs)(r.kCb,{justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(Z.Z,{data:h}),(0,i.jsx)(r.xvT,{color:"gray.900",fontSize:"md",fontWeight:"medium",m:"8px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:t.name}),(0,i.jsx)(r.LZC,{}),(0,i.jsx)(T,{disabled:!!t.disabled}),(0,i.jsx)(z,{connection_key:t.key,disabled:!!t.disabled,name:null!==(n=t.name)&&void 0!==n?n:t.key,connection_type:t.connection_type,access_type:t.access})]}),(0,i.jsx)(r.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:t.description?t.description:(0,i.jsx)("br",{})}),(0,i.jsxs)(r.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"sm",lineHeight:"20px",children:["Edited on ",(0,s.p6)(t.updated_at)]}),(0,i.jsxs)(r.kCb,{mt:"0px",justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(R.s,{succeeded:t.last_test_succeeded,timestamp:t.last_test_timestamp||""}),(0,i.jsx)(r.LZC,{}),(0,i.jsx)(r.wpx,{size:"small",onClick:()=>{c(t.key)},loading:u.isLoading||u.isFetching,children:"Test"})]})]})};let I=()=>{let e=(0,c.I0)(),n=(0,l.C)(d.dR);return{...n,handleNextPage:()=>{e((0,d.YA)(n.page+1))},handlePreviousPage:()=>{e((0,d.YA)(n.page-1))}}};var W=e=>{let{items:n=[],total:t=0}=e,{page:s,size:o,handleNextPage:l,handlePreviousPage:a}=I(),c=(0,r.yo_)(n,3);return(0,i.jsxs)(i.Fragment,{children:[c.map((e,n,t)=>{let{length:s}=t;return(0,i.jsx)(r.xuv,{className:C()["grid-row"],borderBottomWidth:s>1&&n===s-1&&3===e.length?"0.5px":void 0,"data-testid":"connection-grid",children:(0,i.jsx)(r.MIq,{columns:3,children:e.map(e=>(0,i.jsx)(r.xuv,{className:C()["grid-item"],children:(0,i.jsx)(E,{connectionData:e})},e.key))})},JSON.stringify(e))}),(0,i.jsx)(y,{page:s,size:o,total:t,handleNextPage:l,handlePreviousPage:a})]})},D=e=>{let{hasFilters:n}=e;return(0,i.jsxs)(r.kCb,{bg:"gray.50",width:"100%",height:"340px",justifyContent:"center",alignItems:"center",flexDirection:"column","data-testid":"connections-empty-state",children:[(0,i.jsx)(r.xvT,{color:"black",fontSize:"x-large",lineHeight:"32px",fontWeight:"600",mb:"7px",children:n?"No connections found":"All of your connections have been linked!"}),(0,i.jsx)(r.xvT,{color:"gray.600",fontSize:"sm",lineHeight:"20px",mb:"11px",children:n?"Modify your search parameters":"You are ready to upgrade Fides"})]})},P=t(11596),q=t(86677),A=()=>{let e=(0,q.useRouter)();return(0,i.jsx)(r.wpx,{onClick:()=>e.push(m.Ss[1].href),type:"primary",children:"Create new connection"})},F=()=>{let e=(0,P.hz)();return(0,i.jsxs)(r.kCb,{mb:"24px",flexDirection:"column",justifyContent:"center",alignItems:"left",children:[(0,i.jsxs)(r.kCb,{children:[(0,i.jsx)(r.X6q,{marginBottom:4,fontSize:"2xl",fontWeight:"semibold",children:"Unlinked Connections"}),(0,i.jsx)(r.LZC,{}),e.flags.standaloneConnections&&(0,i.jsx)(A,{})]}),(0,i.jsx)(r.xuv,{maxWidth:"450px",children:(0,i.jsxs)(r.xvT,{fontSize:"sm",children:["Connections are now created in the"," ",(0,i.jsx)(r.rUS,{color:"complimentary.500",href:k.xo,children:"system configuration"})," ","section. You can link existing connections to a new or existing system."]})})]})},M=()=>{var e;let n=(0,o.useRef)(!1),t=(0,l.T)(),{connectionOptions:c}=(0,l.C)(a.ZZ),u=(0,l.C)(d.dR),[x,h]=(0,o.useState)(u),p=(0,o.useRef)((0,s.Ds)(e=>h(e),250)),{data:m}=(0,a.$I)({search:""},{skip:c.length>0}),{data:g,isFetching:f,isLoading:j,isSuccess:y}=(0,d.AZ)(x),b=(null==g?void 0:null===(e=g.items)||void 0===e?void 0:e.length)>0,C=!!u.search||!!u.connection_type||!!u.system_type||!!u.disabled_status||!!u.test_status;return(0,o.useEffect)(()=>{t((0,d.um)(!0))},[t]),(0,o.useEffect)(()=>(n.current=!0,0===c.length&&(null==m?void 0:m.items)&&t((0,a.fP)(m.items)),p.current(u),()=>{n.current=!1}),[c.length,null==m?void 0:m.items,t,u]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F,{}),n.current&&(0,i.jsx)(v,{}),(f||j)&&(0,i.jsx)(r.M5Y,{children:(0,i.jsx)(r.$jN,{})}),n.current&&y&&(b?(0,i.jsx)(W,{items:null==g?void 0:g.items,total:null==g?void 0:g.total}):(0,i.jsx)(D,{hasFilters:C}))]})},L=t(73025),H=()=>(0,i.jsx)(L.Z,{children:(0,i.jsx)(M,{})})},98904:function(e){e.exports={"grid-row":"ConnectionGrid_grid-row__Cv_Zf","grid-item":"ConnectionGrid_grid-item__xP7eK"}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=98720)}),_N_E=e.O()}]);