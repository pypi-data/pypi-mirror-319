import{o as w,u as A,R as e,aE as k,aF as L,m as M,a as m,c as x,aG as O,aH as G,aI as T,aJ as u,aK as d,at as V,k as B,B as F}from"./index-Bm2SqMk3.js";const D=w(function({model:t,selectedAsm:r,value:o,setValue:c,setOption:i}){const g=A.getSession(t),{assemblyManager:p,textSearchManager:n}=g,{rankSearchResults:E}=t,a=t.searchScope(r),v=p.get(r);return e.createElement(k,{fetchResults:s=>L({queryString:s,assembly:v,textSearchManager:n,rankSearchResults:E,searchScope:a}),model:t,assemblyName:r,value:o,minWidth:270,onChange:s=>{c(s)},onSelect:s=>{i(s)},TextFieldProps:{variant:"outlined",helperText:"Enter sequence name, feature name, or location"}})}),K=M()(t=>({importFormContainer:{padding:t.spacing(2)},button:{margin:t.spacing(2)},container:{padding:t.spacing(4)}})),_=w(function({model:t}){var r;const{classes:o}=K(),c=A.getSession(t),{assemblyNames:i,assemblyManager:g}=c,{error:p}=t,[n,E]=m.useState(i[0]),[a,v]=m.useState(),s=g.get(n),S=i.length?s==null?void 0:s.error:"No configured assemblies",h=S||p,[l,N]=m.useState(""),y=s==null?void 0:s.regions,I=!!y,C=y&&((r=y[0])===null||r===void 0?void 0:r.refName)||"";return m.useEffect(()=>{N(C)},[C,n]),e.createElement("div",{className:o.container},h?e.createElement(x.ErrorMessage,{error:h}):null,e.createElement(O,{className:o.importFormContainer},e.createElement("form",{onSubmit:async b=>{var f;if(b.preventDefault(),t.setError(void 0),l)try{(a==null?void 0:a.getDisplayString())===l&&a.hasLocation()?await G({option:a,model:t,assemblyName:n}):!((f=a==null?void 0:a.results)===null||f===void 0)&&f.length?t.setSearchResults(a.results,a.getLabel(),n):s&&await T({input:l,assembly:s,model:t})}catch(R){console.error(R),c.notify(`${R}`,"warning")}}},e.createElement(u,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},e.createElement(u,{item:!0},e.createElement(d,null,e.createElement(x.AssemblySelector,{onChange:b=>{E(b)},localStorageKey:"lgv",session:c,selected:n}))),e.createElement(u,{item:!0},n?S?e.createElement(V,{style:{color:"red"}}):I?e.createElement(d,null,e.createElement(D,{value:l,setValue:N,selectedAsm:n,setOption:v,model:t})):e.createElement(B,{size:20,disableShrink:!0}):null),e.createElement(u,{item:!0},e.createElement(d,null,e.createElement(F,{type:"submit",disabled:!l,className:o.button,variant:"contained",color:"primary"},"Open")),e.createElement(d,null,e.createElement(F,{disabled:!l,className:o.button,onClick:()=>{t.setError(void 0),t.showAllRegionsInAssembly(n)},variant:"contained",color:"secondary"},"Show all regions in assembly")))))))});export{_ as default};
