import{o as m,R as e,G as v,M as D,bs as N,b as c,r as i,E as L,K as F,a as E,m as q,bt as j,aW as R,aX as M,aY as O,g as U,b4 as H,c as b,ai as I,bh as _}from"./rpcWorker-CVTx5FIM.js";import{D as G}from"./Delete-yZ2st8Ox.js";const $=m(function({adapterSelection:a,setAdapterSelection:o,adapterTypes:n}){return e.createElement(v,{value:a,variant:"outlined",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:t=>{o(t.target.value)}},n.map(t=>e.createElement(D,{key:t,value:t},t)))}),P=m(function({fastaLocation:a,setFastaLocation:o}){return e.createElement(e.Fragment,null,e.createElement(N,{severity:"warning",style:{margin:30}},"Note: use only relatively small files for this type, it is loaded into memory"),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"fastaLocation",location:a,setLocation:n=>{o(n)}})))}),W=m(function({fastaLocation:a,faiLocation:o,setFaiLocation:n,setFastaLocation:t}){return e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"fastaLocation",location:a,setLocation:l=>{t(l)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"faiLocation",location:o,setLocation:l=>{n(l)}})))}),J=m(function({fastaLocation:a,faiLocation:o,gziLocation:n,setFaiLocation:t,setGziLocation:l,setFastaLocation:s}){return e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"fastaLocation",location:a,setLocation:r=>{s(r)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"faiLocation",location:o,setLocation:r=>{t(r)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"gziLocation",location:n,setLocation:r=>{l(r)}})))}),K=m(function({twoBitLocation:a,chromSizesLocation:o,setTwoBitLocation:n,setChromSizesLocation:t}){return e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"twoBitLocation",location:a,setLocation:l=>{n(l)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"chromSizesLocation (optional, can be added to speed up loading 2bit files with many contigs)",location:o,setLocation:l=>{t(l)}})))}),u={uri:""},w=["IndexedFastaAdapter","BgzipFastaAdapter","UnindexedFastaAdapter","TwoBitAdapter"],V=m(function({session:a,onClose:o}){const[n,t]=i.useState(""),[l,s]=i.useState(""),[r,f]=i.useState(w[0]),[d,g]=i.useState(u),[y,S]=i.useState(u),[C,B]=i.useState(u),[h,T]=i.useState(u),[x,k]=i.useState(u);return e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement(v,{id:"assembly-name",label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:n,onChange:A=>{t(A.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-name"}}}),e.createElement(v,{id:"assembly-name",label:"Assembly display name",helperText:'(optional) A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:l,onChange:A=>{s(A.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-display-name"}}}),e.createElement($,{adapterSelection:r,adapterTypes:w,setAdapterSelection:f}),r==="IndexedFastaAdapter"?e.createElement(W,{fastaLocation:d,faiLocation:y,setFaiLocation:S,setFastaLocation:g}):r==="UnindexedFastaAdapter"?e.createElement(P,{fastaLocation:d,setFastaLocation:g}):r==="TwoBitAdapter"?e.createElement(K,{twoBitLocation:h,chromSizesLocation:x,setTwoBitLocation:T,setChromSizesLocation:k}):e.createElement(J,{fastaLocation:d,gziLocation:C,faiLocation:y,setFaiLocation:S,setGziLocation:B,setFastaLocation:g})),e.createElement(F,null,e.createElement(E,{variant:"contained",color:"primary",onClick:()=>{n===""?a.notify("Can't create an assembly without a name"):(o(),a.addAssembly({name:n,displayName:l,sequence:{type:"ReferenceSequenceTrack",trackId:`${n}-${performance.now()}`,adapter:r==="IndexedFastaAdapter"?{type:"IndexedFastaAdapter",fastaLocation:d,faiLocation:y}:r==="BgzipFastaAdapter"?{type:"BgzipFastaAdapter",fastaLocation:d,faiLocation:y,gziLocation:C}:r==="UnindexedFastaAdapter"?{type:"UnindexedFastaAdapter",fastaLocation:d}:{type:"TwoBitAdapter",twoBitLocation:h,chromSizesLocation:x}}}),a.notify(`Added "${n}"`,"success"))}},"Submit"),e.createElement(E,{variant:"contained",color:"secondary",onClick:()=>{o()}},"Cancel")))}),X=q()({container:{overflow:"auto",maxHeight:600}}),Y=m(function({assembly:a,onClose:o}){const{classes:n}=X();return e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement("div",{className:n.container},a?e.createElement(j,{model:{target:a}}):e.createElement("div",null,"No assembly"))),e.createElement(F,null,e.createElement(E,{variant:"contained",onClick:()=>{o()}},"Back")))});var p={},z;function Q(){if(z)return p;z=1;var a=R();Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var o=a(M()),n=O();return p.default=(0,o.default)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Create"),p}var Z=Q(),ee=U(Z);const te=m(function({onEditAssembly:a,onAddAssembly:o,onClose:n,session:t}){return e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.createElement(H,{rowHeight:25,columnHeaderHeight:35,hideFooter:t.assemblies.length<25,rows:t.assemblies.map(l=>({id:b.readConfObject(l,"name"),name:b.readConfObject(l,"name"),displayName:b.readConfObject(l,"displayName"),aliases:b.readConfObject(l,"aliases"),assembly:l})),columns:[{field:"name"},{field:"displayName"},{field:"aliases"},{field:"actions",renderCell:({row:l})=>{const{assembly:s,name:r}=l,f=t.sessionAssemblies.includes(s)?!0:t.adminMode;return e.createElement(e.Fragment,null,e.createElement(I,{onClick:()=>{a(s)}},e.createElement(ee,null)),e.createElement(I,{"data-testid":`${r}-delete`,disabled:!f,onClick:()=>{f&&(t.removeAssembly?t.removeAssembly(r):t.notify("Unable to find removeAssembly function"))}},e.createElement(G,null)))}}]}))),e.createElement(F,null,e.createElement(E,{color:"secondary",variant:"contained",onClick:()=>{n()}},"Close"),e.createElement(E,{variant:"contained",startIcon:e.createElement(_,null),onClick:()=>{o()}},"Add new assembly")))}),le=m(function({session:a,onClose:o}){const[n,t]=i.useState(!1),[l,s]=i.useState();return e.createElement(c.Dialog,{open:!0,title:"Assembly manager",onClose:()=>{o()}},l?e.createElement(Y,{assembly:l,onClose:()=>{s(void 0)}}):n?e.createElement(V,{session:a,onClose:()=>{t(!1)}}):e.createElement(te,{session:a,onClose:()=>{o()},onAddAssembly:()=>{t(!0)},onEditAssembly:r=>{s(r)}}))});export{le as default};
