import{r as o}from"./rxjs-Dgg09m9e.js";import{S as f}from"./simpleFeature-DW3q5zmr.js";import n from"./FromConfigAdapter-BH4Yj5E4.js";import{f as u,t as m}from"./rpcWorker-CVTx5FIM.js";import"./index-P3rx-5SH.js";class x extends n{getFeatures(e){return o.ObservableCreate(async r=>{const t=(await u(super.getFeatures(e).pipe(m())))[0];r.next(new f({...t.toJSON(),uniqueId:`${t.id()}:${e.start}-${e.end}`,end:e.end,start:e.start,seq:t.get("seq").slice(Math.max(e.start-t.get("start"),0),Math.max(e.end-t.get("start"),0))})),r.complete()})}async getRegions(){const e=[];for(const[r,a]of this.features){let t;for(const s of a)t&&t.end>=s.get("start")&&t.start<=s.get("end")?t.end=s.get("end"):(t&&e.push(t),t={refName:r,start:s.get("start"),end:s.get("end")});t&&e.push(t)}return e}freeResources(){}}export{x as default};
