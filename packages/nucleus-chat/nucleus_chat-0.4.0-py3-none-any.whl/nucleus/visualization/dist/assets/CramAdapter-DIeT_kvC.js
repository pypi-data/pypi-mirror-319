var bt=Object.defineProperty;var Lt=(n,e,t)=>e in n?bt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var De=(n,e,t)=>Lt(n,typeof e!="symbol"?e+"":e,t);import{f as Ke,aN as oe,cz as Ut,bF as Ve,bG as Ht,aW as Pt,aS as Gt,bV as ze,a9 as Xe,a7 as Ot,a8 as Jt,u as ge,G as Tt,bX as Wt,bY as Yt}from"./index-Bm2SqMk3.js";import{c as Kt}from"./crc32-BMWsGF9h.js";import{r as zt}from"./___vite-browser-external_commonjs-proxy-DFR-dye6.js";import{B as $t}from"./index-6rN3ss-L.js";import{Q as Vt}from"./QuickLRU-BERSBA88.js";import{r as Xt}from"./rxjs-DT7GVwt0.js";const Ae={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183};function Zt(n,e){if(!n.lengthOnRef&&!n.readLength||n.isUnknownBases())return null;const t=n.alignmentStart-e.start;if(!n.readFeatures)return e.seq.slice(t,t+(n.lengthOnRef||0)).toUpperCase();let A="",r=t,i=0;for(;A.length<n.readLength;)if(i<n.readFeatures.length){const s=n.readFeatures[i];if(s.code==="Q"||s.code==="q")i+=1;else if(s.pos===A.length+1)if(i+=1,s.code==="b"){const a=s.data;A+=a,r+=a.length}else s.code==="B"?(A+=s.data[0],r+=1):s.code==="X"?(A+=s.sub,r+=1):s.code==="I"?A+=s.data:s.code==="D"?r+=s.data:s.code==="i"?A+=s.data:s.code==="N"?r+=s.data:s.code==="S"?A+=s.data:s.code==="P"||s.code;else if(i<n.readFeatures.length){const a=e.seq.slice(r,r+s.pos-A.length-1);A+=a,r+=a.length}}else{const s=e.seq.slice(r,r+n.readLength-A.length);A+=s,r+=s.length}return A.toUpperCase()}const jt={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};function eA(n,e,t,A){const r=A.refPos-e.start,i=e.seq.charAt(r);i&&(A.ref=i);let s=jt[i];s===void 0&&(s=4);const w=t.substitutionMatrix[s][A.data];w&&(A.sub=w)}const tA=[[1,"Paired"],[2,"ProperlyPaired"],[4,"SegmentUnmapped"],[8,"MateUnmapped"],[16,"ReverseComplemented"],[32,"MateReverseComplemented"],[64,"Read1"],[128,"Read2"],[256,"Secondary"],[512,"FailedQc"],[1024,"Duplicate"],[2048,"Supplementary"]],AA=[[1,"PreservingQualityScores"],[2,"Detached"],[4,"WithMateDownstream"],[8,"DecodeSequenceAsStar"]],rA=[[1,"OnNegativeStrand"],[2,"Unmapped"]];function $e(n){const e={};for(const[t,A]of n)e[`is${A}`]=r=>!!(r&t),e[`set${A}`]=r=>r|t;return e}const Re=$e(tA),he=$e(AA),Ze=$e(rA);class nA{constructor({flags:e,cramFlags:t,readLength:A,mappingQuality:r,lengthOnRef:i,qualityScores:s,mateRecordNumber:a,readBases:w,readFeatures:d,mateToUse:g,readGroupId:c,readName:o,sequenceId:l,uniqueId:E,templateSize:Q,alignmentStart:S,tags:p}){this.flags=e,this.cramFlags=t,this.readLength=A,this.mappingQuality=r,this.lengthOnRef=i,this.qualityScores=s,w&&(this.readBases=w),this.readGroupId=c,this.readName=o,this.sequenceId=l,this.uniqueId=E,this.templateSize=Q,this.alignmentStart=S,this.tags=p,d&&(this.readFeatures=d),g&&(this.mate={flags:g.mateFlags,readName:g.mateReadName,sequenceId:g.mateSequenceId,alignmentStart:g.mateAlignmentStart}),a&&(this.mateRecordNumber=a)}isPaired(){return!!(this.flags&Ae.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&Ae.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&Ae.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&Ae.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&Ae.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&Ae.BAM_FMREVERSE)}isRead1(){return!!(this.flags&Ae.BAM_FREAD1)}isRead2(){return!!(this.flags&Ae.BAM_FREAD2)}isSecondary(){return!!(this.flags&Ae.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&Ae.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&Ae.BAM_FDUP)}isSupplementary(){return!!(this.flags&Ae.BAM_FSUPPLEMENTARY)}isDetached(){return!!(this.cramFlags&Ae.CRAM_FLAG_DETACHED)}hasMateDownStream(){return!!(this.cramFlags&Ae.CRAM_FLAG_MATE_DOWNSTREAM)}isPreservingQualityScores(){return!!(this.cramFlags&Ae.CRAM_FLAG_PRESERVE_QUAL_SCORES)}isUnknownBases(){return!!(this.cramFlags&Ae.CRAM_FLAG_NO_SEQ)}getReadBases(){if(!this.readBases&&this._refRegion){const e=Zt(this,this._refRegion);e&&(this.readBases=e)}return this.readBases}getPairOrientation(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let A=" ",r=" ";this.isRead1()?(A="1",r="2"):this.isRead2()&&(A="2",r="1");const i=[];let s=this.templateLength||this.templateSize;if(s===void 0)throw new Error("One of templateSize and templateLength must be set");return this.alignmentStart>this.mate.alignmentStart&&s>0&&(s=-s),s>0?(i[0]=e,i[1]=A,i[2]=t,i[3]=r):(i[2]=e,i[3]=A,i[0]=t,i[1]=r),i.join("")}return null}addReferenceSequence(e,t){this.readFeatures&&this.readFeatures.forEach(A=>{A.code==="X"&&eA(this,e,t,A)}),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}toJSON(){const e={};return Object.keys(this).forEach(t=>{t.startsWith("_")||(e[t]=this[t])}),e.readBases=this.getReadBases(),e}}var _e,je;function Be(){return je||(je=1,_e=class{constructor(e,t=0,A=0){A!=0?(this.buf=Buffer.allocUnsafe(A),this.length=A):(this.buf=e,this.length=e.length),this.pos=t}EOF(){return this.pos>=this.length}ReadData(e){var t=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,t}ReadByte(){const e=this.buf[this.pos];return this.pos++,e}ReadChar(){const e=this.buf[this.pos];return this.pos++,String.fromCharCode(e)}ReadUint16(){var e=this.ReadByte();return e|=this.ReadByte()<<8,e}ReadUint32(){const e=this.buf.readInt32LE(this.pos);return this.pos+=4,e}ReadString(){var e="";do{var t=this.buf[this.pos++];t&&(e+=String.fromCharCode(t))}while(t);return e}ReadUint7(){var e=0;do{var t=this.ReadByte();e=e<<7|t&127}while(t&128);return e}ReadITF8(){var e=this.buf[this.pos];return this.pos++,e>=240?(e=(e&15)<<28,e+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):e>=224?(e=(e&15)<<24,e+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(this.buf[this.pos+2]<<0),this.pos+=3):e>=192?(e=(e&31)<<16,e+=(this.buf[this.pos+0]<<8)+(this.buf[this.pos+1]<<0),this.pos+=2):e>=128&&(e=(e&63)<<8,e+=this.buf[this.pos],this.pos++),e}WriteByte(e){this.buf[this.pos++]=e}WriteChar(e){this.buf[this.pos++]=e.charCodeAt(0)}WriteString(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e.charCodeAt(t);this.buf[this.pos++]=0}WriteData(e,t){for(var A=0;A<t;A++)this.buf[this.pos++]=e[A]}WriteStream(e){this.WriteData(e.buf,e.pos)}WriteUint16(e){this.WriteByte(e&255),this.WriteByte(e>>8&255)}WriteUint32(e){this.buf.writeInt32LE(e,this.pos),this.pos+=4}WriteUint7(e){var t=0,A=e;do t+=7,A>>=7;while(A>0);do t-=7,this.WriteByte((e>>t&127)+((t>0)<<7));while(t>0)}WriteITF8(e){e<0&&(e=1+e),e<=127?this.buf[this.pos++]=e:e<=16383?(this.buf[this.pos++]=128|Math.floor(e/256),this.buf[this.pos++]=e&255):e<131071?(this.buf[this.pos++]=192|Math.floor(e/65536),this.buf[this.pos++]=Math.floor(e/256)&255,this.buf[this.pos++]=e&255):e<268435455?(this.buf[this.pos++]=224|Math.floor(e/16777216),this.buf[this.pos++]=Math.floor(e/65536)&255,this.buf[this.pos++]=Math.floor(e/256)&255,this.buf[this.pos++]=e&255):(this.buf[this.pos++]=240|Math.floor(e/268435456),this.buf[this.pos++]=Math.floor(e/1048576)&255,this.buf[this.pos++]=Math.floor(e/4096)&255,this.buf[this.pos++]=Math.floor(e/4)&255,this.buf[this.pos++]=e&15)}WriteByteNeg(e){this.buf[--this.pos]=e}}),_e}var ke,et;function aA(){if(et)return ke;et=1;const n=Be();function e(N){return N&4095}function t(N,D){for(var R=0;D>=N[R+1];)R++;return R}function A(N){for(var D=new Array(4096),R=0,f=0;f<4096;f++){for(;f>=N[R+1];)R++;D[f]=R}return D}function r(N,D,R){return R*(N>>12)+(N&4095)-D}function i(N,D){for(;D<1<<23;)D=(D<<8)+N.ReadByte();return D}function s(){return 1<<23}function a(N,D){D.WriteByteNeg(N>>24&255),D.WriteByteNeg(N>>16&255),D.WriteByteNeg(N>>8&255),D.WriteByteNeg(N>>0&255)}function w(N,D,R,f){for(var h=(8388608>>f<<8)*R;N>=h;)D.WriteByteNeg(N&255),N>>=8;return N}function d(N,D,R,f,h){return N=w(N,D,f,h),N=(Math.floor(N/f)<<h)+N%f+R,N}function g(N){var D=new n(N),R=D.ReadByte();D.ReadUint32();var f=D.ReadUint32();return R==0?l(D,f):k(D,f)}function c(N,D){return D==0?p(N):Y(N)}function o(N,D,R){for(var f=0;f<256;f++)D[f]=0;var h=N.ReadByte(),B=h,y=0;do{var m=N.ReadITF8();D[h]=m,y>0?(y--,h++):(h=N.ReadByte(),h==B+1&&(y=N.ReadByte())),B=h}while(h!=0);R[0]=0;for(var f=0;f<=255;f++)R[f+1]=R[f]+D[f]}function l(N,D){var R=new Array(256),f=new Array(256);o(N,R,f);for(var h=A(f),B=new Array(4),y=0;y<4;y++)B[y]=N.ReadUint32();for(var m=new Buffer.allocUnsafe(D),y=0;y<D;y++){var _=y%4,G=e(B[_]),x=h[G];m[y]=x,B[_]=r(B[_],f[x],R[x]),B[_]=i(N,B[_])}return m}function E(N,D){for(var R=0;R<256;R++)D[R]=0;for(var R=0;R<N.length;R++)D[N[R]]++}function Q(N){for(var D=0,R=0;R<256;R++)D+=N[R];const f=4096;var h=f/D;do{var B=0,y=0,m=0;D=0;for(var R=0;R<256;R++)N[R]!=0&&(B<N[R]&&(B=N[R],y=R),N[R]=Math.floor(N[R]*h),N[R]==0&&(N[R]=1),D+=N[R]);D<f?N[y]+=f-D:D-f<N[y]/2&&N[y]>2?N[y]-=D-f:D!=f&&(h=h*.99,m=1)}while(m)}function S(N,D){for(var R=0,f=0;f<256;f++)if(D[f]){if(R>0)R--;else if(N.WriteByte(f),f>0&&D[f-1]>0){for(R=f+1;R<256&&D[R];R++);R-=f+1,N.WriteByte(R)}N.WriteITF8(D[f])}N.WriteByte(0)}function p(N){const D=N.length;var R=new n("",0,257*3+9);R.WriteByte(0),R.WriteUint32(0),R.WriteUint32(0);var f=new Array(256);E(N,f),Q(f),S(R,f);var h=new Array(256);h[0]=0;for(var B=1;B<256;B++)h[B]=h[B-1]+f[B-1];for(var y=new Array(4),B=0;B<4;B++)y[B]=s();for(var m=Math.floor(D*1.05+100),_=new n("",m,m),B=D-1;B>=0;B--)y[B%4]=d(y[B%4],_,h[N[B]],f[N[B]],12);for(var B=3;B>=0;B--)a(y[B],_);var G=R.pos;return R.buf.writeInt32LE(G-9+(_.length-_.pos),1),R.buf.writeInt32LE(D,5),Buffer.concat([R.buf.slice(0,R.pos),_.buf.slice(_.pos,_.length)],R.pos+_.length-_.pos)}function q(N,D,R){for(var f=0;f<256;f++){D[f]=new Array(256),R[f]=new Array(256);for(var h=0;h<256;h++)D[f][h]=0}var B=N.ReadByte(),y=B,m=0;do o(N,D[B],R[B]),m>0?(m--,B++):(B=N.ReadByte(),B==y+1&&(m=N.ReadByte())),y=B;while(B!=0)}function k(N,D){var R=new Array(256),f=new Array(256);q(N,R,f);for(var h=new Array(256),B=0;B<256;B++)h[B]=A(f[B]);for(var y=new Array(4),m=new Array(4),_=0;_<4;_++)y[_]=N.ReadUint32(),m[_]=0;for(var G=new Buffer.allocUnsafe(D),x=Math.floor(D/4),B=0;B<x;B++)for(var _=0;_<4;_++){var L=e(y[_]),J=h[m[_]][L];G[B+_*x]=J,y[_]=r(y[_],f[m[_]][J],R[m[_]][J]),y[_]=i(N,y[_]),m[_]=J}for(B=4*B;B<D;){var L=e(y[3]),J=t(f[m[3]],L);G[B++]=J,y[3]=r(y[3],f[m[3]][J],R[m[3]][J]),y[3]=i(N,y[3]),m[3]=J}return G}function U(N,D,R){for(var f=0;f<256;f++){R[f]=0;for(var h=0;h<256;h++)D[f][h]=0}for(var B=0,f=0;f<N.length;f++)R[N[f]]++,D[B][N[f]]++,B=N[f];D[0][N[1*(N.length>>2)]]++,D[0][N[2*(N.length>>2)]]++,D[0][N[3*(N.length>>2)]]++,R[0]+=3}function O(N,D){for(var R=0;R<256;R++)D[R]&&Q(N[R])}function W(N,D,R){for(var f=0,h=0;h<256;h++)if(R[h]){if(f>0)f--;else if(N.WriteByte(h),h>0&&R[h-1]>0){for(f=h+1;f<256&&R[f];f++);f-=h+1,N.WriteByte(f)}S(N,D[h])}N.WriteByte(0)}function Y(N){const D=N.length;var R=new n("",0,257*257*3+9);R.WriteByte(1),R.WriteUint32(0),R.WriteUint32(0);for(var f=new Array(256),h=new Array(256),B=new Array(256),y=0;y<256;y++)h[y]=new Array(256),B[y]=new Array(256);U(N,h,f),O(h,f),W(R,h,f);for(var y=0;y<256;y++)if(f[y]){B[y][0]=0;for(var m=1;m<256;m++)B[y][m]=B[y][m-1]+h[y][m-1]}for(var _=new Array(4),G=new Array(4),m=0;m<4;m++)_[m]=s(),G[m]=0;for(var x=new n("",D,D),L=Math.floor(D/4),J=new Array(4),u=new Array(4),m=0;m<4;m++)J[m]=(m+1)*L-2,u[m]=N[J[m]+1];u[3]=N[D-1];for(var y=D-2;y>4*L-2;y--)_[3]=d(_[3],x,B[N[y]][u[3]],h[N[y]][u[3]],12),u[3]=N[y];for(;J[0]>=0;)for(var m=3;m>=0;m--){var I=N[J[m]];_[m]=d(_[m],x,B[I][u[m]],h[I][u[m]],12),u[m]=I,J[m]--}for(var m=3;m>=0;m--)_[m]=d(_[m],x,B[0][u[m]],h[0][u[m]],12);for(var y=3;y>=0;y--)a(_[y],x);var C=R.pos;return R.buf.writeInt32LE(C-9+(x.length-x.pos),1),R.buf.writeInt32LE(D,5),Buffer.concat([R.buf.slice(0,R.pos),x.buf.slice(x.pos,x.length)],R.pos+x.length-x.pos)}return ke={decode:g,encode:c},ke}var qe,tt;function Qt(){if(tt)return qe;tt=1;const n=Be();function e(u,I){return u&(1<<I)-1}function t(u,I){for(var C=0;I>=u[C+1];)C++;return C}function A(u,I){for(var C=1<<I,v=new Array(C),F=0,M=0;M<C;M++){for(;M>=u[F+1];)F++;v[M]=F}return v}function r(u,I,C,v){return C*(u>>v)+(u&(1<<v)-1)-I}function i(u,I){return I<32768&&(I=(I<<16)+u.ReadUint16()),I}function s(){return 32768}function a(u,I){I.WriteByteNeg(u>>24&255),I.WriteByteNeg(u>>16&255),I.WriteByteNeg(u>>8&255),I.WriteByteNeg(u>>0&255)}function w(u,I,C,v){for(var F=(1<<31-v)*C;u>=F;)I.WriteByteNeg(u>>8&255),I.WriteByteNeg(u&255),u>>=16;return u}function d(u,I,C,v,F){return u=w(u,I,v,F),u=(Math.floor(u/v)<<F)+u%v+C,u}function g(u,I){for(var C=new Array(256),v=0;v<256;v++)C[v]=0;for(var F=-1,v=0;v<u.length;v++)C[u[v]]+=u[v]==F?1:-1,F=u[v];for(var M=0,v=0;v<256;v++)C[v]>0&&M++;M||(M=1,C[0]=1);var P=new n("",0,M+1+u.length);P.WriteByte(M);for(var v=0;v<256;v++)C[v]>0&&P.WriteByte(v);for(var H=new Buffer.allocUnsafe(u.length),b=0,v=0;v<u.length;v++)if(H[b++]=u[v],C[u[v]]>0){F=u[v];for(var T=0;v+T+1<u.length&&u[v+T+1]==F;)T++;P.WriteUint7(T),v+=T}var z=B(P.buf.slice(0,P.pos),I),j=new n("",0,16);j.WriteUint7(P.pos*2),j.WriteUint7(b),j.WriteUint7(z.length);var P=Buffer.concat([j.buf.slice(0,j.pos),z]);return[P,H.slice(0,b)]}function c(u,I){var C=u.ReadUint7(),v=u.ReadUint7();if(C&1)var M=u.ReadData((C-1)/2);else{var F=u.ReadUint7(),M=u.ReadData(F);M=Y(new n(M),C/2,I)}var M=new n(M),H=new Array(256),b=M.ReadByte();b==0&&(b=256);for(var T=0;T<b;T++)H[M.ReadByte()]=1;return[H,M,v]}function o(u,I,C,v){new n(u);for(var F=new Buffer.allocUnsafe(v),M=0,H=0;M<v;H++){var b=u[H];if(I[b])for(var T=C.ReadUint7(),z=0;z<=T;z++)F[M++]=b;else F[M++]=b}return F}function l(u){for(var I=new Array(256),C=0;C<256;C++)I[C]=0;for(var C=0;C<u.length;C++)I[u[C]]++;for(var v=new Array(256),F=0,C=0;C<256;C++)I[C]>0&&(v[C]=F++);if(!(F>16)){if(F<=1)var M=new Buffer.allocUnsafe(0);else if(F<=2){var M=new Buffer.allocUnsafe(Math.ceil(u.length/8)),b=-1;for(C=0;C<u.length;C++)C%8==0&&(M[++b]=0),M[b]+=v[u[C]]<<C%8}else if(F<=4){var M=new Buffer.allocUnsafe(Math.ceil(u.length/4)),b=-1;for(C=0;C<u.length;C++)C%4==0&&(M[++b]=0),M[b]+=v[u[C]]<<C%4*2}else{var M=new Buffer.allocUnsafe(Math.ceil(u.length/2)),b=-1;for(C=0;C<u.length;C++)C%2==0&&(M[++b]=0),M[b]+=v[u[C]]<<C%2*4}var H=new n("",0,F+5);H.WriteByte(F);for(var b=0,C=0;C<256;C++)I[C]>0&&(I[C]=b++,H.WriteByte(C));return H.WriteUint7(M.length),[H.buf.slice(0,H.pos),M]}}function E(u){for(var I=u.ReadByte(),C=new Array(I),v=0;v<I;v++)C[v]=u.ReadByte();var F=u.ReadUint7();return[C,I,F]}function Q(u,I,C,v){var F=new Buffer.allocUnsafe(v),M=0;if(C<=1)for(var H=0;H<v;H++)F[H]=I[0];else if(C<=2)for(H=0;H<v;H++){if(H%8==0)var b=u[M++];F[H]=I[b&1],b>>=1}else if(C<=4)for(H=0;H<v;H++){if(H%4==0)var b=u[M++];F[H]=I[b&3],b>>=2}else if(C<=16)for(H=0;H<v;H++){if(H%2==0)var b=u[M++];F[H]=I[b&15],b>>=4}return F}function S(u,I,C){C==0&&(C=4);for(var v=new Array(C),F=new Array(C),M=0;M<C;M++)F[M]=Math.floor(I.length/C)+(I.length%C>M),v[M]=new Array(F[M]);for(var H=0,b=0;b<I.length;b+=C,H++)for(var T=0;T<C;T++)H<v[T].length&&(v[T][H]=I[b+T]);for(var z=new Array(C),j=0,M=0;M<C;M++){var P=U(v[M],0),X=U(v[M],1);z[M]=X.length<P.length?X:P,j+=z[M].length}var te=new n("",0,j+5*C+1);te.WriteByte(C);for(var M=0;M<C;M++)te.WriteUint7(z[M].length);for(var M=0;M<C;M++)te.WriteData(z[M],z[M].length);return te.buf.slice(0,te.buf.pos)}function p(u,I){for(var C=u.ReadByte(),v=new Array(C),F=new Array(C),M=0;M<C;M++)v[M]=u.ReadUint7();for(var H=new Array(C),M=0;M<C;M++)F[M]=Math.floor(I/C)+(I%C>M),H[M]=k(u,F[M]);for(var b=new Buffer.allocUnsafe(I),M=0;M<C;M++)for(var T=0;T<F[M];T++)b[T*C+M]=H[M][T];return b}function q(u){var I=new n(u);return k(I,0)}function k(u,I){var C=u.ReadByte(),v=C&1,F=C&4,M=C&8,H=C&16,b=C&32,T=C&64,z=C&128,j=F?32:4;if(H||(I=u.ReadUint7()),M)return p(u,I);if(z)var P=I,[X,te,I]=E(u);if(T)var V=I,[ie,ae,I]=c(u,j);if(b)var re=u.ReadData(I);else if(v==0)var re=Y(u,I,j);else var re=m(u,I,j);return T&&(re=o(re,ie,ae,V)),z&&(re=Q(re,X,te,P)),re}function U(u,I){var C=new n("",0,10);C.WriteByte(I);var v=I&1,F=I&4,M=I&8,H=I&16,b=I&32,T=I&64,z=I&128,j=F?32:4,P=I>>8;if(H||C.WriteUint7(u.length),M)return Buffer.concat([C.buf.slice(0,C.pos),S(C,u,P)]);var X=new Buffer.alloc(0);z&&([X,u]=l(u));var te=new Buffer.alloc(0);if(T&&([te,u]=g(u,j)),u.length<4&&v==1&&(v=0,C.buf[0]&=-2),b)var V=u;else if(v==0)var V=B(u,j);else var V=J(u,j);return Buffer.concat([C.buf.slice(0,C.pos),X,te,V])}function O(u){for(var I=new Array(256),C=0;C<256;C++)I[C]=0;var v=0,F=u.ReadByte(),M=F;do I[F]=1,v>0?(v--,F++):(F=u.ReadByte(),F==M+1&&(v=u.ReadByte())),M=F;while(F!=0);return I}function W(u,I,C){for(var v=0;v<256;v++)I[v]=0;for(var F=O(u),v=0;v<256;v++)F[v]>0&&(I[v]=u.ReadUint7());R(I,12),C[0]=0;for(var v=0;v<=255;v++)C[v+1]=C[v]+I[v]}function Y(u,I,C){var v=new Array(256),F=new Array(256);W(u,v,F);for(var M=A(F,12),H=new Array(C),b=0;b<C;b++)H[b]=u.ReadUint32();for(var T=new Buffer.allocUnsafe(I),b=0;b<I;b++){var z=b&C-1,j=e(H[z],12),P=M[j];T[b]=P,H[z]=r(H[z],F[P],v[P],12),H[z]=i(u,H[z])}return T}function N(u,I){for(var C=0;C<256;C++)I[C]=0;for(var C=0;C<u.length;C++)I[u[C]]++}function D(u,I){for(var C=0,v=0;v<256;v++)C+=u[v];const F=1<<I;var M=F/C;do{var H=0,b=0,T=0;C=0;for(var v=0;v<256;v++)u[v]!=0&&(H<u[v]&&(H=u[v],b=v),u[v]=Math.floor(u[v]*M),u[v]==0&&(u[v]=1),C+=u[v]);C<F?u[b]+=F-C:C-F<u[b]/2&&u[b]>2?u[b]-=C-F:C!=F&&(M=F/C,T=1)}while(T)}function R(u,I){for(var C=0,v=0;v<256;v++)C+=u[v];if(!(C==0||C==1<<I)){for(var F=0;C<1<<I;)C*=2,F++;for(var v=0;v<256;v++)u[v]<<=F}}function f(u,I){for(var C=0,v=0;v<256;v++)if(I[v]){if(C>0)C--;else if(u.WriteByte(v),v>0&&I[v-1]>0){for(C=v+1;C<256&&I[C];C++);C-=v+1,u.WriteByte(C)}}u.WriteByte(0)}function h(u,I){f(u,I);for(var C=0;C<256;C++)I[C]&&u.WriteUint7(I[C])}function B(u,I){const C=u.length;var v=new n("",0,257*3+9),F=new Array(256);N(u,F);var M=Math.ceil(Math.log2(C));M>12&&(M=12),D(F,M),h(v,F),D(F,12);var H=new Array(256);H[0]=0;for(var b=1;b<256;b++)H[b]=H[b-1]+F[b-1];for(var T=new Array(I),b=0;b<I;b++)T[b]=s();for(var z=new n("",C*1.05+100>>0,C*1.05+100>>0),b=C-1;b>=0;b--)T[b%I]=d(T[b%I],z,H[u[b]],F[u[b]],12);for(var b=I-1;b>=0;b--)a(T[b],z);return Buffer.concat([v.buf.slice(0,v.pos),z.buf.slice(z.pos,z.length)],v.pos+z.length-z.pos)}function y(u,I,C,v){for(var F=0;F<256;F++){I[F]=new Array(256),C[F]=new Array(256);for(var M=0;M<256;M++)I[F][M]=0}for(var H=O(u),F=0;F<256;F++)if(H[F]){for(var b=0,M=0;M<256;M++)H[M]&&(b>0?b--:(I[F][M]=u.ReadUint7(),I[F][M]==0&&(b=u.ReadByte())));R(I[F],v),C[F][0]=0;for(var M=0;M<256;M++)C[F][M+1]=C[F][M]+I[F][M]}}function m(u,I,C){var v=u.ReadByte(),F=v>>4,M=u;if(v&1)var H=u.ReadUint7(),b=u.ReadUint7(),v=new n(u.ReadData(b)),M=new n(Y(v,H,4));var T=new Array(256),z=new Array(256);y(M,T,z,F);for(var j=new Array(256),P=0;P<256;P++)j[P]=A(z[P],F);for(var X=new Array(C),te=new Array(C),V=0;V<C;V++)X[V]=u.ReadUint32(),te[V]=0;for(var ie=new Buffer.allocUnsafe(I),ae=Math.floor(I/C),P=0;P<ae;P++)for(var V=0;V<C;V++){var re=e(X[V],F),ne=j[te[V]][re];ie[P+V*ae]=ne,X[V]=r(X[V],z[te[V]][ne],T[te[V]][ne],F),X[V]=i(u,X[V]),te[V]=ne}for(P=C*P;P<I;){var re=e(X[C-1],F),ne=t(z[te[C-1]],re);ie[P++]=ne,X[C-1]=r(X[C-1],z[te[C-1]][ne],T[te[C-1]][ne],F),X[C-1]=i(u,X[C-1]),te[C-1]=ne}return ie}function _(u,I,C,v){for(var F=0;F<256;F++){C[F]=0;for(var M=0;M<256;M++)I[F][M]=0}for(var H=0,F=0;F<u.length;F++)C[H]++,I[H][u[F]]++,H=u[F];C[H]++;for(var F=1;F<v;F++)I[0][u[F*Math.floor(u.length/v)]]++;C[0]+=v-1}function G(u,I,C){for(var v=0;v<256;v++)if(I[v]){var F=Math.ceil(Math.log2(I[v]));F>C&&(F=C),D(u[v],F)}}function x(u,I,C){for(var v=0;v<256;v++)I[v]&&R(u[v],C)}function L(u,I,C){f(u,C);for(var v=0;v<256;v++)if(C[v]){for(var F=0,M=0;M<256;M++)if(C[M]){if(F)F--;else if(u.WriteUint7(I[v][M]),!I[v][M]){for(var H=M+1;H<256;H++)if(C[H])if(I[v][H]==0)F++;else break;u.WriteByte(F)}}}}function J(u,I){const C=u.length;for(var v=new n("",0,257*257*3+9),F=new Array(256),M=new Array(256),H=new Array(256),b=0;b<256;b++)M[b]=new Array(256),H[b]=new Array(256);var T=12;_(u,M,F,I),G(M,F,T);var z=new n("",0,257*257*3+9);L(z,M,F);var j=B(z.buf.slice(0,z.pos),4);j.length<z.pos?(v.WriteByte(1|T<<4),v.WriteUint7(z.pos),v.WriteUint7(j.length),v.WriteData(j,j.length)):(v.WriteByte(0|T<<4),v.WriteData(z.buf,z.pos)),x(M,F,T);for(var b=0;b<256;b++)if(F[b]){H[b][0]=0;for(var P=1;P<256;P++)H[b][P]=H[b][P-1]+M[b][P-1]}for(var X=new Array(I),te=new Array(I),P=0;P<I;P++)X[P]=s(),te[P]=0;for(var V=new n("",C*1.05+100>>0,C*1.05+100>>0),ie=Math.floor(C/I),ae=new Array(I),re=new Array(I),P=0;P<I;P++)ae[P]=(P+1)*ie-2,re[P]=u[ae[P]+1];re[I-1]=u[C-1];for(var b=C-2;b>I*ie-2;b--)X[I-1]=d(X[I-1],V,H[u[b]][re[I-1]],M[u[b]][re[I-1]],T),re[I-1]=u[b];for(var ne=new Array(I);ae[0]>=0;){for(var P=I-1;P>=0;P--)ne[P]=u[ae[P]];for(var P=I-1;P>=0;P--)X[P]=d(X[P],V,H[ne[P]][re[P]],M[ne[P]][re[P]],T),re[P]=ne[P],ae[P]--}for(var P=I-1;P>=0;P--)X[P]=d(X[P],V,H[0][re[P]],M[0][re[P]],T);for(var b=I-1;b>=0;b--)a(X[b],V);return Buffer.concat([v.buf.slice(0,v.pos),V.buf.slice(V.pos,V.length)],v.pos+V.length-V.pos)}return qe={decode:q,encode:U},qe}var Fe,At;function Et(){return At||(At=1,Fe=class{constructor(e){this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}RangeStartDecode(e){for(var t=0;t<5;t++)this.code=(this.code<<8)+e.ReadByte();this.code&=4294967295,this.code>>>=0}RangeGetFrequency(e){return this.range=Math.floor(this.range/e),Math.floor(this.code/this.range)}RangeDecode(e,t,A,r){for(this.code-=t*this.range,this.range*=A;this.range<1<<24;)this.range*=256,this.code=this.code*256+e.ReadByte()}RangeShiftLow(e){if(this.low<4278190080|this.carry){for(e.WriteByte(this.cache+this.carry);this.FFnum;)e.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}RangeEncode(e,t,A,r){var i=this.low;for(this.range=Math.floor(this.range/r),this.low+=t*this.range,this.low>>>=0,this.range*=A,this.low<i&&(this.carry!=0&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<1<<24;)this.range*=256,this.RangeShiftLow(e)}RangeFinishEncode(e){for(var t=0;t<5;t++)this.RangeShiftLow(e)}}),Fe}var Me,rt;function wt(){if(rt)return Me;rt=1;const n=65519,e=16;return Me=class{constructor(A=256){this.total_freq=A,this.max_sym=A-1,this.S=new Array,this.F=new Array;for(var r=0;r<=this.max_sym;r++)this.S[r]=r,this.F[r]=1}ModelDecode(A,r){for(var i=r.RangeGetFrequency(this.total_freq),s=0,a=0;s+this.F[a]<=i;)s+=this.F[a++];r.RangeDecode(A,s,this.F[a],this.total_freq),this.F[a]+=e,this.total_freq+=e,this.total_freq>n&&this.ModelRenormalise();var w=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var d=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=d,d=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=d}return w}ModelRenormalise(){this.total_freq=0;for(var A=0;A<=this.max_sym;A++)this.F[A]-=Math.floor(this.F[A]/2),this.total_freq+=this.F[A]}ModelEncode(A,r,w){for(var s=0,a=0;this.S[a]!=w;a++)s+=this.F[a];r.RangeEncode(A,s,this.F[a],this.total_freq),this.F[a]+=e,this.total_freq+=e,this.total_freq>n&&this.ModelRenormalise();var w=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var d=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=d,d=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=d}}},Me}var Ne,nt;function vt(){if(nt)return Ne;nt=1;var n={};return n.array=function(e){var t=0,A=0,r=[0,1,3,7,15,31,63,127,255];return function(i){for(var s=0;i>0;){var a=8-t;i>=a?(s<<=a,s|=r[a]&e[A++],t=0,i-=a):(s<<=i,s|=(e[A]&r[i]<<8-i-t)>>8-i-t,t+=i,i=0)}return s}},n.simple=function(e){var t=n.header(e),A,r,i=[],s=0;do r=n.decompress(e,t),r!=-1&&(i.push(r),s+=r.byteLength);while(r!=-1);A=new Uint8Array(s),s=0;for(var a=0;a<i.length;++a)r=i[a],A.set(r,s),s+=r.byteLength;return A},n.header=function(e){if(e(8*3)!=4348520)throw"No magic number found";var t=e(8)-48;if(t<1||t>9)throw"Not a BZIP archive";return t},n.decompress=function(e,t,A){for(var r=20,i=258,s=0,a=1,w=50,d=1e5*9,g="",c=0;c<6;c++)g+=e(8).toString(16);if(g=="177245385090")return-1;if(g!="314159265359")throw"eek not valid bzip data";if(e(32),e(1))throw"unsupported obsolete version";var o=e(24);if(o>d)throw"Initial position larger than buffer size";var l=e(16),E=new Uint8Array(256),Q=0;for(c=0;c<16;c++)if(l&1<<15-c){var S=e(16);for(I=0;I<16;I++)S&1<<15-I&&(E[Q++]=16*c+I)}var p=e(3);if(p<2||p>6)throw"another error";var q=e(15);if(q==0)throw"meh";for(var k=[],c=0;c<p;c++)k[c]=c;for(var U=new Uint8Array(32768),c=0;c<q;c++){for(var I=0;e(1);I++)if(I>=p)throw"whoops another error";var O=k[I];k.splice(I,1),k.splice(0,0,O),U[c]=O}for(var x=Q+2,W=[],I=0;I<p;I++){var Y=new Uint8Array(i),N=new Uint8Array(r+1);l=e(5);for(var c=0;c<x;c++){for(;;){if(l<1||l>r)throw"I gave up a while ago on writing error messages";if(!e(1))break;e(1)?l--:l++}Y[c]=l}var D,R;D=R=Y[0];for(var c=1;c<x;c++)Y[c]>R?R=Y[c]:Y[c]<D&&(D=Y[c]);var f;f=W[I]={},f.permute=new Uint32Array(i),f.limit=new Uint32Array(r+1),f.base=new Uint32Array(r+1),f.minLen=D,f.maxLen=R;for(var h=f.base.subarray(1),B=f.limit.subarray(1),y=0,c=D;c<=R;c++)for(var l=0;l<x;l++)Y[l]==c&&(f.permute[y++]=l);for(c=D;c<=R;c++)N[c]=B[c]=0;for(c=0;c<x;c++)N[Y[c]]++;for(y=l=0,c=D;c<R;c++)y+=N[c],B[c]=y-1,y<<=1,h[c+1]=y-(l+=N[c]);B[R]=y+N[R]-1,h[D]=0}for(var m=new Uint32Array(256),c=0;c<256;c++)k[c]=c;var _,G,x,L;_=G=x=L=0;for(var J=new Uint32Array(d);;){if(!x--){if(x=w-1,L>=q)throw"meow i'm a kitty, that's an error";f=W[U[L++]],h=f.base.subarray(1),B=f.limit.subarray(1)}for(c=f.minLen,I=e(c);;){if(c>f.maxLen)throw"rawr i'm a dinosaur";if(I<=B[c])break;c++,I=I<<1|e(1)}if(I-=h[c],I<0||I>=i)throw"moo i'm a cow";var u=f.permute[I];if(u==s||u==a){_||(_=1,l=0),u==s?l+=_:l+=2*_,_<<=1;continue}if(_){if(_=0,G+l>=d)throw"Boom.";for(O=E[k[0]],m[O]+=l;l--;)J[G++]=O}if(u>Q)break;if(G>=d)throw"I can't think of anything. Error";c=u-1,O=k[c],k.splice(c,1),k.splice(0,0,O),O=E[O],m[O]++,J[G++]=O}if(o<0||o>=G)throw"I'm a monkey and I'm throwing something at someone, namely you";for(var I=0,c=0;c<256;c++)S=I+m[c],m[c]=I,I=S;for(var c=0;c<G;c++)O=J[c]&255,J[m[O]]|=c<<8,m[O]++;var C=0,v=0,F=0;G&&(C=J[o],v=C&255,C>>=8,F=-1),G=G;var M=new Uint8Array(d),H,b,T,z=0;for(A||(A=1/0);G;){for(G--,b=v,C=J[C],v=C&255,C>>=8,F++==3?(H=v,T=b,v=-1):(H=1,T=v);H--;)if(M[z++]=T,!--A)return M;v!=b&&(F=0)}return M.subarray(0,z)},Ne=n,Ne}var xe,at;function mt(){if(at)return xe;at=1;const n=Et(),e=Be(),t=wt(),A=vt(),r=1,i=4,s=8,a=16,w=32,d=64,g=128;return xe=class{decode(o){return this.stream=new e(o),this.decodeStream(this.stream)}decodeStream(o,l=0){var E=this.stream.ReadByte();E&a||(l=this.stream.ReadUint7());var Q=l,S=E&r;if(E&s)return this.decodeStripe(this.stream,l);if(E&g){var p;[p,Q]=this.decodePackMeta(this.stream)}if(E&w)var q=this.decodeCat(this.stream,Q);else if(E&i)var q=this.decodeExt(this.stream,Q);else if(E&d)var q=S?this.decodeRLE1(this.stream,Q):this.decodeRLE0(this.stream,Q);else var q=S?this.decode1(this.stream,Q):this.decode0(this.stream,Q);return E&g&&(q=this.decodePack(q,p,l)),q}encode(o,l){if(this.stream=new e("",0,o.length*1.1+100),this.stream.WriteByte(l),l&a||this.stream.WriteUint7(o.length),l&s)return Buffer.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,o,l>>8)]);var E=l&r,Q=o.length,S;return l&g&&([S,o,Q]=this.encodePack(o)),l&g&&this.stream.WriteStream(S),l&d?E?this.encodeRLE1(o,Q,this.stream):this.encodeRLE0(o,Q,this.stream):E?this.encode1(o,Q,this.stream):this.encode0(o,Q,this.stream)}decode0(o,l){var E=new Buffer.allocUnsafe(l),Q=o.ReadByte();Q==0&&(Q=256);var S=new t(Q),p=new n(o);p.RangeStartDecode(o);for(var q=0;q<l;q++)E[q]=S.ModelDecode(o,p);return E}encode0(o,l,E){for(var Q=0,S=0;S<l;S++)Q<o[S]&&(Q=o[S]);Q++;var p=new t(Q);E.WriteByte(Q);for(var q=new n(E),S=0;S<l;S++)p.ModelEncode(E,q,o[S]);return q.RangeFinishEncode(E),E.buf.slice(0,E.pos)}decode1(o,l){var E=new Buffer.allocUnsafe(l),Q=o.ReadByte();Q==0&&(Q=256);for(var S=new Array(Q),p=0;p<Q;p++)S[p]=new t(Q);var q=new n(o);q.RangeStartDecode(o);for(var k=0,p=0;p<l;p++)E[p]=S[k].ModelDecode(o,q),k=E[p];return E}encode1(o,l,E){for(var Q=0,S=0;S<l;S++)Q<o[S]&&(Q=o[S]);Q++;for(var p=new Array(Q),S=0;S<Q;S++)p[S]=new t(Q);E.WriteByte(Q);for(var q=new n(E),k=0,S=0;S<l;S++)p[k].ModelEncode(E,q,o[S]),k=o[S];return q.RangeFinishEncode(E),E.buf.slice(0,E.pos)}decodeExt(o,l){var E=new Buffer.allocUnsafe(l),Q=A.array(o.buf.slice(o.pos)),S=A.header(Q),p=0;do{var q=A.decompress(Q,S);q!=-1&&(Buffer.from(q).copy(E,p),p+=q.length,S-=q.length)}while(q!=-1);return E}encodeExt(o,l){}decodeRLE0(o,l){var E=new Buffer.allocUnsafe(l),Q=o.ReadByte();Q==0&&(Q=256);for(var S=new t(Q),p=new Array(258),k=0;k<=257;k++)p[k]=new t(4);var q=new n(o);q.RangeStartDecode(o);for(var k=0;k<l;){E[k]=S.ModelDecode(o,q);for(var U=p[E[k]].ModelDecode(o,q),O=U,W=256;U==3;)U=p[W].ModelDecode(o,q),W=257,O+=U;for(var Y=1;Y<=O;Y++)E[k+Y]=E[k];k+=O+1}return E}encodeRLE0(o,l,E){for(var Q=0,k=0;k<l;k++)Q<o[k]&&(Q=o[k]);Q++;for(var S=new t(Q),p=new Array(258),k=0;k<=257;k++)p[k]=new t(4);E.WriteByte(Q);for(var q=new n(E),k=0;k<l;){S.ModelEncode(E,q,o[k]);for(var U=1;k+U<l&&o[k+U]==o[k];)U++;U--;var O=o[k];o[k],k+=U+1;var W=U>=3?3:U;for(p[O].ModelEncode(E,q,W),U-=W,O=256;W==3;)W=U>=3?3:U,p[O].ModelEncode(E,q,W),O=257,U-=W}return q.RangeFinishEncode(E),E.buf.slice(0,E.pos)}decodeRLE1(o,l){var E=new Buffer.allocUnsafe(l),Q=o.ReadByte();Q==0&&(Q=256);for(var S=new Array(Q),U=0;U<Q;U++)S[U]=new t(Q);for(var p=new Array(258),U=0;U<=257;U++)p[U]=new t(4);var q=new n(o);q.RangeStartDecode(o);for(var k=0,U=0;U<l;){E[U]=S[k].ModelDecode(o,q),k=E[U];for(var O=p[E[U]].ModelDecode(o,q),W=O,Y=256;O==3;)O=p[Y].ModelDecode(o,q),Y=257,W+=O;for(var N=1;N<=W;N++)E[U+N]=E[U];U+=W+1}return E}encodeRLE1(o,l,E){for(var Q=0,k=0;k<l;k++)Q<o[k]&&(Q=o[k]);Q++;for(var S=new Array(Q),k=0;k<Q;k++)S[k]=new t(Q);for(var p=new Array(258),k=0;k<=257;k++)p[k]=new t(4);E.WriteByte(Q);for(var q=new n(E),k=0,U=0;k<l;){S[U].ModelEncode(E,q,o[k]);for(var O=1;k+O<l&&o[k+O]==o[k];)O++;O--;var W=o[k];U=o[k],k+=O+1;var Y=O>=3?3:O;for(p[W].ModelEncode(E,q,Y),O-=Y,W=256;Y==3;)Y=O>=3?3:O,p[W].ModelEncode(E,q,Y),W=257,O-=Y}return q.RangeFinishEncode(E),E.buf.slice(0,E.pos)}decodePackMeta(o){this.nsym=o.ReadByte();for(var l=new Array(this.nsym),E=0;E<this.nsym;E++)l[E]=o.ReadByte();var Q=o.ReadUint7();return[l,Q]}decodePack(o,l,E){var Q=new Buffer.allocUnsafe(E);if(this.nsym<=1)for(var S=0;S<E;S++)Q[S]=l[0];else if(this.nsym<=2)for(var S=0,p=0;S<E;S++){if(S%8==0)var q=o[p++];Q[S]=l[q&1],q>>=1}else if(this.nsym<=4)for(var S=0,p=0;S<E;S++){if(S%4==0)var q=o[p++];Q[S]=l[q&3],q>>=2}else if(this.nsym<=16)for(var S=0,p=0;S<E;S++){if(S%2==0)var q=o[p++];Q[S]=l[q&15],q>>=4}else return o;return Q}packMeta(o){for(var l=new e("",0,1024),E=new Array(256),Q=0;Q<o.length;Q++)E[o[Q]]=1;for(var S=0,Q=0;Q<256;Q++)E[Q]&&(E[Q]=++S);l.WriteByte(S);for(var Q=0;Q<256;Q++)E[Q]&&(l.WriteByte(Q),E[Q]--);return[l,E,S]}encodePack(o){var l,E,Q;[l,E,Q]=this.packMeta(o);var S=o.length,p=0;if(Q<=1)return l.WriteUint7(0),[l,new Buffer.allocUnsafe(0),0];if(Q<=2){for(var q=new Buffer.allocUnsafe(Math.floor((S+7)/8)),p=0,k=0;p<(S&-8);p+=8,k++)q[k]=(E[o[p+0]]<<0)+(E[o[p+1]]<<1)+(E[o[p+2]]<<2)+(E[o[p+3]]<<3)+(E[o[p+4]]<<4)+(E[o[p+5]]<<5)+(E[o[p+6]]<<6)+(E[o[p+7]]<<7);if(p<S){q[k]=0;for(var U=0;p<S;)q[k]|=E[o[p++]]<<U,U++;k++}return l.WriteUint7(k),[l,q,q.length]}if(Q<=4){for(var q=new Buffer.allocUnsafe(Math.floor((S+3)/4)),p=0,k=0;p<(S&-4);p+=4,k++)q[k]=(E[o[p+0]]<<0)+(E[o[p+1]]<<2)+(E[o[p+2]]<<4)+(E[o[p+3]]<<6);if(p<S){q[k]=0;for(var U=0;p<S;)q[k]|=E[o[p++]]<<U,U+=2;k++}return l.WriteUint7(k),[l,q,q.length]}if(Q<=16){for(var q=new Buffer.allocUnsafe(Math.floor((S+1)/2)),p=0,k=0;p<(S&-2);p+=2,k++)q[k]=(E[o[p+0]]<<0)+(E[o[p+1]]<<4);return p<S&&(q[k++]=E[o[p++]]),l.WriteUint7(k),[l,q,q.length]}return l.WriteUint7(o.length),[l,o,o.length]}encodeStripe(o,l,E){E==0&&(E=4);for(var Q=new Array(E),S=new Array(E),p=0;p<E;p++)S[p]=Math.floor(l.length/E)+(l.length%E>p),Q[p]=new Array(S[p]);for(var q=0,k=0;k<l.length;k+=E,q++)for(var U=0;U<E;U++)q<Q[U].length&&(Q[U][q]=l[k+U]);for(var O=new Array(E),W=0,p=0;p<E;p++){var Y=this.encode(Q[p],0),N=this.encode(Q[p],1);O[p]=N.length<Y.length?N:Y,W+=O[p].length}var D=new e("",0,W+5*E+1);D.WriteByte(E);for(var p=0;p<E;p++)D.WriteUint7(O[p].length);for(var p=0;p<E;p++)D.WriteData(O[p],O[p].length);return D.buf.slice(0,D.buf.pos)}decodeStripe(o,l){for(var E=o.ReadByte(),Q=new Array(E),S=new Array(E),p=0;p<E;p++)Q[p]=o.ReadUint7();for(var q=new Array(E),p=0;p<E;p++)S[p]=Math.floor(l/E)+(l%E>p),q[p]=this.decodeStream(o,S[p]);for(var k=new Buffer.allocUnsafe(l),p=0;p<E;p++)for(var U=0;U<S[p];U++)k[U*E+p]=q[p][U];return k}decodeCat(o,l){for(var E=new Buffer.allocUnsafe(l),Q=0;Q<l;Q++)E[Q]=o.ReadByte();return E}},xe}var be,it;function iA(){if(it)return be;it=1;const n=Be(),e=wt(),t=Et();function A(f,h,B){for(var y=0,m=0,_=-1,G=new Array(1024);m<B;){var x=f.ReadByte();if(G[y++]=x,m+=x,x==_){var L=f.ReadByte();for(m+=x*L;L--;)G[y++]=x}_=x}var J=0;for(y=0,m=0;m<B;){var u=0;do{var I=G[y++];u+=I}while(I==255);for(;u--;)h[m++]=J;J++}}const r=2,i=4,s=8,a=16,w=32,d=64,g=128,c=1,o=2,l=4;function E(f,h,B){var y=f.context;return h.qctx=(h.qctx<<f.qshift)+f.qtab[B],y+=(h.qctx&(1<<f.qbits)-1)<<f.qloc,f.do_pos&&(y+=f.ptab[Math.min(h.p,1023)]<<f.ploc),f.do_delta&&(y+=f.dtab[Math.min(h.delta,255)]<<f.dloc,h.delta+=h.prevq!=B?1:0,h.prevq=B),f.do_sel&&(y+=h.s<<f.sloc),h.p--,y&65535}function Q(f){var h={};h.context=f.ReadUint16(),h.pflags=f.ReadByte(),h.do_dedup=h.pflags&r,h.fixed_len=h.pflags&i,h.do_sel=h.pflags&s,h.do_qmap=h.pflags&a,h.do_pos=h.pflags&w,h.do_delta=h.pflags&d,h.do_qtab=h.pflags&g,h.max_sym=f.ReadByte();var B=f.ReadByte();if(h.qbits=B>>4,h.qshift=B&15,B=f.ReadByte(),h.qloc=B>>4,h.sloc=B&15,B=f.ReadByte(),h.ploc=B>>4,h.dloc=B&15,h.qmap=new Array(256),h.pflags&a)for(var y=0;y<h.max_sym;y++)h.qmap[y]=f.ReadByte();else for(var y=0;y<256;y++)h.qmap[y]=y;if(h.qtab=new Array(1024),h.qbits>0&&h.pflags&g)A(f,h.qtab,256);else for(var y=0;y<256;y++)h.qtab[y]=y;return h.ptab=new Array(1024),h.pflags&w&&A(f,h.ptab,1024),h.dtab=new Array(256),h.pflags&d&&A(f,h.dtab,256),h}function S(f){var h={max_sym:0},B=f.ReadByte();if(B!=5){console.error("Invalid FQZComp version number");return}var y=f.ReadByte(),m=y&c?f.ReadByte():1,_=y.nparam>1?y.nparam-1:0,G=new Array(256);if(y&o)_=f.ReadByte(),A(f,G,256);else{for(var x=0;x<m;x++)G[x]=x;for(;x<256;x++)G[x]=m-1}h.do_rev=y&l,h.stab=G,h.max_sel=_,h.params=new Array(h.nparam);for(var L=0;L<m;L++)h.params[L]=Q(f),h.max_sym<h.params[L].max_sym&&(h.max_sym=h.params[L].max_sym);return h}function p(f){var h={};h.qual=new Array(65536);for(var B=0;B<65536;B++)h.qual[B]=new e(f.max_sym+1);h.len=new Array(4);for(var B=0;B<4;B++)h.len[B]=new e(256);return h.rev=new e(2),h.dup=new e(2),f.max_sel>0&&(h.sel=new e(f.max_sel+1)),h}function q(f,h,B,y,m,_){B.max_sel>0?m.s=y.sel.ModelDecode(f,h):m.s=0,m.x=B.stab[m.s];var G=B.params[m.x];if(G.fixed_len>=0){var x=y.len[0].ModelDecode(f,h);x|=y.len[1].ModelDecode(f,h)<<8,x|=y.len[2].ModelDecode(f,h)<<16,x|=y.len[3].ModelDecode(f,h)<<24,G.fixed_len>0&&(G.fixed_len=-x)}else x=-G.fixed_len;m.len=x,B.do_rev&&(_[m.rec]=y.rev.ModelDecode(f,h)),m.is_dup=0,G.pflags&r&&y.dup.ModelDecode(f,h)&&(m.is_dup=1),m.p=x,m.delta=0,m.qctx=0,m.prevq=0,m.rec++}function k(f,h){var B=f.ReadUint7(),y=S(f);if(y){var m=y.params,_=new Array(h.length),G=p(y),x=new t(f);x.RangeStartDecode(f);for(var L=new Buffer.allocUnsafe(B),J={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},u=0;u<B;){if(J.p==0){if(q(f,x,y,G,J,_),J.is_dup>0&&G.dup.ModelDecode(f,x)){for(var I=0;I<len;I++)L[u+I]=L[u+I-J.len];u+=J.len,J.p=0;continue}h.push(J.len);var m=y.params[J.x],C=m.context}var v=G.qual[C].ModelDecode(f,x);L[u++]=m.qmap[v],C=E(m,J,v)}return y.do_rev&&U(L,B,_,h),L}}function U(f,h,B,y){for(var m=0,_=0;_<h;){if(B[m])for(var G=0,x=y[m]-1;G<x;){var L=f[_+G];f[_+G]=f[_+x],f[_+x]=L,G++,x--}_+=y[m++]}}function O(f,h){var B=new n(f);return k(B,h)}function W(f,h,B,y){for(var m=B[0],_=0;_<B.length&&B[_]==m;_++);for(var G=_==B.length?1:0,x=0,L=0,_=0;_<256;_++)y[0][_]=0;for(var J=0,u=0,_=0;_<f.length;_++)u==0&&(u=h[J<h.length-1?J++:J]),y[0][f[_]]++,u--;for(var _=0;_<256;_++)y[0][_]&&(L<_&&(L=_),x++);var I=5,C=0;return x<=16&&(C=1,x<=2?I=1:x<=4?I=2:x<=8?I=3:I=4),[{qbits:8+(I>4),qshift:I,qloc:7,pbits:7,pshift:h[0]>128?1:0,ploc:0,dbits:I>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:L,nsym:x,do_qmap:C,do_dedup:0,fixed_len:h.length==1?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:I<=4?1:0,do_qtab:0,qbits:8+(I>4)-(G==0),sbits:1,sloc:15-(I<=4),do_stab:1,do_sel:1}]}function Y(f,h,B){for(var y=0,m=0,_=new Array(B*2),G=0;y<B;){for(var x=y;y<B&&h[y]==m;)y++;var L=y-x;do{var J=Math.min(255,L);_[G++]=J,L-=J}while(J==255);m++}var u=-1,I=new Array(B*2),C=0;for(y=0;y<G;){var v=_[y++];if(I[C++]=v,v==u){for(var x=y;y<G&&_[y]==u&&y-x<255;)y++;I[C++]=y-x}else u=v}f.WriteData(I,C)}function N(f,h,B,y,m,_,G){for(var x=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],L=0;L<h.length;L++)G[L]=L;for(;L<256;L++)G[L]=h.length-1;f.WriteByte(5);var J=(h.length>1?c:0)|(h[0].do_stab?o:0);if(f.WriteByte(J),J&c&&f.WriteByte(h.length),J&o){var u=1<<h[0].sbits;u>0&&u--,f.WriteByte(u),Y(f,G,256)}for(var I=0;I<h.length;I++){if(f.WriteUint16(h[I].context),f.WriteByte((h[I].do_qtab?g:0)|(h[I].do_delta?d:0)|(h[I].do_pos?w:0)|(h[I].do_qmap?a:0)|(h[I].do_sel?s:0)|(h[I].fixed_len?i:0)|(h[I].do_dedup?r:0)),h[I].do_qmap?f.WriteByte(h[I].nsym):f.WriteByte(h[I].max_sym),f.WriteByte(h[I].qbits<<4|h[I].qshift),f.WriteByte(h[I].qloc<<4|h[I].sloc),f.WriteByte(h[I].ploc<<4|h[I].dloc),h[I].do_qmap){h[I].max_sym=h[I].nsym;for(var C=0,L=0;L<256;L++)B[I][L]&&(f.WriteByte(L),B[I][L]=C++);for(;C<h[I].nsym;C++)f.WriteByte(0)}else for(var L=0;L<256;L++)B[I][L]=L;if(h[I].qbits>0){for(var L=0;L<256;L++)y[I][L]=L;h[I].do_qtab&&Y(f,y[I],256)}if(h[I].pbits>0){for(var L=0;L<1024;L++)m[I][L]=Math.min((1<<h[I].pbits)-1,L>>h[I].pshift);Y(f,m[I],1024)}if(h[I].dbits>0){for(var L=0;L<256;L++)x[L]>(1<<h[I].dbits)-1&&(x[L]=(1<<h[I].dbits)-1);for(var L=0;L<256;L++)_[I][L]=x[Math.min(x.length-1,L>>h[I].dshift)];Y(f,_[I],256)}}return f}function D(f,h,B,y,m,_,G,x,L,J){var u=1<<m[0].sbits;u>0&&u--;for(var I=h.length,C=0,b=0;b<m.length;b++)C<m[b].max_sym&&(C=m[b].max_sym);for(var v=new Array(65536),T=0;T<65536;T++)v[T]=new e(C+1);for(var F=new Array(4),T=0;T<4;T++)F[T]=new e(256);new e(2),new e(2);for(var M=new e(u+1),H=new t(h),b=0,T=0,z=0;T<I;){if(b==0){var j=y[z];m[0].sbits>0&&M.ModelEncode(f,H,j);var P=J[j],X=B[Math.min(B.length-1,z++)];m[P].fixed_len?m[P].fixed_len>0&&(F[0].ModelEncode(f,H,X&255),F[1].ModelEncode(f,H,X>>8&255),F[2].ModelEncode(f,H,X>>16&255),F[3].ModelEncode(f,H,X>>24&255),m[P].fixed_len=-1):(F[0].ModelEncode(f,H,X&255),F[1].ModelEncode(f,H,X>>8&255),F[2].ModelEncode(f,H,X>>16&255),F[3].ModelEncode(f,H,X>>24&255)),m[P].do_dedup&&process.exit(1),b=X;var te=0,V=m[P].context,ie=0,ae=0}var re=h[T++],ne=_[P][re];v[V].ModelEncode(f,H,ne),ie=(ie<<m[P].qshift)+G[P][ne],V=m[P].context,V+=(ie&(1<<m[P].qbits)-1)<<m[P].qloc,m[P].pbits>0&&(V+=x[P][Math.min(b,1023)]<<m[P].ploc),m[P].dbits>0&&(V+=L[P][Math.min(te,255)]<<m[P].dloc,te+=ae!=ne?1:0,ae=ne),m[P].do_sel&&(V+=j<<m[P].sloc),V=V&65535,b--}return H.RangeFinishEncode(f),f.buf.slice(0,f.pos)}function R(f,h,B){for(var y=new Array(2),m=new Array(2),_=new Array(2),G=new Array(2),x=new Array(256),L=0;L<2;L++)y[L]=new Array(256),m[L]=new Array(256),_[L]=new Array(1024),G[L]=new Array(256);var u=new n("",0,f.length*1.1+100);u.WriteUint7(f.length);var J=W(f,h,B,y),u=N(u,J,y,m,_,G,x);return D(u,f,h,B,J,y,m,_,G,x)}return be={decode:O,encode:R},be}var Le,ot;function oA(){if(ot)return Le;ot=1;const n=Be(),e=Qt(),t=mt();var A=new t;const r=0,i=1,s=2,a=3,w=4,d=5,g=6,c=7,o=8,l=9,E=10,Q=12;function S(D,R,f,h){for(var B=-1,y=new Array(256);!D.EOF();){var m=D.ReadByte(),_=m&128,G=m&64,x=m&63;if(_&&(B++,y[B]=new Array(13)),x!=r&&_){var L=new Array(h-1).fill(E);y[B][r]=new n(Buffer.from([x].concat(L)))}if(G){var J=D.ReadByte(),u=D.ReadByte();y[B][x]=new n(y[J][u].buf)}else{var I=D.ReadUint7(),C=D.ReadData(I);f?y[B][x]=A.decode(C):y[B][x]=e.decode(C),y[B][x]=new n(y[B][x])}}return y}function p(D,R){for(var f=D+"";f.length<R;)f="0"+f;return f}function q(D,R,f,h){var B=D[0][r].ReadByte(),y=D[0][B].ReadUint32(),m=h-y;if(B==d)return R[h]=R[m],f[h]=f[m],R[h];var _=1;R[h]="",f[h]=new Array(256);do{switch(B=D[_][r].ReadByte(),B){case s:f[h][_]=D[_][s].ReadChar();break;case i:f[h][_]=D[_][i].ReadString();break;case c:f[h][_]=D[_][c].ReadUint32();break;case a:var G=D[_][a].ReadUint32(),x=D[_][w].ReadByte();f[h][_]=p(G,x);break;case o:f[h][_]=(f[m][_]>>0)+D[_][o].ReadByte();break;case l:var G=(f[m][_]>>0)+D[_][l].ReadByte(),x=f[m][_].length;f[h][_]=p(G,x);break;case E:f[h][_]=f[m][_];break;default:f[h][_]="";break}R[h]+=f[h][_++]}while(B!=Q);return R[h]}function k(h,R,f){var h=new n(h);h.ReadUint32();var B=h.ReadUint32(),y=h.ReadByte(),m=S(h,R,y,B),_=new Array(B),G=new Array(B),x="";typeof f>"u"&&(f=`
`);for(var L=0;L<B;L++)x+=q(m,_,G,L)+f;return x}function U(D,R){var f=D.toString();f[f.length-1]==`
`&&(f=f.substring(0,f.length-1));var h=f.split(`
`),B=new n("",0,f.length*2+1e4);B.WriteUint32(f.length),B.WriteUint32(h.length),B.WriteByte(R);for(var y=new Array(h.length),m={},_=new Array(256).fill(0),G=0,x=0,L=0;L<h.length;L++){var[J,u]=N(y,m,_,h[L],L);G<J&&(G=J),x<u&&(x=u)}for(var I=0;I<G;I++){for(var C=new Array(Q+1),v=0;v<=Q;v++)C[v]=new n("",0,h.length*x);O(C,y,I,h),W(C,I,R,B)}return B.buf.slice(0,B.pos)}function O(D,R,f,h,B,y){for(var m=0;m<h.length;m++)if(!(f>0&&R[m][0].type==d)&&R[m][f])switch(D[r].WriteByte(R[m][f].type),R[m][f].type){case g:D[g].WriteUint32(R[m][f].val);break;case d:D[d].WriteUint32(R[m][f].val);break;case i:D[i].WriteString(R[m][f].val);break;case s:D[s].WriteChar(R[m][f].val);break;case c:D[c].WriteUint32(R[m][f].val);break;case a:D[a].WriteUint32(R[m][f].val),D[w].WriteByte(R[m][f].val.length);break;case o:D[R[m][f].type].WriteByte(R[m][f].val);break;case l:D[R[m][f].type].WriteByte(R[m][f].val);break}}function W(D,R,f,h){for(var B=0;B<=Q;B++)if(!(D[B].pos<=0)){h.WriteByte(B+(B==0?128:0)),D[B]=D[B].buf.slice(0,D[B].pos);var y=Y(D[B],f);h.WriteUint7(y.length),h.WriteData(y,y.length)}}function Y(D,R){var f=1073741824,h,B=[0,1,64,65,128,129,201];for(var y in B){var m=B[y];if(!(m&1&&D.length<100)&&!(m&8&&D.length%4!=0)){try{var _=R?A.encode(D,m):e.encode(D,m)}catch{var _=0}_&&f>_.length&&(f=_.length,h=_)}}return h}function N(D,R,f,h,B){var y=0,m=B-1;D[B]=new Array(256),R[h]?D[B][0]={type:d,val:B-R[h]}:D[B][0]={type:g,val:B==0?0:1},R[h]=B;for(var _=h.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),G=0;G<_.length;G++){var x=G+1,L=i,J=_[G];if(_[G].match(/^0+[0-9]*$/g)?L=a:_[G].match(/^[0-9]+$/g)?L=c:_[G].length==1&&(L=s),m>=0&&D[m][x]){if(D[m][x].str==_[G])L=E,J="";else if(D[m][x].type==c||D[m][x].type==o){var u=J-D[m][x].str;f[x]++,u>=0&&u<256&&f[x]>B/2&&(L=o,J=u)}else if((D[m][x].type==a||D[m][x].type==l)&&D[m][x].str.length==J.length){var u=J-D[m][x].str;f[x]++,u>=0&&u<256&&f[x]>B/2&&(L=l,J=u)}}D[B][x]={str:_[G],val:J,type:L},y<D[B][x].val.length+3&&(y=D[B][x].val.length+3)}return D[B][++x]={type:Q},[x+1,y]}return Le={encode:U,decode:k},Le}var Ue,st;function sA(){if(st)return Ue;st=1;var n=aA(),e=Qt(),t=mt(),A=iA(),r=oA();function i(g,c){n.decode(g).copy(c,0,0)}function s(g,c){e.decode(g).copy(c,0,0)}function a(g,c){return new t().decode(g).copy(c,0,0)}function w(g,c){var o=new Array;A.decode(g,o).copy(c,0,0)}function d(g,c){var o=r.decode(g,0,"\0");Buffer.from(o,"binary").copy(c,0,0)}return Ue={r4x8_uncompress:i,r4x16_uncompress:s,arith_uncompress:a,fqzcomp_uncompress:w,tok3_uncompress:d},Ue}var gA=sA();const Ee=Ke(gA);var cA=vt();const He=Ke(cA);var we={exports:{}};/*!
 * Based on xzwasm (c) Steve Sanderson. License: MIT - https://github.com/SteveSanderson/xzwasm
 * Contains xz-embedded by Lasse Collin and Igor Pavlov. License: Public domain - https://tukaani.org/xz/embedded.html
 * and walloc (c) 2020 Igalia, S.L. License: MIT - https://github.com/wingo/walloc
 */var fA=we.exports,gt;function lA(){return gt||(gt=1,function(n,e){(function(A,r){n.exports=r(zt)})(fA,t=>(()=>{var A=[,a=>{a.exports="data:application/wasm;base64,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IgENAAsLIAJCf4UL1RACDH8CfgJAAkAgACgCJEUNACAAKAIAIQIMAQtBACECIABBADoAKCAAQgA3AwAgAEIANwMYIABByABqQQBB5AAQhoCAgAAaIABBrAFqQQw2AgALIAAgASgCBCIDNgIQIABBsAFqIQQgAEHgAGohBSAAQcgAaiEGIABBtgFqIQcgAEGoAWohCCABKAIQIQkCQAJAAkACQANAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIOCgECAAQFBgcICQoPCyABKAIAIQogACgCqAEhAiAAKAKsASELIAEoAgQhDCABKAIIIQ0MAgsgCCAAKAKoASIMakEIaiABKAIAIAEoAgQiAmogASgCCCACayICIAAoAqwBIAxrIgwgAiAMSRsiAhCHgICAABogASABKAIEIAJqNgIEQQAhDCAAQQAgACgCqAEgAmoiAiACIAAoAqwBIgtGGzYCqAEgAiALRw0RIABBATYCAAJAIARBqIiAgABBBhCEgICAAEUNAEEFIQwMEgsgB0ECQQAQjYCAgAAgACgAuAFHDRBBBiEMIActAAANESAAIAAtALcBIgI2AiAgAkEESw0RQQEgAnRBE3FFDRELIAEoAgQiDCABKAIIIg1GDQ4CQCABKAIAIgogDGotAAAiCw0AIAAgDDYCECABIAxBAWo2AgRBBiECDAwLQQAhAiAAQQA2AqgBIABBAjYCACAAIAtBAnRBBGoiCzYCrAEgACALNgJACyAIIAJqQQhqIAogDGogDSAMayIMIAsgAmsiAiAMIAJJGyICEIeAgIAAGiABIAIgASgCBGo2AgRBACEMIABBACAAKAKoASACaiICIAIgACgCrAEiC0YbNgKoASACIAtHDQ8gACACQXxqIgI2AqwBQQchDCAEIAJBABCNgICAACAAIAAoAqwBIgtqQbABaigAAEcNDyAAQQI2AqgBIAAtALEBIgJBP3ENDAJAAkAgAkHAAHFFDQAgACAEIAggCxCRgICAAEEBRw0RIAAgACkDCDcDMCAALQCxASECDAELIABCfzcDMAtCfyEOAkAgAkEYdEEYdUF/Sg0AIAAgBCAIIAAoAqwBEJGAgIAAQQFHDRAgACkDCCEOCyAAIA43AzggACgCrAEiDSAAKAKoASICa0ECSQ0PIAAgAkEBaiIKNgKoASAIIAJqQQhq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IgM2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQgAyEJCwJAAkAgDiALQQt2IA8vAQAiCmwiA08iEg0AIAAgAzYCACAKQYAQIAprQQV2aiEKDAELIAAgDiADayIONgIEIAAgCyADayIDNgIAIAogCkEFdmshCkEAIQ0LIA8gCjsBACANIBFzIQ0gBEEBdCASciIEQYACSQ0ACwsgACACQQFqNgIgIAAoAhggAmogBDoAAAJAIAAoAiQgACgCICICTw0AIAAgAjYCJAtBACEDAkAgACgCZCIEQQRJDQACQCAEQQlLDQAgBEF9aiEDDAELIARBemohAwsgACADNgJkDAELIAAgDiADayIONgIEIAAgBCADayIDNgIAIA0gDyAPQQV2azsBACAAIApBAXRqIg9B+ANqIQQCQAJAIANB////B00NACAJIQoMAQsgACADQQh0IgM2AgAgACAJQQFqIgo2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQLAkACQCAOIANBC3YgBC8BACINbCIJSQ0AIAAgDiAJayIONgIEIAAgAyAJayIDNgIAIAQgDSANQQV2azsBACAPQZAEaiENAkACQCADQf///wdNDQAgCiEQDAELIAAgA0EIdCIDNgIAIAAgCkEBaiIQNgIQIAAgDkEIdCAAKAIMIApqLQAAciIONgIECwJAAkAgDiADQQt2IA0vAQAiCWwiBE8NACANIAlBgBAgCWtBBXZqOwEAIAxB2ARqIQMCQCAEQf///wdLDQAgACAEQQh0IgQ2AgAgACAQQQFqNgIQIAAgDkEIdCAAKAIMIBBqLQAAciIONgIECwJAIA4gBEELdiADLwEAIg1sIglJDQAgACAOIAlrNgIEIAAgBCAJazYCACADIA0gDUEFdms7AQAMAgsgAyANQYAQIA1rQQV2ajsBACAAIAk2AgAgAEEBNgJoIABBCUELIAAoAmRBB0kbNgJkDAMLIAAgDiAEayIONgIEIA0gCSAJQQV2azsBACAPQagEaiENAkACQCADIARrIgNB////B00NACAQIQoMAQsgACADQQh0IgM2AgAgACAQQQFqIgo2AhAgACAOQQh0IAAoAgwgEGotAAByIg42AgQLAkACQCAOIANBC3YgDS8BACIEbCIJTw0AIAAgCTYCACANIARBgBAgBGtBBXZqOwEAIAAoAlghAwwBCyAAIA4gCWsiDjYCBCANIAQgBEEFdms7AQAgD0HABGohBAJAIAMgCWsiA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgCkEBajYCECAAIA5BCHQgACgCDCAKai0AAHIiDjYCBAsCQAJAIA4gA0ELdiAELwEAIg1sIglPDQAgACAJNgIAIAQgDUGAECANa0EFdmo7AQAgACgCXCEDDAELIAAgDiAJazYCBCAAIAMgCWs2AgAgACgCYCEDIAAgACgCXDYCYCAEIA0gDUEFdms7AQALIAAgACgCWDYCXAsgACAAKAJUNgJYIAAgAzYCVAsgAEEIQQsgACgCZEEHSRs2AmQgACAHIAsQn4CAgAAMAQsgBCANQYAQIA1rQQV2ajsBACAAIAk2AgAgACAAKAJcNgJgIAAgACkCVDcCWCAAQQdBCiAAKAJkQQdJGzYCZCAAIAUgCxCfgICAACAAKAJoIgNBfmpBAyADQQZJGyEKIAAoAgAhA0EBIQ4DQCAAIApBB3RqIA5BAXQiDmpB2AdqIQ0CQAJAIANBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgRBAWo2AhAgACAAKAIEQQh0IAQgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgDS8BACIJbCIPSQ0AIAAgBCAPayIENgIEIAAgAyAPayIDNgIAIA0gCSAJQQV2azsBACAOQQFyIQ4MAQsgACAPNgIAIA0gCUGAECAJa0EFdmo7AQAgDyEDCyAOQcAASQ0ACwJAIA5BQGoiCUEDSw0AIAAgCTYCVAwBCyAAIA5BAXFBAnIiDTYCVCAJQQF2IQ8CQCAJQQ1LDQAgACANIA9Bf2oiDHQiCzYCVEEBIQ0gCCALQQF0akGEC2ohEEE/IA5rIRFBACEPA0AgECARIA1qQQF0aiEOAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA4vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACAOIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDUEBdEEBciENDAELIAAgAzYCACAOIAlBgBAgCWtBBXZqOwEAIA1BAXQhDQsgDCAPQQFqIg9HDQAMAgsLIA9Be2ohDgNAAkAgA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgACgCECIJQQFqNgIQIARBCHQgCSAAKAIMai0AAHIhBAsgACADQQF2IgM2AgAgACAEIANrIgRBH3UiCSANQQF0akEBaiINNgJUIAAgCSADcSAEaiIENgIEIA5Bf2oiDg0ACyAAIA1BBHQiCzYCVEEAIQ9BASEOA0AgACAOQQF0Ig5qQbwNaiENAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA0vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACANIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDkEBciEODAELIAAgAzYCACANIAlBgBAgCWtBBXZqOwEACyAPQQFqIg9BBEcNAAsLAkAgASAGIAAoAlQQnoCAgAANAEEADwsgACgCICECCyACIAAoAihJDQALC0EBIQMCQCAAKAIAIgRB////B0sNACAAIARBCHQ2AgBBASEDIAAgACgCECIEQQFqNgIQIAAgACgCBEEIdCAEIAAoAgxqLQAAcjYCBAsgAwtwAQF/AkBBqN4BEICAgIAAIgJFDQAgAkE0aiABNgIAIAJBPGogADYCAAJAAkACQCAAQX9qDgIAAQILIAIgARCAgICAACIANgIYIAANASACEIKAgIAADAILIAJBADYCGCACQThqQQA2AgALIAIPC0EAC9IBAQJ/QQYhAgJAIAFBJ0sNACAAQTBqIAFBAXFBAnIgAUEBdkELanQiATYCAAJAAkAgAEE8aigCACIDRQ0AQQQhAiABIABBNGooAgBLDQIgAEEsaiABNgIAIANBAkcNACAAQThqIgMoAgAgAU8NACAAIAE2AjggACgCGBCCgICAACAAIAAoAjAQgICAgAAiATYCGCABDQBBAyECDAELQQAhAiAAQQA2AkAgAEHQAGpBAToAACAAQegAakEANgIAIABB5N0BaiEDCyADQQA2AgALIAILIwACQCAAQTxqKAIARQ0AIAAoAhgQgoCAgAALIAAQgoCAgAAL9QEBBH9BACEDAkAgACgCDCACTQ0AIAAoAhggAk0NACABIAEoAgAiBCAAKAIQIAAoAggiBWsiBiAEIAYgBEkbIgRrNgIAIAUgAkF/c2ohAQJAIAUgAksNACAAKAIUIAFqIQELIAAoAgAiAiABai0AACEGQQEhAyAAIAVBAWo2AgggAiAFaiAGOgAAAkAgBEF/aiICRQ0AA0AgACgCACIFQQAgAUEBaiIBIAEgACgCFEYbIgFqLQAAIQQgACAAKAIIIgZBAWo2AgggBSAGaiAEOgAAIAJBf2oiAg0ACwsgACgCDCAAKAIIIgFPDQAgACABNgIMCyADC8gEAQd/AkACQCAAKAIAIgNBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAAKAIEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgAS8BACIGbCIFTw0AIAEgBkGAECAGa0EFdmo7AQAgASACQQR0akEEaiEHQQghCEECIQkMAQsgACAEIAVrIgQ2AgQgASAGIAZBBXZrOwEAAkAgAyAFayIDQf///wdLDQAgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkAgBCADQQt2IAEvAQIiBmwiBU8NACABIAZBgBAgBmtBBXZqOwECIAEgAkEEdGpBhAJqIQdBCCEIQQohCQwBCyAAIAQgBWsiBDYCBCABIAYgBkEFdms7AQIgAUGEBGohByADIAVrIQVBgAIhCEESIQkLIABB6ABqIAk2AgBBASEBA0AgByABQQF0IgFqIQMCQAJAIAVB////B00NACAFIQIMAQsgACAFQQh0IgI2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIAJBC3YgAy8BACIGbCIFSQ0AIAAgBCAFayIENgIEIAAgAiAFayIFNgIAIAMgBiAGQQV2azsBACABQQFyIQEMAQsgACAFNgIAIAMgBkGAECAGa0EFdmo7AQALIAEgCEkNAAsgAEHoAGogASAIayAJajYCAAsLNQEAQYAICy4IAAAAEAAAABgAAAAgAAAAKAAAADAAAABAAAAAUAAAAIAAAAAAAQAA/Td6WFoA"},a=>{a.exports=t}],r={};function i(a){var w=r[a];if(w!==void 0)return w.exports;var d=r[a]={exports:{}};return A[a](d,d.exports,i),d.exports}i.d=(a,w)=>{for(var d in w)i.o(w,d)&&!i.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:w[d]})},i.o=(a,w)=>Object.prototype.hasOwnProperty.call(a,w),i.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{XzReadableStream:()=>o});var a=i(1);const w=globalThis.ReadableStream||i(2).ReadableStream,d=0,g=1;class c{constructor(Q){this.exports=Q.exports,this.memory=this.exports.memory,this.ptr=this.exports.create_context(),this._refresh(),this.bufSize=this.mem32[0],this.inStart=this.mem32[1]-this.ptr,this.inEnd=this.inStart+this.bufSize,this.outStart=this.mem32[4]-this.ptr}supplyInput(Q){this._refresh(),this.mem8.subarray(this.inStart,this.inEnd).set(Q,0),this.exports.supply_input(this.ptr,Q.byteLength),this._refresh()}getNextOutput(){const Q=this.exports.get_next_output(this.ptr);if(this._refresh(),Q!==d&&Q!==g)throw new Error(`get_next_output failed with error code ${Q}`);return{outChunk:this.mem8.slice(this.outStart,this.outStart+this.mem32[5]),finished:Q===g}}needsMoreInput(){return this.mem32[2]===this.mem32[3]}outputBufferIsFull(){return this.mem32[5]===this.bufSize}resetOutputBuffer(){this.outPos=this.mem32[5]=0}dispose(){this.exports.destroy_context(this.ptr),this.exports=null}_refresh(){var Q;this.memory.buffer!==((Q=this.mem8)==null?void 0:Q.buffer)&&(this.mem8=new Uint8Array(this.memory.buffer,this.ptr),this.mem32=new Uint32Array(this.memory.buffer,this.ptr))}}const l=class l extends w{static async _getModuleInstance(){const Q=a.replace("data:application/wasm;base64,",""),S=Uint8Array.from(atob(Q),k=>k.charCodeAt(0)).buffer,p={},q=await WebAssembly.instantiate(S,p);l._moduleInstance=q.instance}constructor(Q){let S,p=null;const q=Q.getReader();super({async start(k){l._moduleInstance||await(l._moduleInstancePromise||(l._moduleInstancePromise=l._getModuleInstance())),S=new c(l._moduleInstance)},async pull(k){if(S.needsMoreInput()){if(p===null||p.byteLength===0){const{done:W,value:Y}=await q.read();W||(p=Y)}const O=Math.min(S.bufSize,p.byteLength);S.supplyInput(p.subarray(0,O)),p=p.subarray(O)}const U=S.getNextOutput();k.enqueue(U.outChunk),S.resetOutputBuffer(),U.finished&&(S.dispose(),k.close())},cancel(){return S.dispose(),q.cancel()}})}};De(l,"_moduleInstancePromise"),De(l,"_moduleInstance");let o=l})(),s})())}(we)),we.exports}var dA=lA();class yt extends Error{}class se extends Error{}class ee extends yt{}class hA extends yt{}function pt(n){return oe.Buffer.from(Ut.inflate(n))}const Z=12,Ce=1<<Z,ve=1<<23;class St{constructor(){this.F=void 0,this.C=void 0}}class IA{constructor(){this.fc=new Array(256);for(let e=0;e<this.fc.length;e+=1)this.fc[e]=new St;this.R=null}}class CA{constructor(){this.start=void 0,this.freq=void 0}}function uA(n,e,t){if(!(e<=65536))throw new ee("assertion failed: start <= 1<<16");if(!(t<=65536-e))throw new ee("assertion failed: freq <= 1<<16");n.start=e,n.freq=t}function Dt(n,e,t,A){const r=(1<<A)-1;return t*(n>>A)+(n&r)-e}function BA(n,e,t){return Dt(n,e.start,e.freq,t)}function QA(n,e){return n&(1<<e)-1}function EA(n,e,t,A,r){const i=(1<<r)-1;if(n=A*(n>>r)+(n&i)-t,n<ve)do{const s=255&e.get();n=n<<8|s}while(n<ve);return n}function wA(n,e,t,A){return EA(n,e,t.start,t.freq,A)}function vA(n,e){if(n<ve)do n=n<<8|255&e.get();while(n<ve);return n}const $={FC:St,AriDecoder:IA,DecodingSymbol:CA,symbolInit:uA,advanceStep:Dt,advanceSymbolStep:BA,get:QA,advanceSymbol:wA,renormalize:vA};function Rt(n){if(!n)throw new ee("assertion failed")}function mA(n,e,t){let A=0,r=0,i=n.get()&255;do e.fc[i]==null&&(e.fc[i]=new $.FC),e.fc[i].F=n.get()&255,e.fc[i].F>=128&&(e.fc[i].F&=-129,e.fc[i].F=(e.fc[i].F&127)<<8|n.get()&255),e.fc[i].C=r,$.symbolInit(t[i],e.fc[i].C,e.fc[i].F),e.R||(e.R=new Array(Ce)),e.R.fill(i,r,r+e.fc[i].F),r+=e.fc[i].F,A===0&&i+1===(255&n.getByteAt(n.position()))?(i=n.get()&255,A=n.get()&255):A!==0?(A-=1,i+=1):i=n.get()&255;while(i!==0);Rt(r<Ce)}function yA(n,e,t){let A=0,r=255&n.get();do{let i=0,s=0,a=255&n.get();e[r]==null&&(e[r]=new $.AriDecoder);do e[r].fc[a]==null&&(e[r].fc[a]=new $.FC),e[r].fc[a].F=255&n.get(),e[r].fc[a].F>=128&&(e[r].fc[a].F&=-129,e[r].fc[a].F=(e[r].fc[a].F&127)<<8|255&n.get()),e[r].fc[a].C=s,e[r].fc[a].F===0&&(e[r].fc[a].F=Ce),t[r][a]==null&&(t[r][a]=new $.RansDecSymbol),$.symbolInit(t[r][a],e[r].fc[a].C,e[r].fc[a].F),e[r].R==null&&(e[r].R=new Array(Ce)),e[r].R.fill(a,s,s+e[r].fc[a].F),s+=e[r].fc[a].F,Rt(s<=Ce),i===0&&a+1===(255&n.getByteAt(n.position()))?(a=255&n.get(),i=255&n.get()):i!==0?(i-=1,a+=1):a=255&n.get();while(a!==0);A===0&&r+1===(255&n.getByteAt(n.position()))?(r=255&n.get(),A=255&n.get()):A!==0?(A-=1,r+=1):r=255&n.get()}while(r!==0)}function pA(n,e,t,A){let r=n.getInt(),i=n.getInt(),s=n.getInt(),a=n.getInt();const w=A.remaining(),d=w&-4;for(let c=0;c<d;c+=4){const o=e.R[$.get(r,Z)],l=e.R[$.get(i,Z)],E=e.R[$.get(s,Z)],Q=e.R[$.get(a,Z)];A.putAt(c,o),A.putAt(c+1,l),A.putAt(c+2,E),A.putAt(c+3,Q),r=$.advanceSymbolStep(r,t[255&o],Z),i=$.advanceSymbolStep(i,t[255&l],Z),s=$.advanceSymbolStep(s,t[255&E],Z),a=$.advanceSymbolStep(a,t[255&Q],Z),r=$.renormalize(r,n),i=$.renormalize(i,n),s=$.renormalize(s,n),a=$.renormalize(a,n)}A.setPosition(d);let g;switch(w&3){case 0:break;case 1:g=e.R[$.get(r,Z)],$.advanceSymbol(r,n,t[255&g],Z),A.put(g);break;case 2:g=e.R[$.get(r,Z)],$.advanceSymbol(r,n,t[255&g],Z),A.put(g),g=e.R[$.get(i,Z)],$.advanceSymbol(i,n,t[255&g],Z),A.put(g);break;case 3:g=e.R[$.get(r,Z)],$.advanceSymbol(r,n,t[255&g],Z),A.put(g),g=e.R[$.get(i,Z)],$.advanceSymbol(i,n,t[255&g],Z),A.put(g),g=e.R[$.get(s,Z)],$.advanceSymbol(s,n,t[255&g],Z),A.put(g);break;default:throw new ee("invalid output size encountered during rANS decoding")}A.setPosition(0)}function SA(n,e,t,A){const r=e.remaining();let i=n.getInt(),s=n.getInt(),a=n.getInt(),w=n.getInt();const d=r>>2;let g=0,c=d,o=2*d,l=3*d,E=0,Q=0,S=0,p=0;for(;g<d;g+=1,c+=1,o+=1,l+=1){const q=255&t[E].R[$.get(i,Z)],k=255&t[Q].R[$.get(s,Z)],U=255&t[S].R[$.get(a,Z)],O=255&t[p].R[$.get(w,Z)];e.putAt(g,q),e.putAt(c,k),e.putAt(o,U),e.putAt(l,O),i=$.advanceSymbolStep(i,A[E][q],Z),s=$.advanceSymbolStep(s,A[Q][k],Z),a=$.advanceSymbolStep(a,A[S][U],Z),w=$.advanceSymbolStep(w,A[p][O],Z),i=$.renormalize(i,n),s=$.renormalize(s,n),a=$.renormalize(a,n),w=$.renormalize(w,n),E=q,Q=k,S=U,p=O}for(;l<r;l+=1){const q=255&t[p].R[$.get(w,Z)];e.putAt(l,q),w=$.advanceSymbol(w,n,A[p][q],Z),p=q}}const DA=4;function RA(n,e){const t=new $.AriDecoder,A=new Array(256);for(let r=0;r<A.length;r+=1)A[r]=new $.DecodingSymbol;return mA(n,t,A),pA(n,t,A,e),e}function _A(n,e){const t=new Array(256);for(let r=0;r<t.length;r+=1)t[r]=new $.AriDecoder;const A=new Array(256);for(let r=0;r<A.length;r+=1){A[r]=new Array(256);for(let i=0;i<A[r].length;i+=1)A[r][i]=new $.DecodingSymbol}return yA(n,t,A),SA(n,e,t,A),e}class ct{constructor(e,t=0){this._buffer=e,this._position=t,this.length=e.length}get(){const e=this._buffer[this._position];return this._position+=1,e}getByte(){return this.get()}getByteAt(e){return this._buffer[e]}position(){return this._position}put(e){return this._buffer[this._position]=e,this._position+=1,e}putAt(e,t){return this._buffer[e]=t,t}setPosition(e){return this._position=e,e}getInt(){const e=this._buffer.readInt32LE(this._position);return this._position+=4,e}remaining(){return this._buffer.length-this._position}}function kA(n,e,t=0){if(n.length===0)return e.fill(0),e;const A=new ct(n,t),r=A.get();if(r!==0&&r!==1)throw new ee(`Invalid rANS order ${r}`);if(A.getInt()!==A.remaining()-DA)throw new ee("Incorrect input length.");const s=A.getInt(),a=new ct(e||oe.Buffer.allocUnsafe(s));if(a.length<s)throw new ee(`Output buffer too small to fit ${s} bytes.`);switch(r){case 0:return RA(A,a);case 1:return _A(A,a);default:throw new ee(`Invalid rANS order: ${r}`)}}var Pe={exports:{}},Ge={exports:{}},ft;function qA(){return ft||(ft=1,function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,A){return t<<A|t>>>32-A},rotr:function(t,A){return t<<32-A|t>>>A},endian:function(t){if(t.constructor==Number)return e.rotl(t,8)&16711935|e.rotl(t,24)&4278255360;for(var A=0;A<t.length;A++)t[A]=e.endian(t[A]);return t},randomBytes:function(t){for(var A=[];t>0;t--)A.push(Math.floor(Math.random()*256));return A},bytesToWords:function(t){for(var A=[],r=0,i=0;r<t.length;r++,i+=8)A[i>>>5]|=t[r]<<24-i%32;return A},wordsToBytes:function(t){for(var A=[],r=0;r<t.length*32;r+=8)A.push(t[r>>>5]>>>24-r%32&255);return A},bytesToHex:function(t){for(var A=[],r=0;r<t.length;r++)A.push((t[r]>>>4).toString(16)),A.push((t[r]&15).toString(16));return A.join("")},hexToBytes:function(t){for(var A=[],r=0;r<t.length;r+=2)A.push(parseInt(t.substr(r,2),16));return A},bytesToBase64:function(t){for(var A=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)r*8+s*6<=t.length*8?A.push(n.charAt(i>>>6*(3-s)&63)):A.push("=");return A.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var A=[],r=0,i=0;r<t.length;i=++r%4)i!=0&&A.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<i*2|n.indexOf(t.charAt(r))>>>6-i*2);return A}};Ge.exports=e}()),Ge.exports}var Oe,lt;function dt(){if(lt)return Oe;lt=1;var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],A=0;A<e.length;A++)t.push(e.charCodeAt(A)&255);return t},bytesToString:function(e){for(var t=[],A=0;A<e.length;A++)t.push(String.fromCharCode(e[A]));return t.join("")}}};return Oe=n,Oe}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Je,ht;function FA(){if(ht)return Je;ht=1,Je=function(t){return t!=null&&(n(t)||e(t)||!!t._isBuffer)};function n(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function e(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&n(t.slice(0,0))}return Je}var It;function MA(){return It||(It=1,function(){var n=qA(),e=dt().utf8,t=FA(),A=dt().bin,r=function(i,s){i.constructor==String?s&&s.encoding==="binary"?i=A.stringToBytes(i):i=e.stringToBytes(i):t(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var a=n.bytesToWords(i),w=i.length*8,d=1732584193,g=-271733879,c=-1732584194,o=271733878,l=0;l<a.length;l++)a[l]=(a[l]<<8|a[l]>>>24)&16711935|(a[l]<<24|a[l]>>>8)&4278255360;a[w>>>5]|=128<<w%32,a[(w+64>>>9<<4)+14]=w;for(var E=r._ff,Q=r._gg,S=r._hh,p=r._ii,l=0;l<a.length;l+=16){var q=d,k=g,U=c,O=o;d=E(d,g,c,o,a[l+0],7,-680876936),o=E(o,d,g,c,a[l+1],12,-389564586),c=E(c,o,d,g,a[l+2],17,606105819),g=E(g,c,o,d,a[l+3],22,-1044525330),d=E(d,g,c,o,a[l+4],7,-176418897),o=E(o,d,g,c,a[l+5],12,1200080426),c=E(c,o,d,g,a[l+6],17,-1473231341),g=E(g,c,o,d,a[l+7],22,-45705983),d=E(d,g,c,o,a[l+8],7,1770035416),o=E(o,d,g,c,a[l+9],12,-1958414417),c=E(c,o,d,g,a[l+10],17,-42063),g=E(g,c,o,d,a[l+11],22,-1990404162),d=E(d,g,c,o,a[l+12],7,1804603682),o=E(o,d,g,c,a[l+13],12,-40341101),c=E(c,o,d,g,a[l+14],17,-1502002290),g=E(g,c,o,d,a[l+15],22,1236535329),d=Q(d,g,c,o,a[l+1],5,-165796510),o=Q(o,d,g,c,a[l+6],9,-1069501632),c=Q(c,o,d,g,a[l+11],14,643717713),g=Q(g,c,o,d,a[l+0],20,-373897302),d=Q(d,g,c,o,a[l+5],5,-701558691),o=Q(o,d,g,c,a[l+10],9,38016083),c=Q(c,o,d,g,a[l+15],14,-660478335),g=Q(g,c,o,d,a[l+4],20,-405537848),d=Q(d,g,c,o,a[l+9],5,568446438),o=Q(o,d,g,c,a[l+14],9,-1019803690),c=Q(c,o,d,g,a[l+3],14,-187363961),g=Q(g,c,o,d,a[l+8],20,1163531501),d=Q(d,g,c,o,a[l+13],5,-1444681467),o=Q(o,d,g,c,a[l+2],9,-51403784),c=Q(c,o,d,g,a[l+7],14,1735328473),g=Q(g,c,o,d,a[l+12],20,-1926607734),d=S(d,g,c,o,a[l+5],4,-378558),o=S(o,d,g,c,a[l+8],11,-2022574463),c=S(c,o,d,g,a[l+11],16,1839030562),g=S(g,c,o,d,a[l+14],23,-35309556),d=S(d,g,c,o,a[l+1],4,-1530992060),o=S(o,d,g,c,a[l+4],11,1272893353),c=S(c,o,d,g,a[l+7],16,-155497632),g=S(g,c,o,d,a[l+10],23,-1094730640),d=S(d,g,c,o,a[l+13],4,681279174),o=S(o,d,g,c,a[l+0],11,-358537222),c=S(c,o,d,g,a[l+3],16,-722521979),g=S(g,c,o,d,a[l+6],23,76029189),d=S(d,g,c,o,a[l+9],4,-640364487),o=S(o,d,g,c,a[l+12],11,-421815835),c=S(c,o,d,g,a[l+15],16,530742520),g=S(g,c,o,d,a[l+2],23,-995338651),d=p(d,g,c,o,a[l+0],6,-198630844),o=p(o,d,g,c,a[l+7],10,1126891415),c=p(c,o,d,g,a[l+14],15,-1416354905),g=p(g,c,o,d,a[l+5],21,-57434055),d=p(d,g,c,o,a[l+12],6,1700485571),o=p(o,d,g,c,a[l+3],10,-1894986606),c=p(c,o,d,g,a[l+10],15,-1051523),g=p(g,c,o,d,a[l+1],21,-2054922799),d=p(d,g,c,o,a[l+8],6,1873313359),o=p(o,d,g,c,a[l+15],10,-30611744),c=p(c,o,d,g,a[l+6],15,-1560198380),g=p(g,c,o,d,a[l+13],21,1309151649),d=p(d,g,c,o,a[l+4],6,-145523070),o=p(o,d,g,c,a[l+11],10,-1120210379),c=p(c,o,d,g,a[l+2],15,718787259),g=p(g,c,o,d,a[l+9],21,-343485551),d=d+q>>>0,g=g+k>>>0,c=c+U>>>0,o=o+O>>>0}return n.endian([d,g,c,o])};r._ff=function(i,s,a,w,d,g,c){var o=i+(s&a|~s&w)+(d>>>0)+c;return(o<<g|o>>>32-g)+s},r._gg=function(i,s,a,w,d,g,c){var o=i+(s&w|a&~w)+(d>>>0)+c;return(o<<g|o>>>32-g)+s},r._hh=function(i,s,a,w,d,g,c){var o=i+(s^a^w)+(d>>>0)+c;return(o<<g|o>>>32-g)+s},r._ii=function(i,s,a,w,d,g,c){var o=i+(a^(s|~w))+(d>>>0)+c;return(o<<g|o>>>32-g)+s},r._blocksize=16,r._digestsize=16,Pe.exports=function(i,s){if(i==null)throw new Error("Illegal argument "+i);var a=n.wordsToBytes(r(i,s));return s&&s.asBytes?a:s&&s.asString?A.bytesToString(a):n.bytesToHex(a)}}()),Pe.exports}var NA=MA();const xA=Ke(NA);class Qe extends Error{}function fe(n,e,t){let A=0;if(e.bytePosition+(7-e.bitPosition+t)/8>n.length)throw new Qe("read error during decoding. the file seems to be truncated.");for(let r=t;r;r--)A<<=1,A|=n[e.bytePosition]>>e.bitPosition&1,e.bitPosition-=1,e.bitPosition<0&&(e.bytePosition+=1),e.bitPosition&=7;return A}function bA(n){return n&-128?n&-16384?n&-2097152?n&-268435456?5:4:3:2:1}function K(n,e){let t=e;const A=n[t];let r;if(A<128?(r=A,t=t+1):A<192?(r=(A<<8|n[t+1])&16383,t=t+2):A<224?(r=(A<<16|n[t+1]<<8|n[t+2])&2097151,t=t+3):A<240?(r=(A<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])&268435455,t=t+4):(r=(A&15)<<28|n[t+1]<<20|n[t+2]<<12|n[t+3]<<4|n[t+4]&15,t=t+5),t>n.length)throw new Qe("Attempted to read beyond end of buffer; this file seems truncated.");return[r,t-e]}function me(n,e){let t=e;const A=n[t];let r;if(A<128)r=A,t+=1;else if(A<192)r=(n[t]<<8|n[t+1])&16383,t+=2;else if(A<224)r=(n[t]<<16|n[t+1]<<8|n[t+2])&2097151,r=(A&63)<<16|n.readUInt16LE(t+1),t+=3;else if(A<240)r=(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])&268435455,t+=4;else if(A<248)r=(n[t]&15)*2**32+(n[t+1]<<24)|(n[t+2]<<16|n[t+3]<<8|n[t+4]),t+=5;else if(A<252)r=((n[t]&7)<<8|n[t+1])*2**32+(n[t+2]<<24)|(n[t+3]<<16|n[t+4]<<8|n[t+5]),t+=6;else if(A<254)r=((n[t]&3)<<16|n[t+1]<<8|n[t+2])*2**32+(n[t+3]<<24)|(n[t+4]<<16|n[t+5]<<8|n[t+6]),t+=7;else if(A<255){if(r=Ve.fromBytesBE(n.slice(t+1,t+8)),r.greaterThan(Number.MAX_SAFE_INTEGER)||r.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");r=r.toNumber(),t+=8}else{if(r=Ve.fromBytesBE(n.slice(t+1,t+9)),r.greaterThan(Number.MAX_SAFE_INTEGER)||r.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");r=r.toNumber(),t+=9}return[r,t-e]}function le(n,e,t=0,A=0){const{offset:r,value:i}=e(n,t);return{...i,_endPosition:r+A,_size:r-t}}function pe(n,e){const t=n.prototype[e],A=`_memo_${e}`;n.prototype[e]=function(){if(!(A in this)){const i=t.call(this);this[A]=i,Promise.resolve(i).catch(()=>{delete this[A]})}return this[A]}}function LA(n){return xA(n.toUpperCase().replaceAll(/[^\u0021-\u007e]/g,""))}function _t(){return{parser:(n,e=0)=>{const t=n,A=new DataView(t.buffer,t.byteOffset,t.length);let r=0;const i=n.subarray(r,r+4).toString();r+=4;const s=A.getUint8(r);r+=1;const a=A.getUint8(r);r+=1;const w=t.subarray(r,r+20).toString().replaceAll("\0","");return r+=20,{value:{magic:i,majorVersion:s,minorVersion:a,fileId:w},offset:r}},maxLength:26}}function UA(){return{parser:(e,t=0)=>{const A=e,r=new DataView(A.buffer,A.byteOffset,A.length);let i=0;const s=r.getUint8(i),a=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][s];if(!a)throw new Error(`compression method number ${s} not implemented`);i+=1;const w=r.getUint8(i),d=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][w];if(!d)throw new Error(`invalid block content type id ${w}`);i+=1;const[g,c]=K(e,i);i+=c;const[o,l]=K(e,i);i+=l;const[E,Q]=K(e,i);return i+=Q,{offset:i,value:{uncompressedSize:E,compressedSize:o,contentId:g,contentType:d,compressionMethod:a}}},maxLength:17}}function HA(){return{parser:(n,e)=>{const t=n,r=new DataView(t.buffer,t.byteOffset,t.length).getUint32(e,!0);return e+=4,{offset:e,value:{crc32:r}}},maxLength:4}}function Ct(n,e,t){const A=n.toString("utf8",e,t),r=[];for(let i=0;i<A.length;i+=3)r.push(A.slice(i,i+3));return r}function PA(){return{parser:(n,e)=>{const[t,A]=K(n,e);e+=A;const r=n.subarray(e,e+t);e+=t;const i=[];let s=0,a=0;for(;a<r.length;a++)r[a]||(i.push(Ct(r,s,a)),s=a+1);return a>s&&i.push(Ct(r,s,a)),{value:{size:t,ents:i},offset:e}}}}function GA(){return{parser:(n,e)=>{const t=n,A=new DataView(t.buffer,t.byteOffset,t.length),[r,i]=K(n,e);e+=i;const[s,a]=K(n,e);e+=a;const w=[];for(let d=0;d<s;d++){const g=String.fromCharCode(n[e])+String.fromCharCode(n[e+1]);if(e+=2,g==="MI"||g==="UI"||g==="PI"||g==="RN"||g==="AP"||g==="RR")w.push({key:g,value:!!A.getUint8(e)}),e+=1;else if(g==="SM")w.push({key:g,value:[A.getUint8(e),A.getUint8(e+1),A.getUint8(e+2),A.getUint8(e+3),A.getUint8(e+4)]}),e+=5;else if(g==="TD"){const{offset:c,value:o}=PA().parser(n,e);w.push({key:g,value:o.ents}),e=c}else throw new Error(`unknown key ${g}`)}return{value:{mapSize:r,mapCount:s,ents:w},offset:e}}}}function Te(n){const e={};for(const{key:t,value:A}of n.ents)e[t]&&console.warn(`duplicate key ${t} in map`),e[t]=A;return e}function Ie(n){return typeof n.refSeqId=="number"}function OA(n){let e=0;return e+=5,e+=9,e+=5*2,e+=16,{parser:(A,r)=>{const[i,s]=K(A,r);r+=s;let a=0;if(n>=3){const[E,Q]=me(A,r);r+=Q,a=E}else if(n===2){const[E,Q]=K(A,r);r+=Q,a=E}else console.warn("recordCounter=0");const[w,d]=K(A,r);r+=d;const[g,c]=K(A,r);r+=c;const o=[];for(let E=0;E<g;E++){const[Q,S]=K(A,r);r+=S,o.push(Q)}let l;return n>=2&&(l=[...A.subarray(r,r+16)],r+=16),{value:{recordCounter:a,md5:l,contentIds:o,numContentIds:g,numBlocks:w,numRecords:i},offset:r}},maxLength:A=>e+A*5}}function JA(n){let e=0;return e+=5*4,e+=9,e+=5*3,e+=16,{parser:(t,A)=>{const[r,i]=K(t,A);A+=i;const[s,a]=K(t,A);A+=a;const[w,d]=K(t,A);A+=d;const[g,c]=K(t,A);A+=c;let o=0;if(n>=3){const[O,W]=me(t,A);A+=W,o=O}else if(n===2){const[O,W]=K(t,A);A+=W,o=O}else console.warn("majorVersion is <2, recordCounter set to 0");const[l,E]=K(t,A);A+=E;const[Q,S]=K(t,A);A+=S;const p=[];for(let O=0;O<Q;O++){const[W,Y]=K(t,A);A+=Y,p.push(W)}const[q,k]=K(t,A);A+=k;let U;return n>=2&&(U=[...t.subarray(A,A+16)],A+=16),{value:{md5:U,numBlocks:l,numRecords:g,numContentIds:Q,refSeqSpan:w,refSeqId:r,refSeqStart:s,recordCounter:o,refBaseBlockId:q,contentIds:p},offset:A}},maxLength:t=>e+t*5}}function TA(){return{parser:(n,e)=>ue(n,e)}}function ue(n,e){const t=n,A=new DataView(t.buffer,t.byteOffset,t.length),[r,i]=K(n,e);e+=i;const[s,a]=K(n,e);e+=a;const w={};if(r!==0)if(r===1){const[d,g]=K(n,e);w.blockContentId=d,e+=g}else if(r===2){const[d,g]=K(n,e);w.offset=d,e+=g;const[c,o]=K(n,e);w.M=c,e+=o}else if(r===3){const d=K(n,e),g=d[0];e+=d[1];const c=[];for(let Q=0;Q<g;Q++){const S=K(n,e);c.push(S[0]),e+=S[1]}w.symbols=c;const o=K(n,e),l=d[0];w.numLengths=l,w.numCodes=g,w.numLengths=l,e+=o[1];const E=[];for(let Q=0;Q<l;Q++){const S=K(n,e);e+=S[1],E.push(S[0])}w.bitLengths=E}else if(r===4){const{value:d,offset:g}=ue(n,e);w.lengthsEncoding=d,e=g;const{value:c,offset:o}=ue(n,e);w.valuesEncoding=c,e=o}else if(r===5){w.stopByte=A.getUint8(e),e+=1;const[d,g]=K(n,e);w.blockContentId=d,e+=g}else if(r===6){const[d,g]=K(n,e);w.offset=d,e+=g;const[c,o]=K(n,e);w.length=c,e+=o}else if(r===7){const[d,g]=K(n,e);w.offset=d,e+=g;const[c,o]=K(n,e);w.K=c,e+=o}else if(r===8){const[d,g]=K(n,e);w.offset=d,e+=g;const[c,o]=K(n,e);w.log2m=c,e+=o}else if(r===9){const[d,g]=K(n,e);w.offset=d,e+=g}else throw new Error(`unknown codecId ${r}`);return{value:{codecId:r,parametersBytes:s,parameters:w},offset:e}}function kt(){return{parser:(n,e)=>{const[t,A]=K(n,e);e+=A;const[r,i]=K(n,e);e+=i;const s=[];for(let a=0;a<r;a++){const w=String.fromCharCode(n[e])+String.fromCharCode(n[e+1]);e+=2;const{value:d,offset:g}=ue(n,e);e=g,s.push({key:w,value:d})}return{value:{mapSize:t,ents:s,mapCount:r},offset:e}}}}function qt(){return{parser:(n,e)=>{const[t,A]=K(n,e);e+=A;const[r,i]=K(n,e);e+=i;const s=[];for(let a=0;a<r;a++){const[w,d]=K(n,e);e+=d;const g=String.fromCharCode(w>>16&255)+String.fromCharCode(w>>8&255)+String.fromCharCode(w&255),{value:c,offset:o}=ue(n,e);e=o,s.push({key:g,value:c})}return{value:{mapSize:t,ents:s,mapCount:r},offset:e}}}}function WA(){return{parser:(n,e)=>{const{value:t,offset:A}=GA().parser(n,e);e=A;const{value:r,offset:i}=kt().parser(n,e);e=i;const{value:s,offset:a}=qt().parser(n,e);return e=a,{value:{dataSeriesEncoding:Te(r),preservation:Te(t),tagEncoding:Te(s)},offset:e}}}}function YA(n){let e=4;return e+=5*4,e+=9,e+=9,e+=10,{maxLength:e,parser:(t,A)=>{const r=t,s=new DataView(r.buffer,r.byteOffset,r.length).getInt32(A,!0);A+=4;const[a,w]=K(t,A);A+=w;const[d,g]=K(t,A);A+=g;const[c,o]=K(t,A);A+=o;const[l,E]=K(t,A);A+=E;let Q=0;if(n>=3){const[O,W]=me(t,A);Q=O,A+=W}else if(n===2){const[O,W]=K(t,A);Q=O,A+=W}else console.warn("setting recordCounter=0");let S;if(n>1){const[O,W]=me(t,A);S=O,A+=W}const[p,q]=K(t,A);A+=q;const[k,U]=K(t,A);return A+=U,{value:{length:s,refSeqId:a,refSeqStart:d,alignmentSpan:c,numBlocks:p,numLandmarks:k,numBases:S,recordCounter:Q,numRecords:l},offset:A}}}}function KA(n){return{parser:(e,t)=>{const A=e,r=new DataView(A.buffer,A.byteOffset,A.length),[i,s]=K(e,t);t+=s;const a=[];for(let d=0;d<i;d++){const[g,c]=K(e,t);t+=c,a.push(g)}let w;return n>=3&&(w=r.getUint32(t,!0),t+=4),{value:{...w===void 0?{}:{crc32:w},numLandmarks:i,landmarks:a},offset:t}},maxLength:e=>5+5*e+4}}function ce(n){return{cramFileDefinition:_t(),cramBlockHeader:UA(),cramBlockCrc32:HA(),cramDataSeriesEncodingMap:kt(),cramTagEncodingMap:qt(),cramCompressionHeader:WA(),cramEncoding:TA(),cramUnmappedSliceHeader:OA(n),cramMappedSliceHeader:JA(n),cramContainerHeader1:YA(n),cramContainerHeader2:KA(n)}}function ye(n){let e="";for(let t=0;t<n.length&&n[t]!==0;t++)e+=String.fromCharCode(n[t]);return e}function zA(n){const e=String.fromCharCode(n[0]),r=new DataView(n.buffer).getUint32(1,!0),i=new Array(r);if(n=n.slice(5),e==="c"){const s=new Int8Array(n.buffer);for(let a=0;a<r;a+=1)i[a]=s[a]}else if(e==="C"){const s=new Uint8Array(n.buffer);for(let a=0;a<r;a+=1)i[a]=s[a]}else if(e==="s"){const s=new Int16Array(n.buffer);for(let a=0;a<r;a+=1)i[a]=s[a]}else if(e==="S"){const s=new Uint16Array(n.buffer);for(let a=0;a<r;a+=1)i[a]=s[a]}else if(e==="i"){const s=new Int32Array(n.buffer);for(let a=0;a<r;a+=1)i[a]=s[a]}else if(e==="I"){const s=new Uint32Array(n.buffer);for(let a=0;a<r;a+=1)i[a]=s[a]}else if(e==="f"){const s=new Float32Array(n.buffer);for(let a=0;a<r;a+=1)i[a]=s[a]}else throw new Error(`unknown type: ${e}`);return i}function $A(n,e){if(n==="Z")return ye(e);if(n==="A")return String.fromCharCode(e[0]);if(n==="I")return new Uint32Array(e.buffer)[0];if(n==="i")return new Int32Array(e.buffer)[0];if(n==="s")return new Int16Array(e.buffer)[0];if(n==="S")return new Uint16Array(e.buffer)[0];if(n==="c")return new Int8Array(e.buffer)[0];if(n==="C")return e[0];if(n==="f")return new Float32Array(e.buffer)[0];if(n==="H")return Number.parseInt(ye(e).replace(/^0x/,""),16);if(n==="B")return zA(e);throw new ee(`Unrecognized tag type ${n}`)}function VA(n,e,t,A,r){let i=0,s=n-1;const a=new Array(e);function w([d,g]){const c=t(g);if(d==="character")return String.fromCharCode(c);if(d==="string"){let o="";for(let l=0;l<c.byteLength;l++)o+=String.fromCharCode(c[l]);return o}return d==="numArray"?c.toArray():c}for(let d=0;d<e;d+=1){const g=String.fromCharCode(t("FC")),c=t("FP"),o={B:["character","BA"],S:["string",r>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[g];if(!o)throw new ee(`invalid read feature code "${g}"`);let l=w(o);const E={B:["number","QS"]}[g];E&&(l=[l,w(E)]),i+=c;const Q=i;s+=c;const S=s;g==="D"||g==="N"?s+=l:g==="I"||g==="S"?s-=l.length:g==="i"&&(s-=1),a[d]={code:g,pos:Q,refPos:S,data:l}}return a}function XA(n,e,t,A,r,i,s,a,w){let d=e("BF");const g=e("CF");if(!Ie(A.parsedContent))throw new Error("slice header not mapped");const c=a>1&&A.parsedContent.refSeqId===-2?e("RI"):A.parsedContent.refSeqId,o=e("RL");let l=e("AP");t.APdelta&&(l=l+s.lastAlignmentStart),s.lastAlignmentStart=l;const E=e("RG");let Q;t.readNamesIncluded&&(Q=ye(e("RN")));let S,p,q;if(he.isDetached(g)){const h=e("MF");let B;t.readNamesIncluded||(B=ye(e("RN")),Q=B);const y=e("NS"),m=e("NP");(h||y>-1)&&(S={mateFlags:h,mateSequenceId:y,mateAlignmentStart:m,mateReadName:B}),p=e("TS"),Ze.isUnmapped(h)&&(d=Re.setMateUnmapped(d)),Ze.isOnNegativeStrand(h)&&(d=Re.setMateReverseComplemented(d))}else he.isWithMateDownstream(g)&&(q=e("NF")+w+1);const k=e("TL");if(k<0)throw new ee("invalid TL index");const U={},O=t.getTagNames(k),W=O.length;for(let h=0;h<W;h+=1){const B=O[h],y=B.slice(0,2),m=B.slice(2,3),_=t.getCodecForTag(B).decode(n,r,i,s);U[y]=typeof _=="number"?_:$A(m,_)}let Y,N,D,R,f;if(Re.isSegmentUnmapped(d))if(he.isDecodeSequenceAsStar(g))f=null,R=null;else{const h=new Array(o);for(let B=0;B<h.length;B+=1)h[B]=e("BA");if(f=String.fromCharCode(...h),he.isPreservingQualityScores(g)){R=new Array(o);for(let B=0;B<h.length;B+=1)R[B]=e("QS")}}else{const h=e("FN");if(h&&(Y=VA(l,h,e,t,a)),N=o,Y)for(const{code:B,data:y}of Y)B==="D"||B==="N"?N+=y:B==="I"||B==="S"?N=N-y.length:B==="i"&&(N=N-1);if(Number.isNaN(N)&&(console.warn(`${Q||`${c}:${l}`} record has invalid read features`),N=o),D=e("MQ"),he.isPreservingQualityScores(g)){R=new Array(o);for(let B=0;B<R.length;B++)R[B]=e("QS")}}return{readLength:o,sequenceId:c,cramFlags:g,flags:d,alignmentStart:l,readGroupId:E,readName:Q,mateToUse:S,templateSize:p,mateRecordNumber:q,readFeatures:Y,lengthOnRef:N,mappingQuality:D,qualityScores:R,readBases:f,tags:U}}function ZA(n,e,t){function A(w){const d=[w];if(w.mateRecordNumber!==void 0&&w.mateRecordNumber>=0){const g=n[w.mateRecordNumber];if(!g)throw new ee("intra-slice mate record not found, this file seems malformed");d.push(...A(g))}return d}const r=A(t),i=r.map(w=>w.alignmentStart),s=r.map(w=>w.alignmentStart+w.readLength-1),a=Math.max(...s)-Math.min(...i)+1;a>=0&&r.forEach(w=>{if(w.templateLength!==void 0)throw new ee("mate pair group has some members that have template lengths already, this file seems malformed");w.templateLength=a})}function jA(n,e){const t=Math.min(n.alignmentStart,e.alignmentStart),r=Math.max(n.alignmentStart+n.readLength-1,e.alignmentStart+e.readLength-1)-t+1;n.templateLength=r,e.templateLength=r}function er(n,e,t,A){const r=!!(A.mate||A.mateRecordNumber!==void 0&&A.mateRecordNumber!==e);t.readName||(t.readName=String(t.uniqueId),A.readName=t.readName),t.mate={sequenceId:A.sequenceId,alignmentStart:A.alignmentStart,uniqueId:A.uniqueId},A.readName&&(t.mate.readName=A.readName),!A.mate&&A.mateRecordNumber===void 0&&(A.mate={sequenceId:t.sequenceId,alignmentStart:t.alignmentStart,uniqueId:t.uniqueId},t.readName&&(A.mate.readName=t.readName)),t.flags|=Ae.BAM_FPAIRED,A.flags&Ae.BAM_FUNMAP&&(t.flags|=Ae.BAM_FMUNMAP),t.flags&Ae.BAM_FUNMAP&&(A.flags|=Ae.BAM_FMUNMAP),A.flags&Ae.BAM_FREVERSE&&(t.flags|=Ae.BAM_FMREVERSE),t.flags&Ae.BAM_FREVERSE&&(A.flags|=Ae.BAM_FMREVERSE),t.templateLength===void 0&&(r?ZA(n,e,t):jA(t,A)),t.mateRecordNumber=void 0}class Ft{constructor(e,t,A){this.container=e,this.containerPosition=t,this.sliceSize=A,this.file=e.file}async getHeader(){const{majorVersion:e}=await this.file.getDefinition(),t=ce(e),A=await this.container.getHeader();if(!A)throw new Error("no container header detected");const r=await this.file.readBlock(A._endPosition+this.containerPosition);if(r===void 0)throw new Error("block header undefined");if(r.contentType==="MAPPED_SLICE_HEADER"){const i=le(r.content,t.cramMappedSliceHeader.parser,0,A._endPosition);return{...r,parsedContent:i}}else if(r.contentType==="UNMAPPED_SLICE_HEADER"){const i=le(r.content,t.cramUnmappedSliceHeader.parser,0,A._endPosition);return{...r,parsedContent:i}}else throw new ee(`error reading slice header block, invalid content type ${r.contentType}`)}async getBlocks(){const e=await this.getHeader();let t=e._endPosition;const A=new Array(e.parsedContent.numBlocks);for(let r=0;r<A.length;r++){const i=await this.file.readBlock(t);if(i===void 0)throw new Error("block undefined");A[r]=i,t=A[r]._endPosition}return A}async getCoreDataBlock(){return(await this.getBlocks())[0]}async _getBlocksContentIdIndex(){const e=await this.getBlocks(),t={};return e.forEach(A=>{A.contentType==="EXTERNAL_DATA"&&(t[A.contentId]=A)}),t}async getBlockByContentId(e){return(await this._getBlocksContentIdIndex())[e]}async getReferenceRegion(){const e=(await this.getHeader()).parsedContent;if(!Ie(e))throw new Error("slice header not mapped");if(e.refSeqId<0)return;const t=await this.container.getCompressionScheme();if(t===void 0)throw new Error("compression scheme undefined");if(e.refBaseBlockId>=0){const A=await this.getBlockByContentId(e.refBaseBlockId);if(!A)throw new ee("embedded reference specified, but reference block does not exist");return{seq:A.data.toString("utf8"),start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}if(t.referenceRequired||this.file.fetchReferenceSequenceCallback){if(!this.file.fetchReferenceSequenceCallback)throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");const A=await this.file.fetchReferenceSequenceCallback(e.refSeqId,e.refSeqStart,e.refSeqStart+e.refSeqSpan-1);if(A.length!==e.refSeqSpan)throw new hA("seqFetch callback returned a reference sequence of the wrong length");return{seq:A,start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}}getAllRecords(){return this.getRecords(()=>!0)}async _fetchRecords(){var e,t;const{majorVersion:A}=await this.file.getDefinition(),r=await this.container.getCompressionScheme();if(r===void 0)throw new Error("compression scheme undefined");const i=await this.getHeader(),s=await this._getBlocksContentIdIndex();if(A>1&&this.file.options.checkSequenceMD5&&Ie(i.parsedContent)&&i.parsedContent.refSeqId>=0&&((e=i.parsedContent.md5)===null||e===void 0?void 0:e.join(""))!=="0000000000000000"){const c=await this.getReferenceRegion();if(c){const{seq:o,start:l,end:E}=c,Q=LA(o),S=(t=i.parsedContent.md5)===null||t===void 0?void 0:t.map(p=>(p<16?"0":"")+p.toString(16)).join("");if(Q!==S)throw new ee(`MD5 checksum reference mismatch for ref ${i.parsedContent.refSeqId} pos ${l}..${E}. recorded MD5: ${S}, calculated MD5: ${Q}`)}}const a=await this.getCoreDataBlock(),w={lastAlignmentStart:Ie(i.parsedContent)?i.parsedContent.refSeqStart:0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{map:new Map,getCursor(c){let o=this.map.get(c);return o===void 0&&(o={bitPosition:7,bytePosition:0},this.map.set(c,o)),o}}},d=c=>{const o=r.getCodecForDataSeries(c);if(!o)throw new ee(`no codec defined for ${c} data series`);return o.decode(this,a,s,w)},g=new Array(i.parsedContent.numRecords);for(let c=0;c<g.length;c+=1)try{const o=XA(this,d,r,i,a,s,w,A,c);g[c]=new nA({...o,uniqueId:i.contentPosition+i.parsedContent.recordCounter+c+1})}catch(o){if(o instanceof Qe){console.warn("read attempted beyond end of buffer, file seems truncated.");break}else throw o}for(let c=0;c<g.length;c+=1){const{mateRecordNumber:o}=g[c];o!==void 0&&o>=0&&er(g,c,g[c],g[o])}return g}async getRecords(e){const t=this.container.filePosition+this.containerPosition;let A=this.file.featureCache.get(t.toString());A||(A=this._fetchRecords(),this.file.featureCache.set(t.toString(),A));const i=(await A).filter(e);if(i.length&&this.file.fetchReferenceSequenceCallback){const s=await this.getHeader();if(Ie(s.parsedContent)&&(s.parsedContent.refSeqId>=0||s.parsedContent.refSeqId===-2)){const a=s.parsedContent.refSeqId>=0?s.parsedContent.refSeqId:void 0,w=await this.container.getCompressionScheme();if(w===void 0)throw new Error("compression scheme undefined");const d={};for(const g of i){const c=a!==void 0?a:g.sequenceId;let o=d[c];o||(o={id:c,start:g.alignmentStart,end:Number.NEGATIVE_INFINITY,seq:null},d[c]=o);const l=g.alignmentStart+(g.lengthOnRef||g.readLength)-1;l>o.end&&(o.end=l),g.alignmentStart<o.start&&(o.start=g.alignmentStart)}await Promise.all(Object.values(d).map(async g=>{g.id!==-1&&g.start<=g.end&&this.file.fetchReferenceSequenceCallback&&(g.seq=await this.file.fetchReferenceSequenceCallback(g.id,g.start,g.end))}));for(const g of i){const c=a!==void 0?a:g.sequenceId,o=d[c];if(o!=null&&o.seq){const l=o.seq;g.addReferenceSequence({...o,seq:l},w)}}}}return i}}"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach(n=>{pe(Ft,n)});class de{constructor(e,t){this.parameters=e,this.dataType=t}}function tr(n){let e=n-(n>>1)&1431655765;return e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}class Ar extends de{constructor(e,t){if(super(e,t),this.codes={},this.codeBook={},this.sortedCodes=[],this.sortedValuesByBitCode=[],this.sortedBitCodes=[],this.sortedBitLengthsByBitCode=[],this.bitCodeToValue=[],!["byte","int"].includes(this.dataType))throw new TypeError(`${this.dataType} decoding not yet implemented by HUFFMAN_INT codec`);this.buildCodeBook(),this.buildCodes(),this.buildCaches(),this.sortedCodes[0].bitLength===0&&(this._decode=this._decodeZeroLengthCode)}buildCodeBook(){let e=new Array(this.parameters.numCodes);for(let t=0;t<this.parameters.numCodes;t++)e[t]={symbol:this.parameters.symbols[t],bitLength:this.parameters.bitLengths[t]};e=e.sort((t,A)=>t.bitLength-A.bitLength||t.symbol-A.symbol),this.codeBook={},e.forEach(t=>{this.codeBook[t.bitLength]||(this.codeBook[t.bitLength]=[]),this.codeBook[t.bitLength].push(t.symbol)})}buildCodes(){this.codes={};let e=0,t=-1;Object.entries(this.codeBook).forEach(([A,r])=>{const i=Number.parseInt(A,10);r.forEach(s=>{const a={bitLength:i,value:s,bitCode:0};t=t+1;const w=i-e;if(t=t<<w,a.bitCode=t,e=e+w,tr(t)>i)throw new ee("Symbol out of range");this.codes[s]=a})})}buildCaches(){this.sortedCodes=Object.values(this.codes).sort((t,A)=>t.bitLength-A.bitLength||t.bitCode-A.bitCode),this.sortedValuesByBitCode=this.sortedCodes.map(t=>t.value),this.sortedBitCodes=this.sortedCodes.map(t=>t.bitCode),this.sortedBitLengthsByBitCode=this.sortedCodes.map(t=>t.bitLength);const e=Math.max(...this.sortedBitCodes);this.bitCodeToValue=new Array(e+1).fill(-1);for(let t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}decode(e,t,A,r){return this._decode(e,t,r.coreBlock)}_decodeZeroLengthCode(){return this.sortedCodes[0].value}_decode(e,t,A){const r=t.content;let i=0,s=0;for(let a=0;a<this.sortedCodes.length;a+=1){const w=this.sortedCodes[a].bitLength;s<<=w-i,s|=fe(r,A,w-i),i=w;{const d=this.bitCodeToValue[s];if(d>-1&&this.sortedBitLengthsByBitCode[d]===w)return this.sortedValuesByBitCode[d];for(let g=a;this.sortedCodes[g+1].bitLength===w&&g<this.sortedCodes.length;g+=1)a+=1}}throw new ee("Huffman symbol not found.")}}class rr extends de{constructor(e,t){if(super(e,t),this.dataType==="int")this._decodeData=this._decodeInt;else if(this.dataType==="byte")this._decodeData=this._decodeByte;else throw new se(`${this.dataType} decoding not yet implemented by EXTERNAL codec`)}decode(e,t,A,r){const{blockContentId:i}=this.parameters,s=A[i];if(!s)throw new ee(`no block found with content ID ${i}}`);const a=r.externalBlocks.getCursor(i);return this._decodeData(s,a)}_decodeInt(e,t){const[A,r]=K(e.content,t.bytePosition);return t.bytePosition=t.bytePosition+r,A}_decodeByte(e,t){if(t.bytePosition>=e.content.length)throw new Qe("attempted to read beyond end of block. this file seems truncated.");return e.content[t.bytePosition++]}}let nr=class extends de{decode(e,t,A,r){const{blockContentId:i}=this.parameters,s=A[i];if(!s)throw new ee(`no block found with content ID ${i}`);const a=r.externalBlocks.getCursor(i);return this._decodeByteArray(s,a)}_decodeByteArray(e,t){const A=e.content,{stopByte:r}=this.parameters,i=t.bytePosition;let s=t.bytePosition;for(;A[s]!==r&&s<A.length;){if(s===A.length)throw new Qe("byteArrayStop reading beyond length of data buffer?");s=s+1}return t.bytePosition=s+1,A.subarray(i,s)}};class Mt extends de{constructor(e,t,A){super(e,t),this.instantiateCodec=A}decode(e,t,A,r){const s=this._getLengthCodec().decode(e,t,A,r),a=this._getDataCodec(),w=new Uint8Array(s);for(let d=0;d<s;d+=1)w[d]=a.decode(e,t,A,r);return w}_getLengthCodec(){const e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}_getDataCodec(){const e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}"_getLengthCodec _getDataCodec".split(" ").forEach(n=>{pe(Mt,n)});class ar extends de{constructor(e,t){if(super(e,t),this.dataType!=="int")throw new se(`${this.dataType} decoding not yet implemented by BETA codec`)}decode(e,t,A,r){return fe(t.content,r.coreBlock,this.parameters.length)-this.parameters.offset}}class ir extends de{constructor(e,t){if(super(e,t),this.dataType!=="int")throw new se(`${this.dataType} decoding not yet implemented by GAMMA codec`)}decode(e,t,A,r){let i=1;for(;fe(t.content,r.coreBlock,1)===0;)i=i+1;return(fe(t.content,r.coreBlock,i-1)|1<<i-1)-this.parameters.offset}}class or extends de{constructor(e,t){if(super(e,t),this.dataType!=="int")throw new se(`${this.dataType} decoding not yet implemented by SUBEXP codec`)}decode(e,t,A,r){let i=0;for(;fe(t.content,r.coreBlock,1);)i=i+1;let s,a;if(i===0)s=this.parameters.K,a=fe(t.content,r.coreBlock,s);else{s=i+this.parameters.K-1;const w=fe(t.content,r.coreBlock,s);a=1<<s|w}return a-this.parameters.offset}}const sr={1:rr,3:Ar,4:Mt,5:nr,6:ar,7:or,9:ir};function gr(n){return sr[n]}function We(n,e){const t=gr(e==="ignore"?0:n.codecId);if(!t)throw new se(`no codec implemented for codec ID ${n.codecId}`);return new t(n.parameters,e,We)}const cr={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int"};function fr(n){const e=new Array(5);for(let t=0;t<5;t+=1)e[t]=new Array(4);return e[0][n[0]>>6&3]="C",e[0][n[0]>>4&3]="G",e[0][n[0]>>2&3]="T",e[0][n[0]>>0&3]="N",e[1][n[1]>>6&3]="A",e[1][n[1]>>4&3]="G",e[1][n[1]>>2&3]="T",e[1][n[1]>>0&3]="N",e[2][n[2]>>6&3]="A",e[2][n[2]>>4&3]="C",e[2][n[2]>>2&3]="T",e[2][n[2]>>0&3]="N",e[3][n[3]>>6&3]="A",e[3][n[3]>>4&3]="C",e[3][n[3]>>2&3]="G",e[3][n[3]>>0&3]="N",e[4][n[4]>>6&3]="A",e[4][n[4]>>4&3]="C",e[4][n[4]>>2&3]="G",e[4][n[4]>>0&3]="T",e}class lr{constructor(e){this.dataSeriesCodecCache={},this.tagCodecCache={},this.tagEncoding={},this.readNamesIncluded=e.preservation.RN,this.APdelta=e.preservation.AP,this.referenceRequired=!!e.preservation.RR,this.tagIdsDictionary=e.preservation.TD,this.substitutionMatrix=fr(e.preservation.SM),this.dataSeriesEncoding=e.dataSeriesEncoding,this.tagEncoding=e.tagEncoding}getCodecForTag(e){const t=this.tagCodecCache[e];if(t)return t;{const A=this.tagEncoding[e];if(!A)throw new Error("Error, no tag encoding");const r=We(A,"byteArray");return this.tagCodecCache[e]=r,r}}getTagNames(e){return this.tagIdsDictionary[e]}getCodecForDataSeries(e){let t=this.dataSeriesCodecCache[e];if(t===void 0){const A=this.dataSeriesEncoding[e];if(A){const r=cr[e];if(!r)throw new ee(`data series name ${e} not defined in file compression header`);t=We(A,r),this.dataSeriesCodecCache[e]=t}}return t}toJSON(){const e={};return Object.keys(this).forEach(t=>{t.endsWith("Cache")||(e[t]=this[t])}),e}}class Nt{constructor(e,t){this.file=e,this.filePosition=t}getHeader(){return this._readContainerHeader(this.filePosition)}async getCompressionHeaderBlock(){const e=await this.getHeader();if(!(e!=null&&e.numRecords))return null;const{majorVersion:t}=await this.file.getDefinition(),A=ce(t),r=await this.getFirstBlock();if(r===void 0)return;if(r.contentType!=="COMPRESSION_HEADER")throw new ee(`invalid content type ${r.contentType} in compression header block`);const i=le(r.content,A.cramCompressionHeader.parser,0,r.contentPosition);return{...r,parsedContent:i}}async getFirstBlock(){const e=await this.getHeader();if(e)return this.file.readBlock(e._endPosition)}async getCompressionScheme(){const e=await this.getCompressionHeaderBlock();if(e)return new lr(e.parsedContent)}getSlice(e,t){return new Ft(this,e,t)}async _readContainerHeader(e){const{majorVersion:t}=await this.file.getDefinition(),A=ce(t),{cramContainerHeader1:r,cramContainerHeader2:i}=A,{size:s}=await this.file.stat();if(e>=s){console.warn(`pos:${e}>=fileSize:${s} in cram container`);return}const a=oe.Buffer.allocUnsafe(r.maxLength);await this.file.read(a,0,r.maxLength,e);const w=le(a,r.parser),d=bA(w.numLandmarks);if(e+w.length>=s){console.warn(`container at ${e} is beyond fileSize:${s}, skipping`);return}const g=oe.Buffer.allocUnsafe(i.maxLength(w.numLandmarks));await this.file.read(g,0,i.maxLength(w.numLandmarks),e+w._size-d);const c=le(g,i.parser);return this.file.validateChecksums&&c.crc32!==void 0&&await this.file.checkCrc32(e,w._size+c._size-d-4,c.crc32,`container header beginning at position ${e}`),Object.assign(w,c,{_size:w._size+c._size-d,_endPosition:w._size+c._size-d+e})}}"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach(n=>{pe(Nt,n)});function xt(n,e,t){if(t)return t;if(n)return new Ht(n);if(e)return new Pt(e);throw new Error("no url, path, or filehandle provided, cannot open")}function ut(n){const e=n.split(/\r?\n/),t=[];for(const A of e){const[r,...i]=A.split(/\t/);r&&t.push({tag:r.slice(1),data:i.map(s=>{const a=s.indexOf(":");return a!==-1?{tag:s.slice(0,a),value:s.slice(a+1)}:{tag:s,value:""}})})}return t}function dr(n){return new ReadableStream({start(e){e.enqueue(n),e.close()}})}function hr(){const n=new Uint32Array([287454020]),e=new Uint8Array(n.buffer);return e[0]===68?0:e[0]===17?1:2}class Ye{constructor(e){var t;if(this.file=xt(e.url,e.path,e.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=e.seqFetch,this.options={checkSequenceMD5:e.checkSequenceMD5,cacheSize:(t=e.cacheSize)!==null&&t!==void 0?t:2e4},this.featureCache=new Gt({maxSize:this.options.cacheSize}),hr()>0)throw new Error("Detected big-endian machine, may be unable to run")}read(e,t,A,r){return this.file.read(e,t,A,r)}stat(){return this.file.stat()}async getDefinition(){const{maxLength:e,parser:t}=_t(),A=oe.Buffer.allocUnsafe(e);await this.file.read(A,0,e,0);const r=t(A).value;if(r.majorVersion!==2&&r.majorVersion!==3)throw new se(`CRAM version ${r.majorVersion} not supported`);return r}async getSamHeader(){const e=await this.getContainerById(0);if(!e)throw new ee("file contains no containers");const t=await e.getFirstBlock();if(t===void 0)return ut("");const A=t.content,r=A.readInt32LE(0),i=4,s=A.toString("utf8",i,i+r);return this.header=s,ut(s)}async getHeaderText(){return await this.getSamHeader(),this.header}async getContainerById(e){const{majorVersion:t}=await this.getDefinition(),A=ce(t);let r=A.cramFileDefinition.maxLength;const{size:i}=await this.file.stat(),{cramContainerHeader1:s}=A;let a;for(let w=0;w<=e;w++){if(r+s.maxLength+8>=i)return;a=this.getContainerAtPosition(r);const d=await a.getHeader();if(!d)throw new ee(`container ${e} not found in file`);if(w===0){r=d._endPosition;for(let g=0;g<d.numBlocks;g++){const c=await this.readBlock(r);if(c===void 0)return;r=c._endPosition}}else r+=d._size+d.length}return a}async checkCrc32(e,t,A,r){const i=oe.Buffer.allocUnsafe(t);await this.file.read(i,0,t,e);const s=Kt.unsigned(i);if(s!==A)throw new ee(`crc mismatch in ${r}: recorded CRC32 = ${A}, but calculated CRC32 = ${s}`)}async containerCount(){const{majorVersion:e}=await this.getDefinition(),t=ce(e),{size:A}=await this.file.stat(),{cramContainerHeader1:r}=t;let i=0,s=t.cramFileDefinition.maxLength;for(;s+r.maxLength+8<A;){const a=await this.getContainerAtPosition(s).getHeader();if(!a)break;if(i===0){s=a._endPosition;for(let w=0;w<a.numBlocks;w++){const d=await this.readBlock(s);if(d===void 0)return;s=d._endPosition}}else s+=a._size+a.length;i+=1}return i}getContainerAtPosition(e){return new Nt(this,e)}async readBlockHeader(e){const{majorVersion:t}=await this.getDefinition(),A=ce(t),{cramBlockHeader:r}=A,{size:i}=await this.file.stat();if(e+r.maxLength>=i)return;const s=oe.Buffer.allocUnsafe(r.maxLength);return await this.file.read(s,0,r.maxLength,e),le(s,r.parser,0,e)}async _parseSection(e,t,A=e.maxLength,r){let i;if(r)i=r;else{const{size:a}=await this.file.stat();if(t+A>=a)return;i=oe.Buffer.allocUnsafe(A),await this.file.read(i,0,A,t)}const s=le(i,e.parser,0,t);if(s._size!==A)throw new ee(`section read error: requested size ${A} does not equal parsed size ${s._size}`);return s}async _uncompress(e,t,A){if(e==="gzip")pt(t).copy(A);else if(e==="bzip2"){const r=He.array(t);let i=He.header(r),s=0,a;do a=He.decompress(r,i),a!==-1&&(oe.Buffer.from(a).copy(A,s),s+=a.length,i-=a.length);while(a!==-1)}else if(e==="lzma"){const r=new Response(new dA.XzReadableStream(dr(t)));oe.Buffer.from(await r.arrayBuffer()).copy(A)}else if(e==="rans")kA(t,A);else if(e==="rans4x16")Ee.r4x16_uncompress(t,A);else if(e==="arith")Ee.arith_uncompress(t,A);else if(e==="fqzcomp")Ee.fqzcomp_uncompress(t,A);else if(e==="tok3")Ee.tok3_uncompress(t,A);else throw new se(`${e} decompression not yet implemented`)}async readBlock(e){const{majorVersion:t}=await this.getDefinition(),A=ce(t),r=await this.readBlockHeader(e);if(r===void 0)return;const i=r._endPosition,s=oe.Buffer.allocUnsafe(r.uncompressedSize),a={...r,_endPosition:i,contentPosition:i,content:s};if(r.compressionMethod!=="raw"){const w=oe.Buffer.allocUnsafe(r.compressedSize);await this.read(w,0,r.compressedSize,i),await this._uncompress(r.compressionMethod,w,s)}else await this.read(s,0,r.uncompressedSize,i);if(t>=3){const w=await this._parseSection(A.cramBlockCrc32,i+r.compressedSize);if(w===void 0)return;a.crc32=w.crc32,this.validateChecksums&&await this.checkCrc32(e,r._size+r.compressedSize,w.crc32,"block data"),a._endPosition=w._endPosition,a._size=a.compressedSize+A.cramBlockCrc32.maxLength}else a._endPosition=i+a.compressedSize,a._size=a.compressedSize;return a}}"getDefinition getSectionParsers getSamHeader".split(" ").forEach(n=>{pe(Ye,n)});const Ir=21578050;function Bt(n,e){const[t,A,r,i,s,a]=e,w=t;n[w]||(n[w]=[]),n[w].push({start:A,span:r,containerStart:i,sliceStart:s,sliceBytes:a})}function Cr(n){return n[0]===31&&n[1]===139?pt(n):n}class ur{constructor(e){this.filehandle=xt(e.url,e.path,e.filehandle)}async parseIndex(){const e={},t=Cr(await this.filehandle.readFile());if(t.length>4&&t.readUInt32LE(0)===Ir)throw new ee("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");let A=[],r="";for(const i of t)if(i>=48&&i<=57||!r&&i===45)r+=String.fromCharCode(i);else if(i===9)A.push(Number.parseInt(r,10)),r="";else if(i===10)A.push(Number.parseInt(r,10)),r="",Bt(e,A),A=[];else if(i!==13&&i!==32)throw new ee("invalid .crai index file");return r&&A.push(Number.parseInt(r,10)),A.length===6&&Bt(e,A),Object.entries(e).forEach(([i,s])=>{const a=s;e[i]=a.sort((w,d)=>w.start-d.start||w.span-d.span)}),e}getIndex(){return this.parseIndexP||(this.parseIndexP=this.parseIndex().catch(e=>{throw this.parseIndexP=void 0,e})),this.parseIndexP}async hasDataForReferenceSequence(e){return!!(await this.getIndex())[e]}async getEntriesForRange(e,t,A){const r=(await this.getIndex())[e];if(!r)return[];const i=a=>{const w=a.start,d=a.start+a.span;return w>A?-1:d<=t?1:0},s=[];for(const a of r)i(a)===0&&s.push(a);return s}}class Br{constructor(e){var t;if(this.cram=(t=e.cram)!==null&&t!==void 0?t:new Ye({url:e.cramUrl,path:e.cramPath,filehandle:e.cramFilehandle,seqFetch:e.seqFetch,checkSequenceMD5:e.checkSequenceMD5,cacheSize:e.cacheSize}),!(this.cram instanceof Ye))throw new Error("invalid arguments: no cramfile");this.index=e.index}async getRecordsForRange(e,t,A,r={}){if(r.viewAsPairs=r.viewAsPairs||!1,r.pairAcrossChr=r.pairAcrossChr||!1,r.maxInsertSize=r.maxInsertSize||2e5,typeof e=="string")throw new se("string sequence names not yet supported");const i=e,s=await this.index.getEntriesForRange(i,t,A),a=g=>g.sequenceId===e&&g.alignmentStart<=A&&g.lengthOnRef!==void 0&&g.alignmentStart+g.lengthOnRef-1>=t,w=await Promise.all(s.map(g=>this.getRecordsInSlice(g,a)));let d=Array.prototype.concat(...w);if(r.viewAsPairs){const g={},c={};for(const q of d){const k=q.readName;if(k===void 0)throw new Error("readName undefined");const U=q.uniqueId;g[k]||(g[k]=0),g[k]+=1,c[U]=1}const o={};Object.entries(g).forEach(([q,k])=>{k===1&&(o[q]=!0)});const l=[];for(const q of d){const k=q.readName;if(k===void 0)throw new Error("readName undefined");if(o[k]&&q.mate&&(q.mate.sequenceId===i||r.pairAcrossChr)&&Math.abs(q.alignmentStart-q.mate.alignmentStart)<r.maxInsertSize){const U=this.index.getEntriesForRange(q.mate.sequenceId,q.mate.alignmentStart,q.mate.alignmentStart+1);l.push(U)}}const E=await Promise.all(l);let Q=[];for(const q of E)Q.push(...q);Q=Q.sort((q,k)=>q.toString().localeCompare(k.toString())).filter((q,k,U)=>!k||q.toString()!==U[k-1].toString());const S=[];for(const q of Q){let k=this.cram.featureCache.get(q.toString());k||(k=this.getRecordsInSlice(q,()=>!0),this.cram.featureCache.set(q.toString(),k));const U=k.then(O=>{const W=[];for(const Y of O){if(Y.readName===void 0)throw new Error("readName undefined");o[Y.readName]&&!c[Y.uniqueId]&&W.push(Y)}return W});S.push(U)}const p=await Promise.all(S);if(p.length){const q=p.reduce((k,U)=>k.concat(U));d=d.concat(q)}}return d}getRecordsInSlice({containerStart:e,sliceStart:t,sliceBytes:A},r){return this.cram.getContainerAtPosition(e).getSlice(t,A).getRecords(r)}hasDataForReferenceSequence(e){return this.index.hasDataForReferenceSequence(e)}}function Qr(n,e,t){if(!n)return[];const A=new Array(n.length);let r=0,i=0,s=0,a=0,w=e;for(const{refPos:d,code:g,pos:c,data:o,sub:l,ref:E}of n)if(a=s-w,w=s,a&&i>0&&(A[r++]={start:s,type:"insertion",base:`${i}`,length:0},i=0),s=d-1-e,g==="X")A[r++]={start:s,length:1,base:l,qual:t==null?void 0:t[c-1],altbase:E==null?void 0:E.toUpperCase(),type:"mismatch"};else if(g==="I")A[r++]={start:s,type:"insertion",base:`${o.length}`,length:0};else if(g==="N")A[r++]={type:"skip",length:o,start:s,base:"N"};else if(g==="S"){const Q=o.length;A[r++]={start:s,type:"softclip",base:`S${Q}`,cliplen:Q,length:1}}else if(g!=="P")if(g==="H"){const Q=o;A[r++]={start:s,type:"hardclip",base:`H${Q}`,cliplen:Q,length:1}}else g==="D"?A[r++]={type:"deletion",length:o,start:s,base:"*"}:g==="b"||g==="q"||g==="B"||g==="i"&&i++;return a&&i>0&&(A[r++]={start:s,type:"insertion",base:`${i}`,length:0},i=0),A.slice(0,r)}function Er(n,e,t,A){let r="",i="",s="M",a=0;if(!A)return"";const w=A.seq,d=A.start;let g=e,c=0,o=0;if(n!==void 0)for(const{code:l,refPos:E,sub:Q,data:S}of n)if(c=E-g,r+=w.slice(g-d,E-d),g=E,o>0&&c&&(i+=`${o}I`,o=0),a&&s!=="M"&&(i+=`${a}${s}`,a=0),c&&(s="M",a+=c),l==="b"){const p=S.split(","),q=String.fromCharCode(...p);r+=q,g+=q.length,a+=q.length}else l==="B"||l==="X"?(r+=Q,g++,a++):l==="D"||l==="N"?(g+=S,a&&(i+=`${a}${s}`),i+=S+l,a=0):l==="I"||l==="S"?(r+=S,a&&(i+=`${a}${s}`),i+=S.length+l,a=0):l==="i"?(a&&(i+=`${a}${s}`),o++,r+=S,a=0):l==="P"?(a&&(i+=`${a}${s}`),i+=`${S}P`):l==="H"&&(a&&(i+=`${a}${s}`),i+=`${S}H`,a=0);else c=t-r.length;return r.length!==t&&(c=t-r.length,r+=w.slice(g-d,g-d+c),a&&s!=="M"&&(i+=`${a}${s}`,a=0),s="M",a+=c),c&&o>0&&(i+=`${o}I`),a&&(i+=`${a}${s}`),i}class Se{constructor(e,t){this.record=e,this._store=t}get name(){return this.record.readName}get start(){return this.record.alignmentStart-1}get end(){var e;return this.start+((e=this.record.lengthOnRef)!==null&&e!==void 0?e:1)}get score(){return this.record.mappingQuality}get flags(){return this.record.flags}get strand(){return this.record.isReverseComplemented()?-1:1}get qual(){return(this.record.qualityScores||[]).join(" ")}get qualRaw(){return this.record.qualityScores}get refName(){return this._store.refIdToName(this.record.sequenceId)}get pair_orientation(){return this.record.isPaired()?this.record.getPairOrientation():void 0}get template_length(){return this.record.templateLength||this.record.templateSize}get next_ref(){return this.record.mate?this._store.refIdToName(this.record.mate.sequenceId):void 0}get next_segment_position(){return this.record.mate?`${this._store.refIdToName(this.record.mate.sequenceId)}:${this.record.mate.alignmentStart}`:void 0}get is_paired(){return!!this.record.mate}get next_pos(){var e;return(e=this.record.mate)===null||e===void 0?void 0:e.alignmentStart}get tags(){var e;const t=(e=this._store.samHeader.readGroups)===null||e===void 0?void 0:e[this.record.readGroupId];return t!==void 0?{...this.record.tags,RG:t}:this.record.tags}get seq(){return this.record.getReadBases()}get CIGAR(){return Er(this.record.readFeatures,this.record.alignmentStart,this.record.readLength,this.record._refRegion)}id(){return`${this._store.id}-${this.record.uniqueId}`}get(e){return e==="mismatches"?this.mismatches:e==="qual"?this.qual:e==="CIGAR"?this.CIGAR:this.fields[e]}parent(){}children(){}get mismatches(){return Qr(this.record.readFeatures,this.start,this.qualRaw)}get fields(){return{start:this.start,name:this.name,end:this.end,score:this.score,strand:this.strand,template_length:this.template_length,flags:this.flags,tags:this.tags,refName:this.refName,seq:this.seq,type:"match",pair_orientation:this.pair_orientation,next_ref:this.next_ref,next_pos:this.next_pos,next_segment_position:this.next_segment_position,uniqueId:this.id()}}toJSON(){return{...this.fields,CIGAR:this.CIGAR,qual:this.qual}}}ze(Se,"fields");ze(Se,"CIGAR");ze(Se,"mismatches");class Mr extends $t.BaseFeatureDataAdapter{constructor(){super(...arguments),this.samHeader={},this.ultraLongFeatureCache=new Vt({maxSize:500}),this.seqIdToOriginalRefName=[]}async configurePre(){const e=this.getConf("cramLocation"),t=this.getConf("craiLocation"),A=this.pluginManager,r=new Br({cramFilehandle:Xe.openLocation(e,A),index:new ur({filehandle:Xe.openLocation(t,A)}),seqFetch:(...a)=>this.seqFetch(...a),checkSequenceMD5:!1});if(!this.getSubAdapter)throw new Error("Error getting subadapter");const i=this.getConf("sequenceAdapter");if(!i)throw new Error("no sequenceAdapter supplied to CramAdapter config");const s=await this.getSubAdapter(i);return{cram:r,sequenceAdapter:s.dataAdapter}}async configure(){return this.configureP||(this.configureP=this.configurePre().catch(e=>{throw this.configureP=void 0,e})),this.configureP}async getHeader(e){const{cram:t}=await this.configure();return t.cram.getHeaderText()}async seqFetch(e,t,A){t-=1;const{sequenceAdapter:r}=await this.configure(),i=this.refIdToOriginalName(e)||this.refIdToName(e);if(!i)throw new Error("unknown");const a=(await Ot(r.getFeatures({refName:i,start:t,end:A,assemblyName:""}).pipe(Jt()))).sort((d,g)=>d.get("start")-g.get("start")).map(d=>{const g=d.get("start"),c=d.get("end"),o=Math.max(t-g,0),E=Math.min(A-g,c-g)-o;return(d.get("seq")||d.get("residues")).slice(o,o+E)}).join(""),w=A-t;if(a.length!==w)throw new Error(`fetching ${i}:${ge.toLocale(t-1)}-${ge.toLocale(A)} returned ${ge.toLocale(a.length)} bases, should have returned ${ge.toLocale(w)}`);return a}async setupPre(e){const{statusCallback:t=()=>{}}=e||{};return ge.updateStatus("Downloading index",t,async()=>{const A=await this.configure(),{cram:r}=A,i=await r.cram.getSamHeader(),s=[],a={};i.filter(g=>g.tag==="SQ").forEach((g,c)=>{const o=g.data.find(l=>l.tag==="SN");if(o){const l=o.value;a[l]=c,s[c]=l}});const w=i.filter(g=>g.tag==="RG").map(g=>{var c;return(c=g.data.find(o=>o.tag==="ID"))===null||c===void 0?void 0:c.value}),d={idToName:s,nameToId:a,readGroups:w};return this.samHeader=d,{samHeader:d,...A}})}async setup(e){return this.setupP||(this.setupP=this.setupPre(e).catch(t=>{throw this.setupP=void 0,t})),this.setupP}async getRefNames(e){const{samHeader:t}=await this.setup(e);if(!t.idToName)throw new Error("CRAM file has no header lines");return t.idToName}refNameToId(e){if(this.samHeader.nameToId)return this.samHeader.nameToId[e];if(this.seqIdToRefName)return this.seqIdToRefName.indexOf(e)}refIdToName(e){var t,A;return((t=this.samHeader.idToName)===null||t===void 0?void 0:t[e])||((A=this.seqIdToRefName)===null||A===void 0?void 0:A[e])}refIdToOriginalName(e){return this.seqIdToOriginalRefName[e]}getFeatures(e,t){const{stopToken:A,filterBy:r,statusCallback:i=()=>{}}=t||{},{refName:s,start:a,end:w,originalRefName:d}=e;return Xt.ObservableCreate(async g=>{const{cram:c,samHeader:o}=await this.setup(t),l=this.refNameToId(s);if(l===void 0){console.warn("Unknown refName",s),g.complete();return}d&&(this.seqIdToOriginalRefName[l]=d);const E=await ge.updateStatus("Downloading alignments",i,()=>c.getRecordsForRange(l,a,w));Tt.checkStopToken(A),await ge.updateStatus("Processing alignments",i,()=>{var Q;const{flagInclude:S=0,flagExclude:p=0,tagFilter:q,readName:k}=r||{};for(const U of E){if(Wt(U.flags,S,p)||q&&Yt(q.tag==="RG"?(Q=o.readGroups)===null||Q===void 0?void 0:Q[U.readGroupId]:U.tags[q.tag],q.value)||k&&U.readName!==k)continue;const O=this.ultraLongFeatureCache.get(`${U.uniqueId}`);if(O)g.next(O);else{const W=this.cramRecordToFeature(U);this.ultraLongFeatureCache.set(`${U.uniqueId}`,W),g.next(W)}}g.complete()})},A)}freeResources(){}cramRecordToFeature(e){return new Se(e,this)}async getMultiRegionFeatureDensityStats(e,t){const A=await this.bytesForRegions(e,t),r=this.getConf("fetchSizeLimit");return{bytes:A,fetchSizeLimit:r}}async bytesForRegions(e,t){const{cram:A}=await this.configure();return(await Promise.all(e.map(i=>{const{refName:s,start:a,end:w}=i,d=this.refNameToId(s);return d!==void 0?A.index.getEntriesForRange(d,a,w):[{sliceBytes:0}]}))).flat().reduce((i,s)=>i+s.sliceBytes,0)}}export{Mr as default};
